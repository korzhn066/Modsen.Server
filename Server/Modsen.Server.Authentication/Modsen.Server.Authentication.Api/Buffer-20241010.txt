{"@timestamp":"2024-10-10T08:15:06.1458385+00:00","level":"Warning","messageTemplate":"Using an in-memory repository. Keys will not be persisted to storage.","message":"Using an in-memory repository. Keys will not be persisted to storage.","fields":{"EventId":{"Id":50,"Name":"UsingInMemoryRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.Repositories.EphemeralXmlRepository"}}
{"@timestamp":"2024-10-10T08:15:06.7921766+00:00","level":"Warning","messageTemplate":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","message":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","fields":{"EventId":{"Id":59,"Name":"UsingEphemeralKeyRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"}}
{"@timestamp":"2024-10-10T08:15:07.2043251+00:00","level":"Information","messageTemplate":"Creating key {KeyId:B} with creation date {CreationDate:u}, activation date {ActivationDate:u}, and expiration date {ExpirationDate:u}.","message":"Creating key {5df84165-c5cf-4fd7-8682-057e8faafb27} with creation date 2024-10-10 08:15:07Z, activation date 2024-10-10 08:15:07Z, and expiration date 2025-01-08 08:15:07Z.","fields":{"KeyId":"5df84165-c5cf-4fd7-8682-057e8faafb27","CreationDate":"2024-10-10T08:15:07.1987212+00:00","ActivationDate":"2024-10-10T08:15:07.1834148+00:00","ExpirationDate":"2025-01-08T08:15:07.1834148+00:00","EventId":{"Id":58,"Name":"CreatingKey"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{5df84165-c5cf-4fd7-8682-057e8faafb27}"}],"CreationDate":[{"Format":"u","Rendering":"2024-10-10 08:15:07Z"}],"ActivationDate":[{"Format":"u","Rendering":"2024-10-10 08:15:07Z"}],"ExpirationDate":[{"Format":"u","Rendering":"2025-01-08 08:15:07Z"}]}}
{"@timestamp":"2024-10-10T08:15:07.2982903+00:00","level":"Warning","messageTemplate":"No XML encryptor configured. Key {KeyId:B} may be persisted to storage in unencrypted form.","message":"No XML encryptor configured. Key {5df84165-c5cf-4fd7-8682-057e8faafb27} may be persisted to storage in unencrypted form.","fields":{"KeyId":"5df84165-c5cf-4fd7-8682-057e8faafb27","EventId":{"Id":35,"Name":"NoXMLEncryptorConfiguredKeyMayBePersistedToStorageInUnencryptedForm"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{5df84165-c5cf-4fd7-8682-057e8faafb27}"}]}}
{"@timestamp":"2024-10-10T08:15:07.6336364+00:00","level":"Information","messageTemplate":"Bus started: {HostAddress}","message":"Bus started: loopback://localhost/","fields":{"HostAddress":"loopback://localhost/","SourceContext":"MassTransit"}}
{"@timestamp":"2024-10-10T08:15:08.8001568+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"http://[::]:8080\"","fields":{"address":"http://[::]:8080","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:15:08.8031954+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"https://[::]:8081\"","fields":{"address":"https://[::]:8081","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:15:08.8062810+00:00","level":"Information","messageTemplate":"Application started. Press Ctrl+C to shut down.","message":"Application started. Press Ctrl+C to shut down.","fields":{"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:15:08.8117330+00:00","level":"Information","messageTemplate":"Hosting environment: {EnvName}","message":"Hosting environment: \"Development\"","fields":{"EnvName":"Development","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:15:08.8217680+00:00","level":"Information","messageTemplate":"Content root path: {ContentRoot}","message":"Content root path: \"/app\"","fields":{"ContentRoot":"/app","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:15:41.4718507+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/authentication/login\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/authentication/login","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1HS:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HS"}}
{"@timestamp":"2024-10-10T08:15:41.5082495+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN790ETIM1HS:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HS"}}
{"@timestamp":"2024-10-10T08:15:41.5224050+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/authentication/login\"\"\" - 204 null null 51.8479ms","fields":{"ElapsedMilliseconds":51.8479,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.0","Method":"OPTIONS","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/authentication/login","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1HS:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HS"}}
{"@timestamp":"2024-10-10T08:15:41.5303185+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"POST\" \"https\"://\"authentication\"\"\"\"/api/authentication/login\"\"\" - \"application/json\" 46","fields":{"Protocol":"HTTP/1.0","Method":"POST","ContentType":"application/json","ContentLength":46,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/authentication/login","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1HT:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HT"}}
{"@timestamp":"2024-10-10T08:15:41.5341533+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN790ETIM1HT:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HT"}}
{"@timestamp":"2024-10-10T08:15:41.6483405+00:00","level":"Information","messageTemplate":"Failed to validate the token.","message":"Failed to validate the token.","exceptions":[{"Depth":0,"ClassName":"Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException","Message":"IDX14100: JWT is not well formed, there are no dots (.).\nThe token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.","Source":"Microsoft.IdentityModel.JsonWebTokens","StackTraceString":"   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)","RemoteStackTraceString":null,"RemoteStackIndex":0,"HResult":-2147024809,"HelpURL":null}],"fields":{"EventId":{"Id":1,"Name":"TokenValidationFailed"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN790ETIM1HT:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HT"}}
{"@timestamp":"2024-10-10T08:15:41.7002867+00:00","level":"Information","messageTemplate":"{AuthenticationScheme} was not authenticated. Failure message: {FailureMessage}","message":"\"Bearer\" was not authenticated. Failure message: \"IDX14100: JWT is not well formed, there are no dots (.).\nThe token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.\"","fields":{"AuthenticationScheme":"Bearer","FailureMessage":"IDX14100: JWT is not well formed, there are no dots (.).\nThe token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.","EventId":{"Id":7,"Name":"AuthenticationSchemeNotAuthenticatedWithFailure"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN790ETIM1HT:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HT"}}
{"@timestamp":"2024-10-10T08:15:41.7052193+00:00","level":"Information","messageTemplate":"Executing endpoint '{EndpointName}'","message":"Executing endpoint '\"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN790ETIM1HT:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HT"}}
{"@timestamp":"2024-10-10T08:15:41.7305260+00:00","level":"Information","messageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","message":"Route matched with \"{action = \\\"Login\\\", controller = \\\"Authentication\\\"}\". Executing controller action with signature \"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Modsen.Server.Authentication.Application.Models.Authentication.LoginModel)\" on controller \"Modsen.Server.Authentication.Api.Controllers.AuthenticationController\" (\"Modsen.Server.Authentication.Api\").","fields":{"RouteData":"{action = \"Login\", controller = \"Authentication\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Modsen.Server.Authentication.Application.Models.Authentication.LoginModel)","Controller":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController","AssemblyName":"Modsen.Server.Authentication.Api","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"702bc90c-ead7-4255-a1d1-2206bee1da57","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1HT:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HT"}}
{"@timestamp":"2024-10-10T08:15:43.9811740+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"652\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='60']\"\n\"\"CREATE DATABASE [authentication];\"","fields":{"elapsed":"652","parameters":"","commandType":"Text","commandTimeout":60,"newLine":"\n","commandText":"CREATE DATABASE [authentication];","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"702bc90c-ead7-4255-a1d1-2206bee1da57","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1HT:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HT"}}
{"@timestamp":"2024-10-10T08:15:44.2026745+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"219\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='60']\"\n\"\"IF SERVERPROPERTY('EngineEdition') <> 5\nBEGIN\n    ALTER DATABASE [authentication] SET READ_COMMITTED_SNAPSHOT ON;\nEND;\"","fields":{"elapsed":"219","parameters":"","commandType":"Text","commandTimeout":60,"newLine":"\n","commandText":"IF SERVERPROPERTY('EngineEdition') <> 5\nBEGIN\n    ALTER DATABASE [authentication] SET READ_COMMITTED_SNAPSHOT ON;\nEND;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"702bc90c-ead7-4255-a1d1-2206bee1da57","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1HT:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HT"}}
{"@timestamp":"2024-10-10T08:15:44.2302762+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"5\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT 1\"","fields":{"elapsed":"5","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"702bc90c-ead7-4255-a1d1-2206bee1da57","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1HT:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HT"}}
{"@timestamp":"2024-10-10T08:15:44.3505891+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"117\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0\"","fields":{"elapsed":"117","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"702bc90c-ead7-4255-a1d1-2206bee1da57","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1HT:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HT"}}
{"@timestamp":"2024-10-10T08:15:44.4932964+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"9\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"CREATE TABLE [AspNetRoles] (\n    [Id] nvarchar(450) NOT NULL,\n    [Name] nvarchar(256) NULL,\n    [NormalizedName] nvarchar(256) NULL,\n    [ConcurrencyStamp] nvarchar(max) NULL,\n    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])\n);\"","fields":{"elapsed":"9","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"CREATE TABLE [AspNetRoles] (\n    [Id] nvarchar(450) NOT NULL,\n    [Name] nvarchar(256) NULL,\n    [NormalizedName] nvarchar(256) NULL,\n    [ConcurrencyStamp] nvarchar(max) NULL,\n    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])\n);","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"702bc90c-ead7-4255-a1d1-2206bee1da57","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1HT:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HT"}}
{"@timestamp":"2024-10-10T08:15:44.4972175+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"2\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"CREATE TABLE [AspNetUsers] (\n    [Id] nvarchar(450) NOT NULL,\n    [UserStatus] int NOT NULL,\n    [RefreshToken] nvarchar(max) NULL,\n    [RefreshTokenExpiryTime] datetime2 NOT NULL,\n    [UserName] nvarchar(256) NULL,\n    [NormalizedUserName] nvarchar(256) NULL,\n    [Email] nvarchar(256) NULL,\n    [NormalizedEmail] nvarchar(256) NULL,\n    [EmailConfirmed] bit NOT NULL,\n    [PasswordHash] nvarchar(max) NULL,\n    [SecurityStamp] nvarchar(max) NULL,\n    [ConcurrencyStamp] nvarchar(max) NULL,\n    [PhoneNumber] nvarchar(max) NULL,\n    [PhoneNumberConfirmed] bit NOT NULL,\n    [TwoFactorEnabled] bit NOT NULL,\n    [LockoutEnd] datetimeoffset NULL,\n    [LockoutEnabled] bit NOT NULL,\n    [AccessFailedCount] int NOT NULL,\n    CONSTRAINT [PK_AspNetUsers] PRIMARY KEY ([Id])\n);\"","fields":{"elapsed":"2","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"CREATE TABLE [AspNetUsers] (\n    [Id] nvarchar(450) NOT NULL,\n    [UserStatus] int NOT NULL,\n    [RefreshToken] nvarchar(max) NULL,\n    [RefreshTokenExpiryTime] datetime2 NOT NULL,\n    [UserName] nvarchar(256) NULL,\n    [NormalizedUserName] nvarchar(256) NULL,\n    [Email] nvarchar(256) NULL,\n    [NormalizedEmail] nvarchar(256) NULL,\n    [EmailConfirmed] bit NOT NULL,\n    [PasswordHash] nvarchar(max) NULL,\n    [SecurityStamp] nvarchar(max) NULL,\n    [ConcurrencyStamp] nvarchar(max) NULL,\n    [PhoneNumber] nvarchar(max) NULL,\n    [PhoneNumberConfirmed] bit NOT NULL,\n    [TwoFactorEnabled] bit NOT NULL,\n    [LockoutEnd] datetimeoffset NULL,\n    [LockoutEnabled] bit NOT NULL,\n    [AccessFailedCount] int NOT NULL,\n    CONSTRAINT [PK_AspNetUsers] PRIMARY KEY ([Id])\n);","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"702bc90c-ead7-4255-a1d1-2206bee1da57","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1HT:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HT"}}
{"@timestamp":"2024-10-10T08:15:44.5006739+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"2\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"CREATE TABLE [AspNetRoleClaims] (\n    [Id] int NOT NULL IDENTITY,\n    [RoleId] nvarchar(450) NOT NULL,\n    [ClaimType] nvarchar(max) NULL,\n    [ClaimValue] nvarchar(max) NULL,\n    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),\n    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE\n);\"","fields":{"elapsed":"2","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"CREATE TABLE [AspNetRoleClaims] (\n    [Id] int NOT NULL IDENTITY,\n    [RoleId] nvarchar(450) NOT NULL,\n    [ClaimType] nvarchar(max) NULL,\n    [ClaimValue] nvarchar(max) NULL,\n    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),\n    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE\n);","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"702bc90c-ead7-4255-a1d1-2206bee1da57","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1HT:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HT"}}
{"@timestamp":"2024-10-10T08:15:44.5039071+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"2\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"CREATE TABLE [AspNetUserClaims] (\n    [Id] int NOT NULL IDENTITY,\n    [UserId] nvarchar(450) NOT NULL,\n    [ClaimType] nvarchar(max) NULL,\n    [ClaimValue] nvarchar(max) NULL,\n    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),\n    CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE\n);\"","fields":{"elapsed":"2","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"CREATE TABLE [AspNetUserClaims] (\n    [Id] int NOT NULL IDENTITY,\n    [UserId] nvarchar(450) NOT NULL,\n    [ClaimType] nvarchar(max) NULL,\n    [ClaimValue] nvarchar(max) NULL,\n    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),\n    CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE\n);","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"702bc90c-ead7-4255-a1d1-2206bee1da57","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1HT:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HT"}}
{"@timestamp":"2024-10-10T08:15:44.5080944+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"3\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"CREATE TABLE [AspNetUserLogins] (\n    [LoginProvider] nvarchar(450) NOT NULL,\n    [ProviderKey] nvarchar(450) NOT NULL,\n    [ProviderDisplayName] nvarchar(max) NULL,\n    [UserId] nvarchar(450) NOT NULL,\n    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),\n    CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE\n);\"","fields":{"elapsed":"3","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"CREATE TABLE [AspNetUserLogins] (\n    [LoginProvider] nvarchar(450) NOT NULL,\n    [ProviderKey] nvarchar(450) NOT NULL,\n    [ProviderDisplayName] nvarchar(max) NULL,\n    [UserId] nvarchar(450) NOT NULL,\n    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),\n    CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE\n);","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"702bc90c-ead7-4255-a1d1-2206bee1da57","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1HT:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HT"}}
{"@timestamp":"2024-10-10T08:15:44.5117861+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"2\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"CREATE TABLE [AspNetUserRoles] (\n    [UserId] nvarchar(450) NOT NULL,\n    [RoleId] nvarchar(450) NOT NULL,\n    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),\n    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,\n    CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE\n);\"","fields":{"elapsed":"2","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"CREATE TABLE [AspNetUserRoles] (\n    [UserId] nvarchar(450) NOT NULL,\n    [RoleId] nvarchar(450) NOT NULL,\n    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),\n    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,\n    CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE\n);","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"702bc90c-ead7-4255-a1d1-2206bee1da57","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1HT:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HT"}}
{"@timestamp":"2024-10-10T08:15:44.5148525+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"2\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"CREATE TABLE [AspNetUserTokens] (\n    [UserId] nvarchar(450) NOT NULL,\n    [LoginProvider] nvarchar(450) NOT NULL,\n    [Name] nvarchar(450) NOT NULL,\n    [Value] nvarchar(max) NULL,\n    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),\n    CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE\n);\"","fields":{"elapsed":"2","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"CREATE TABLE [AspNetUserTokens] (\n    [UserId] nvarchar(450) NOT NULL,\n    [LoginProvider] nvarchar(450) NOT NULL,\n    [Name] nvarchar(450) NOT NULL,\n    [Value] nvarchar(max) NULL,\n    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),\n    CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE\n);","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"702bc90c-ead7-4255-a1d1-2206bee1da57","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1HT:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HT"}}
{"@timestamp":"2024-10-10T08:15:44.5869047+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"71\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ConcurrencyStamp', N'Name', N'NormalizedName') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))\n    SET IDENTITY_INSERT [AspNetRoles] ON;\nINSERT INTO [AspNetRoles] ([Id], [ConcurrencyStamp], [Name], [NormalizedName])\nVALUES (N'1e445865-a24d-4543-a6c6-9443d048cdb9', NULL, N'Client', N'CLIENT'),\n(N'2e445865-a24d-4543-a6c6-9443d048cdb9', NULL, N'Admin', N'ADMIN');\nIF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ConcurrencyStamp', N'Name', N'NormalizedName') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))\n    SET IDENTITY_INSERT [AspNetRoles] OFF;\"","fields":{"elapsed":"71","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ConcurrencyStamp', N'Name', N'NormalizedName') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))\n    SET IDENTITY_INSERT [AspNetRoles] ON;\nINSERT INTO [AspNetRoles] ([Id], [ConcurrencyStamp], [Name], [NormalizedName])\nVALUES (N'1e445865-a24d-4543-a6c6-9443d048cdb9', NULL, N'Client', N'CLIENT'),\n(N'2e445865-a24d-4543-a6c6-9443d048cdb9', NULL, N'Admin', N'ADMIN');\nIF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ConcurrencyStamp', N'Name', N'NormalizedName') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))\n    SET IDENTITY_INSERT [AspNetRoles] OFF;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"702bc90c-ead7-4255-a1d1-2206bee1da57","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1HT:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HT"}}
{"@timestamp":"2024-10-10T08:15:44.6026665+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"15\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutEnabled', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'RefreshToken', N'RefreshTokenExpiryTime', N'SecurityStamp', N'TwoFactorEnabled', N'UserName', N'UserStatus') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))\n    SET IDENTITY_INSERT [AspNetUsers] ON;\nINSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [RefreshToken], [RefreshTokenExpiryTime], [SecurityStamp], [TwoFactorEnabled], [UserName], [UserStatus])\nVALUES (N'3e445865-a24d-4543-a6c6-9443d048cdb9', 0, N'78887dee-1872-482d-b257-0f02e4781f5c', NULL, CAST(0 AS bit), CAST(0 AS bit), NULL, NULL, N'ADMIN', N'AQAAAAIAAYagAAAAEL/p/wZBBLK4tyVptsDqP1g4TOMhGdH46DAmvM5YycZQYOBp3HLkW/Dv7fLpl6t3PQ==', N'+375336121213', CAST(0 AS bit), NULL, '0001-01-01T00:00:00.0000000', N'566c7fae-cc6c-4c39-89e0-a5c1591dd328', CAST(0 AS bit), N'admin', 1),\n(N'4e445865-a24d-4543-a6c6-9443d048cdb9', 0, N'fdbee896-3eaa-46ea-992f-d4713cb7f33f', NULL, CAST(0 AS bit), CAST(0 AS bit), NULL, NULL, N'USER1', N'AQAAAAIAAYagAAAAEIhyj5kHDVyYLdnsJENABwUvfG+bA9ObHKzuiFHH06PoKYoKkf3N4EeYn+7e/uPQWg==', N'+375336121213', CAST(0 AS bit), NULL, '0001-01-01T00:00:00.0000000', N'b8231348-f29e-4a71-b4ea-3fcfd002e451', CAST(0 AS bit), N'user1', 1);\nIF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutEnabled', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'RefreshToken', N'RefreshTokenExpiryTime', N'SecurityStamp', N'TwoFactorEnabled', N'UserName', N'UserStatus') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))\n    SET IDENTITY_INSERT [AspNetUsers] OFF;\"","fields":{"elapsed":"15","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutEnabled', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'RefreshToken', N'RefreshTokenExpiryTime', N'SecurityStamp', N'TwoFactorEnabled', N'UserName', N'UserStatus') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))\n    SET IDENTITY_INSERT [AspNetUsers] ON;\nINSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [RefreshToken], [RefreshTokenExpiryTime], [SecurityStamp], [TwoFactorEnabled], [UserName], [UserStatus])\nVALUES (N'3e445865-a24d-4543-a6c6-9443d048cdb9', 0, N'78887dee-1872-482d-b257-0f02e4781f5c', NULL, CAST(0 AS bit), CAST(0 AS bit), NULL, NULL, N'ADMIN', N'AQAAAAIAAYagAAAAEL/p/wZBBLK4tyVptsDqP1g4TOMhGdH46DAmvM5YycZQYOBp3HLkW/Dv7fLpl6t3PQ==', N'+375336121213', CAST(0 AS bit), NULL, '0001-01-01T00:00:00.0000000', N'566c7fae-cc6c-4c39-89e0-a5c1591dd328', CAST(0 AS bit), N'admin', 1),\n(N'4e445865-a24d-4543-a6c6-9443d048cdb9', 0, N'fdbee896-3eaa-46ea-992f-d4713cb7f33f', NULL, CAST(0 AS bit), CAST(0 AS bit), NULL, NULL, N'USER1', N'AQAAAAIAAYagAAAAEIhyj5kHDVyYLdnsJENABwUvfG+bA9ObHKzuiFHH06PoKYoKkf3N4EeYn+7e/uPQWg==', N'+375336121213', CAST(0 AS bit), NULL, '0001-01-01T00:00:00.0000000', N'b8231348-f29e-4a71-b4ea-3fcfd002e451', CAST(0 AS bit), N'user1', 1);\nIF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutEnabled', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'RefreshToken', N'RefreshTokenExpiryTime', N'SecurityStamp', N'TwoFactorEnabled', N'UserName', N'UserStatus') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))\n    SET IDENTITY_INSERT [AspNetUsers] OFF;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"702bc90c-ead7-4255-a1d1-2206bee1da57","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1HT:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HT"}}
{"@timestamp":"2024-10-10T08:15:44.6197172+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"14\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'RoleId', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserRoles]'))\n    SET IDENTITY_INSERT [AspNetUserRoles] ON;\nINSERT INTO [AspNetUserRoles] ([RoleId], [UserId])\nVALUES (N'1e445865-a24d-4543-a6c6-9443d048cdb9', N'3e445865-a24d-4543-a6c6-9443d048cdb9'),\n(N'2e445865-a24d-4543-a6c6-9443d048cdb9', N'3e445865-a24d-4543-a6c6-9443d048cdb9'),\n(N'1e445865-a24d-4543-a6c6-9443d048cdb9', N'4e445865-a24d-4543-a6c6-9443d048cdb9');\nIF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'RoleId', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserRoles]'))\n    SET IDENTITY_INSERT [AspNetUserRoles] OFF;\"","fields":{"elapsed":"14","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'RoleId', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserRoles]'))\n    SET IDENTITY_INSERT [AspNetUserRoles] ON;\nINSERT INTO [AspNetUserRoles] ([RoleId], [UserId])\nVALUES (N'1e445865-a24d-4543-a6c6-9443d048cdb9', N'3e445865-a24d-4543-a6c6-9443d048cdb9'),\n(N'2e445865-a24d-4543-a6c6-9443d048cdb9', N'3e445865-a24d-4543-a6c6-9443d048cdb9'),\n(N'1e445865-a24d-4543-a6c6-9443d048cdb9', N'4e445865-a24d-4543-a6c6-9443d048cdb9');\nIF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'RoleId', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserRoles]'))\n    SET IDENTITY_INSERT [AspNetUserRoles] OFF;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"702bc90c-ead7-4255-a1d1-2206bee1da57","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1HT:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HT"}}
{"@timestamp":"2024-10-10T08:15:44.6232887+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"2\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);\"","fields":{"elapsed":"2","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"702bc90c-ead7-4255-a1d1-2206bee1da57","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1HT:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HT"}}
{"@timestamp":"2024-10-10T08:15:44.6426304+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"18\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;\"","fields":{"elapsed":"18","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"702bc90c-ead7-4255-a1d1-2206bee1da57","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1HT:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HT"}}
{"@timestamp":"2024-10-10T08:15:44.6454559+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"1\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);\"","fields":{"elapsed":"1","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"702bc90c-ead7-4255-a1d1-2206bee1da57","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1HT:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HT"}}
{"@timestamp":"2024-10-10T08:15:44.6487131+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"2\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);\"","fields":{"elapsed":"2","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"702bc90c-ead7-4255-a1d1-2206bee1da57","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1HT:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HT"}}
{"@timestamp":"2024-10-10T08:15:44.6579847+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"8\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);\"","fields":{"elapsed":"8","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"702bc90c-ead7-4255-a1d1-2206bee1da57","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1HT:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HT"}}
{"@timestamp":"2024-10-10T08:15:44.6677482+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"9\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"CREATE INDEX [EmailIndex] ON [AspNetUsers] ([NormalizedEmail]);\"","fields":{"elapsed":"9","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"CREATE INDEX [EmailIndex] ON [AspNetUsers] ([NormalizedEmail]);","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"702bc90c-ead7-4255-a1d1-2206bee1da57","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1HT:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HT"}}
{"@timestamp":"2024-10-10T08:15:44.6783537+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"9\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;\"","fields":{"elapsed":"9","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"702bc90c-ead7-4255-a1d1-2206bee1da57","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1HT:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HT"}}
{"@timestamp":"2024-10-10T08:15:45.0326057+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"53\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"53","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"702bc90c-ead7-4255-a1d1-2206bee1da57","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1HT:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HT"}}
{"@timestamp":"2024-10-10T08:15:45.2379605+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"11\"ms) [Parameters=[\"@__userId_0='?' (Size = 450)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT [a0].[Name]\nFROM [AspNetUserRoles] AS [a]\nINNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]\nWHERE [a].[UserId] = @__userId_0\"","fields":{"elapsed":"11","parameters":"@__userId_0='?' (Size = 450)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT [a0].[Name]\nFROM [AspNetUserRoles] AS [a]\nINNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]\nWHERE [a].[UserId] = @__userId_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"702bc90c-ead7-4255-a1d1-2206bee1da57","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1HT:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HT"}}
{"@timestamp":"2024-10-10T08:15:45.2513139+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"3\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"3","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"702bc90c-ead7-4255-a1d1-2206bee1da57","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1HT:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HT"}}
{"@timestamp":"2024-10-10T08:15:45.3365630+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"23\"ms) [Parameters=[\"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;\"","fields":{"elapsed":"23","parameters":"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"702bc90c-ead7-4255-a1d1-2206bee1da57","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1HT:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HT"}}
{"@timestamp":"2024-10-10T08:15:45.3487895+00:00","level":"Information","messageTemplate":"User login","message":"User login","fields":{"SourceContext":"Modsen.Server.Authentication.Application.Features.ApplicationUser.Commands.LoginApplicationUser","ActionId":"702bc90c-ead7-4255-a1d1-2206bee1da57","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1HT:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HT"}}
{"@timestamp":"2024-10-10T08:15:45.3838065+00:00","level":"Information","messageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","message":"Executing \"OkObjectResult\", writing value of type '\"System.String\"'.","fields":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"702bc90c-ead7-4255-a1d1-2206bee1da57","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1HT:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HT"}}
{"@timestamp":"2024-10-10T08:15:45.3915130+00:00","level":"Information","messageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","message":"Executed action \"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)\" in 3655.8763ms","fields":{"ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","ElapsedMilliseconds":3655.8763,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HN790ETIM1HT:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HT"}}
{"@timestamp":"2024-10-10T08:15:45.3933007+00:00","level":"Information","messageTemplate":"Executed endpoint '{EndpointName}'","message":"Executed endpoint '\"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN790ETIM1HT:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HT"}}
{"@timestamp":"2024-10-10T08:15:45.4009466+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"POST\" \"https\"://\"authentication\"\"\"\"/api/authentication/login\"\"\" - 200 null \"text/plain; charset=utf-8\" 3870.0645ms","fields":{"ElapsedMilliseconds":3870.0645,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.0","Method":"POST","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/authentication/login","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1HT:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HT"}}
{"@timestamp":"2024-10-10T08:15:56.7348462+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/authentication/login\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/authentication/login","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1HU:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HU"}}
{"@timestamp":"2024-10-10T08:15:56.7366830+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN790ETIM1HU:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HU"}}
{"@timestamp":"2024-10-10T08:15:56.7380623+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/authentication/login\"\"\" - 204 null null 3.2119ms","fields":{"ElapsedMilliseconds":3.2119,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.0","Method":"OPTIONS","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/authentication/login","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1HU:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HU"}}
{"@timestamp":"2024-10-10T08:15:56.7456392+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"POST\" \"https\"://\"authentication\"\"\"\"/api/authentication/login\"\"\" - \"application/json\" 46","fields":{"Protocol":"HTTP/1.0","Method":"POST","ContentType":"application/json","ContentLength":46,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/authentication/login","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1HV:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HV"}}
{"@timestamp":"2024-10-10T08:15:56.7466002+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN790ETIM1HV:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HV"}}
{"@timestamp":"2024-10-10T08:15:56.7807752+00:00","level":"Information","messageTemplate":"Executing endpoint '{EndpointName}'","message":"Executing endpoint '\"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN790ETIM1HV:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HV"}}
{"@timestamp":"2024-10-10T08:15:56.7826818+00:00","level":"Information","messageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","message":"Route matched with \"{action = \\\"Login\\\", controller = \\\"Authentication\\\"}\". Executing controller action with signature \"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Modsen.Server.Authentication.Application.Models.Authentication.LoginModel)\" on controller \"Modsen.Server.Authentication.Api.Controllers.AuthenticationController\" (\"Modsen.Server.Authentication.Api\").","fields":{"RouteData":"{action = \"Login\", controller = \"Authentication\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Modsen.Server.Authentication.Application.Models.Authentication.LoginModel)","Controller":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController","AssemblyName":"Modsen.Server.Authentication.Api","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"702bc90c-ead7-4255-a1d1-2206bee1da57","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1HV:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HV"}}
{"@timestamp":"2024-10-10T08:15:56.8101925+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"1\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT 1\"","fields":{"elapsed":"1","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"702bc90c-ead7-4255-a1d1-2206bee1da57","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1HV:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HV"}}
{"@timestamp":"2024-10-10T08:15:56.8129282+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"2\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0\"","fields":{"elapsed":"2","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"702bc90c-ead7-4255-a1d1-2206bee1da57","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1HV:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HV"}}
{"@timestamp":"2024-10-10T08:15:56.8252256+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"3\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"3","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"702bc90c-ead7-4255-a1d1-2206bee1da57","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1HV:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HV"}}
{"@timestamp":"2024-10-10T08:15:56.9728500+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"3\"ms) [Parameters=[\"@__userId_0='?' (Size = 450)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT [a0].[Name]\nFROM [AspNetUserRoles] AS [a]\nINNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]\nWHERE [a].[UserId] = @__userId_0\"","fields":{"elapsed":"3","parameters":"@__userId_0='?' (Size = 450)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT [a0].[Name]\nFROM [AspNetUserRoles] AS [a]\nINNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]\nWHERE [a].[UserId] = @__userId_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"702bc90c-ead7-4255-a1d1-2206bee1da57","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1HV:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HV"}}
{"@timestamp":"2024-10-10T08:15:56.9803121+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"4\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"4","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"702bc90c-ead7-4255-a1d1-2206bee1da57","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1HV:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HV"}}
{"@timestamp":"2024-10-10T08:15:56.9975160+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"13\"ms) [Parameters=[\"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;\"","fields":{"elapsed":"13","parameters":"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"702bc90c-ead7-4255-a1d1-2206bee1da57","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1HV:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HV"}}
{"@timestamp":"2024-10-10T08:15:56.9998658+00:00","level":"Information","messageTemplate":"User login","message":"User login","fields":{"SourceContext":"Modsen.Server.Authentication.Application.Features.ApplicationUser.Commands.LoginApplicationUser","ActionId":"702bc90c-ead7-4255-a1d1-2206bee1da57","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1HV:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HV"}}
{"@timestamp":"2024-10-10T08:15:57.0031814+00:00","level":"Information","messageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","message":"Executing \"OkObjectResult\", writing value of type '\"System.String\"'.","fields":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"702bc90c-ead7-4255-a1d1-2206bee1da57","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1HV:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HV"}}
{"@timestamp":"2024-10-10T08:15:57.0045321+00:00","level":"Information","messageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","message":"Executed action \"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)\" in 220.4947ms","fields":{"ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","ElapsedMilliseconds":220.4947,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HN790ETIM1HV:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HV"}}
{"@timestamp":"2024-10-10T08:15:57.0054407+00:00","level":"Information","messageTemplate":"Executed endpoint '{EndpointName}'","message":"Executed endpoint '\"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN790ETIM1HV:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HV"}}
{"@timestamp":"2024-10-10T08:15:57.0067043+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"POST\" \"https\"://\"authentication\"\"\"\"/api/authentication/login\"\"\" - 200 null \"text/plain; charset=utf-8\" 261.0173ms","fields":{"ElapsedMilliseconds":261.0173,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.0","Method":"POST","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/authentication/login","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1HV:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN790ETIM1HV"}}
{"@timestamp":"2024-10-10T08:15:58.8140677+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/users\"\"?page=1&count=10\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/users","QueryString":"?page=1&count=10","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1I0:00000001","RequestPath":"/api/users","ConnectionId":"0HN790ETIM1I0"}}
{"@timestamp":"2024-10-10T08:15:58.8159757+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN790ETIM1I0:00000001","RequestPath":"/api/users","ConnectionId":"0HN790ETIM1I0"}}
{"@timestamp":"2024-10-10T08:15:58.8177049+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/users\"\"?page=1&count=10\" - 204 null null 3.5285ms","fields":{"ElapsedMilliseconds":3.5285,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.0","Method":"OPTIONS","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/users","QueryString":"?page=1&count=10","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1I0:00000001","RequestPath":"/api/users","ConnectionId":"0HN790ETIM1I0"}}
{"@timestamp":"2024-10-10T08:15:58.8260694+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/users\"\"?page=1&count=10\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/users","QueryString":"?page=1&count=10","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1I1:00000001","RequestPath":"/api/users","ConnectionId":"0HN790ETIM1I1"}}
{"@timestamp":"2024-10-10T08:15:58.8316395+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN790ETIM1I1:00000001","RequestPath":"/api/users","ConnectionId":"0HN790ETIM1I1"}}
{"@timestamp":"2024-10-10T08:15:58.8447125+00:00","level":"Information","messageTemplate":"Executing endpoint '{EndpointName}'","message":"Executing endpoint '\"Modsen.Server.Authentication.Api.Controllers.UsersController.GetUsers (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.UsersController.GetUsers (Modsen.Server.Authentication.Api)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN790ETIM1I1:00000001","RequestPath":"/api/users","ConnectionId":"0HN790ETIM1I1"}}
{"@timestamp":"2024-10-10T08:15:58.8514025+00:00","level":"Information","messageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","message":"Route matched with \"{action = \\\"GetUsers\\\", controller = \\\"Users\\\"}\". Executing controller action with signature \"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsers(Int32, Int32)\" on controller \"Modsen.Server.Authentication.Api.Controllers.UsersController\" (\"Modsen.Server.Authentication.Api\").","fields":{"RouteData":"{action = \"GetUsers\", controller = \"Users\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsers(Int32, Int32)","Controller":"Modsen.Server.Authentication.Api.Controllers.UsersController","AssemblyName":"Modsen.Server.Authentication.Api","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"18b4be80-b3ac-4536-8a3c-d0226a33c5b8","ActionName":"Modsen.Server.Authentication.Api.Controllers.UsersController.GetUsers (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1I1:00000001","RequestPath":"/api/users","ConnectionId":"0HN790ETIM1I1"}}
{"@timestamp":"2024-10-10T08:15:58.8990480+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"1\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT 1\"","fields":{"elapsed":"1","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"18b4be80-b3ac-4536-8a3c-d0226a33c5b8","ActionName":"Modsen.Server.Authentication.Api.Controllers.UsersController.GetUsers (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1I1:00000001","RequestPath":"/api/users","ConnectionId":"0HN790ETIM1I1"}}
{"@timestamp":"2024-10-10T08:15:58.9015361+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"1\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0\"","fields":{"elapsed":"1","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"18b4be80-b3ac-4536-8a3c-d0226a33c5b8","ActionName":"Modsen.Server.Authentication.Api.Controllers.UsersController.GetUsers (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1I1:00000001","RequestPath":"/api/users","ConnectionId":"0HN790ETIM1I1"}}
{"@timestamp":"2024-10-10T08:15:59.0195018+00:00","level":"Information","messageTemplate":"Get users","message":"Get users","fields":{"SourceContext":"Modsen.Server.Authentication.Application.Features.ApplicationUser.QueryHandlers.GetApplicationUsersHandler","ActionId":"18b4be80-b3ac-4536-8a3c-d0226a33c5b8","ActionName":"Modsen.Server.Authentication.Api.Controllers.UsersController.GetUsers (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1I1:00000001","RequestPath":"/api/users","ConnectionId":"0HN790ETIM1I1"}}
{"@timestamp":"2024-10-10T08:15:59.0268111+00:00","level":"Warning","messageTemplate":"The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.","message":"The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.","fields":{"EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"18b4be80-b3ac-4536-8a3c-d0226a33c5b8","ActionName":"Modsen.Server.Authentication.Api.Controllers.UsersController.GetUsers (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1I1:00000001","RequestPath":"/api/users","ConnectionId":"0HN790ETIM1I1"}}
{"@timestamp":"2024-10-10T08:15:59.0289618+00:00","level":"Warning","messageTemplate":"The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.","message":"The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.","fields":{"EventId":{"Id":10102,"Name":"Microsoft.EntityFrameworkCore.Query.RowLimitingOperationWithoutOrderByWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"18b4be80-b3ac-4536-8a3c-d0226a33c5b8","ActionName":"Modsen.Server.Authentication.Api.Controllers.UsersController.GetUsers (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1I1:00000001","RequestPath":"/api/users","ConnectionId":"0HN790ETIM1I1"}}
{"@timestamp":"2024-10-10T08:15:59.0411092+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"5\"ms) [Parameters=[\"@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nORDER BY (SELECT 1)\nOFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY\"","fields":{"elapsed":"5","parameters":"@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nORDER BY (SELECT 1)\nOFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"18b4be80-b3ac-4536-8a3c-d0226a33c5b8","ActionName":"Modsen.Server.Authentication.Api.Controllers.UsersController.GetUsers (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1I1:00000001","RequestPath":"/api/users","ConnectionId":"0HN790ETIM1I1"}}
{"@timestamp":"2024-10-10T08:15:59.0938874+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"4\"ms) [Parameters=[\"@__userId_0='?' (Size = 450)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT [a0].[Name]\nFROM [AspNetUserRoles] AS [a]\nINNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]\nWHERE [a].[UserId] = @__userId_0\"","fields":{"elapsed":"4","parameters":"@__userId_0='?' (Size = 450)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT [a0].[Name]\nFROM [AspNetUserRoles] AS [a]\nINNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]\nWHERE [a].[UserId] = @__userId_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"18b4be80-b3ac-4536-8a3c-d0226a33c5b8","ActionName":"Modsen.Server.Authentication.Api.Controllers.UsersController.GetUsers (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1I1:00000001","RequestPath":"/api/users","ConnectionId":"0HN790ETIM1I1"}}
{"@timestamp":"2024-10-10T08:15:59.1148768+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"5\"ms) [Parameters=[\"@__userId_0='?' (Size = 450)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT [a0].[Name]\nFROM [AspNetUserRoles] AS [a]\nINNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]\nWHERE [a].[UserId] = @__userId_0\"","fields":{"elapsed":"5","parameters":"@__userId_0='?' (Size = 450)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT [a0].[Name]\nFROM [AspNetUserRoles] AS [a]\nINNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]\nWHERE [a].[UserId] = @__userId_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"18b4be80-b3ac-4536-8a3c-d0226a33c5b8","ActionName":"Modsen.Server.Authentication.Api.Controllers.UsersController.GetUsers (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1I1:00000001","RequestPath":"/api/users","ConnectionId":"0HN790ETIM1I1"}}
{"@timestamp":"2024-10-10T08:15:59.1181057+00:00","level":"Information","messageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","message":"Executing \"OkObjectResult\", writing value of type '\"System.Collections.Generic.List`1[[Modsen.Server.Authentication.Application.Models.Responses.UserResponse, Modsen.Server.Authentication.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]\"'.","fields":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[Modsen.Server.Authentication.Application.Models.Responses.UserResponse, Modsen.Server.Authentication.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"18b4be80-b3ac-4536-8a3c-d0226a33c5b8","ActionName":"Modsen.Server.Authentication.Api.Controllers.UsersController.GetUsers (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1I1:00000001","RequestPath":"/api/users","ConnectionId":"0HN790ETIM1I1"}}
{"@timestamp":"2024-10-10T08:15:59.1474478+00:00","level":"Information","messageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","message":"Executed action \"Modsen.Server.Authentication.Api.Controllers.UsersController.GetUsers (Modsen.Server.Authentication.Api)\" in 294.8217ms","fields":{"ActionName":"Modsen.Server.Authentication.Api.Controllers.UsersController.GetUsers (Modsen.Server.Authentication.Api)","ElapsedMilliseconds":294.8217,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HN790ETIM1I1:00000001","RequestPath":"/api/users","ConnectionId":"0HN790ETIM1I1"}}
{"@timestamp":"2024-10-10T08:15:59.1485919+00:00","level":"Information","messageTemplate":"Executed endpoint '{EndpointName}'","message":"Executed endpoint '\"Modsen.Server.Authentication.Api.Controllers.UsersController.GetUsers (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.UsersController.GetUsers (Modsen.Server.Authentication.Api)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN790ETIM1I1:00000001","RequestPath":"/api/users","ConnectionId":"0HN790ETIM1I1"}}
{"@timestamp":"2024-10-10T08:15:59.1505462+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/users\"\"?page=1&count=10\" - 200 null \"application/json; charset=utf-8\" 324.4091ms","fields":{"ElapsedMilliseconds":324.4091,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.0","Method":"GET","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/users","QueryString":"?page=1&count=10","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1I1:00000001","RequestPath":"/api/users","ConnectionId":"0HN790ETIM1I1"}}
{"@timestamp":"2024-10-10T08:17:45.7262662+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/2\" \"GET\" \"https\"://\"localhost:5011\"\"\"\"/swagger/index.html\"\"\" - null null","fields":{"Protocol":"HTTP/2","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"localhost:5011","PathBase":"","Path":"/swagger/index.html","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1I2:00000001","RequestPath":"/swagger/index.html","ConnectionId":"0HN790ETIM1I2"}}
{"@timestamp":"2024-10-10T08:17:45.7791006+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/2\" \"GET\" \"https\"://\"localhost:5011\"\"\"\"/swagger/index.html\"\"\" - 200 null \"text/html;charset=utf-8\" 52.7914ms","fields":{"ElapsedMilliseconds":52.7914,"StatusCode":200,"ContentType":"text/html;charset=utf-8","ContentLength":null,"Protocol":"HTTP/2","Method":"GET","Scheme":"https","Host":"localhost:5011","PathBase":"","Path":"/swagger/index.html","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1I2:00000001","RequestPath":"/swagger/index.html","ConnectionId":"0HN790ETIM1I2"}}
{"@timestamp":"2024-10-10T08:17:45.8122269+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/2\" \"GET\" \"https\"://\"localhost:5011\"\"\"\"/swagger/swagger-ui.css\"\"\" - null null","fields":{"Protocol":"HTTP/2","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"localhost:5011","PathBase":"","Path":"/swagger/swagger-ui.css","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1I2:00000003","RequestPath":"/swagger/swagger-ui.css","ConnectionId":"0HN790ETIM1I2"}}
{"@timestamp":"2024-10-10T08:17:45.8119492+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/2\" \"GET\" \"https\"://\"localhost:5011\"\"\"\"/swagger/swagger-ui-bundle.js\"\"\" - null null","fields":{"Protocol":"HTTP/2","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"localhost:5011","PathBase":"","Path":"/swagger/swagger-ui-bundle.js","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1I2:00000005","RequestPath":"/swagger/swagger-ui-bundle.js","ConnectionId":"0HN790ETIM1I2"}}
{"@timestamp":"2024-10-10T08:17:45.8366978+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/2\" \"GET\" \"https\"://\"localhost:5011\"\"\"\"/swagger/swagger-ui-standalone-preset.js\"\"\" - null null","fields":{"Protocol":"HTTP/2","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"localhost:5011","PathBase":"","Path":"/swagger/swagger-ui-standalone-preset.js","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1I2:00000007","RequestPath":"/swagger/swagger-ui-standalone-preset.js","ConnectionId":"0HN790ETIM1I2"}}
{"@timestamp":"2024-10-10T08:17:46.0304180+00:00","level":"Information","messageTemplate":"Sending file. Request path: '{VirtualPath}'. Physical path: '{PhysicalPath}'","message":"Sending file. Request path: '\"/swagger-ui.css\"'. Physical path: '\"N/A\"'","fields":{"VirtualPath":"/swagger-ui.css","PhysicalPath":"N/A","EventId":{"Id":2,"Name":"FileServed"},"SourceContext":"Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware","RequestId":"0HN790ETIM1I2:00000003","RequestPath":"/swagger/swagger-ui.css","ConnectionId":"0HN790ETIM1I2"}}
{"@timestamp":"2024-10-10T08:17:46.0320060+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/2\" \"GET\" \"https\"://\"localhost:5011\"\"\"\"/swagger/swagger-ui.css\"\"\" - 200 143943 \"text/css\" 220.0058ms","fields":{"ElapsedMilliseconds":220.0058,"StatusCode":200,"ContentType":"text/css","ContentLength":143943,"Protocol":"HTTP/2","Method":"GET","Scheme":"https","Host":"localhost:5011","PathBase":"","Path":"/swagger/swagger-ui.css","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1I2:00000003","RequestPath":"/swagger/swagger-ui.css","ConnectionId":"0HN790ETIM1I2"}}
{"@timestamp":"2024-10-10T08:17:46.0599983+00:00","level":"Information","messageTemplate":"Sending file. Request path: '{VirtualPath}'. Physical path: '{PhysicalPath}'","message":"Sending file. Request path: '\"/swagger-ui-standalone-preset.js\"'. Physical path: '\"N/A\"'","fields":{"VirtualPath":"/swagger-ui-standalone-preset.js","PhysicalPath":"N/A","EventId":{"Id":2,"Name":"FileServed"},"SourceContext":"Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware","RequestId":"0HN790ETIM1I2:00000007","RequestPath":"/swagger/swagger-ui-standalone-preset.js","ConnectionId":"0HN790ETIM1I2"}}
{"@timestamp":"2024-10-10T08:17:46.0828494+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/2\" \"GET\" \"https\"://\"localhost:5011\"\"\"\"/swagger/swagger-ui-standalone-preset.js\"\"\" - 200 339486 \"text/javascript\" 225.5747ms","fields":{"ElapsedMilliseconds":225.5747,"StatusCode":200,"ContentType":"text/javascript","ContentLength":339486,"Protocol":"HTTP/2","Method":"GET","Scheme":"https","Host":"localhost:5011","PathBase":"","Path":"/swagger/swagger-ui-standalone-preset.js","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1I2:00000007","RequestPath":"/swagger/swagger-ui-standalone-preset.js","ConnectionId":"0HN790ETIM1I2"}}
{"@timestamp":"2024-10-10T08:17:46.1612443+00:00","level":"Information","messageTemplate":"Sending file. Request path: '{VirtualPath}'. Physical path: '{PhysicalPath}'","message":"Sending file. Request path: '\"/swagger-ui-bundle.js\"'. Physical path: '\"N/A\"'","fields":{"VirtualPath":"/swagger-ui-bundle.js","PhysicalPath":"N/A","EventId":{"Id":2,"Name":"FileServed"},"SourceContext":"Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware","RequestId":"0HN790ETIM1I2:00000005","RequestPath":"/swagger/swagger-ui-bundle.js","ConnectionId":"0HN790ETIM1I2"}}
{"@timestamp":"2024-10-10T08:17:46.1629450+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/2\" \"GET\" \"https\"://\"localhost:5011\"\"\"\"/swagger/swagger-ui-bundle.js\"\"\" - 200 1096145 \"text/javascript\" 350.9622ms","fields":{"ElapsedMilliseconds":350.9622,"StatusCode":200,"ContentType":"text/javascript","ContentLength":1096145,"Protocol":"HTTP/2","Method":"GET","Scheme":"https","Host":"localhost:5011","PathBase":"","Path":"/swagger/swagger-ui-bundle.js","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1I2:00000005","RequestPath":"/swagger/swagger-ui-bundle.js","ConnectionId":"0HN790ETIM1I2"}}
{"@timestamp":"2024-10-10T08:17:46.3189170+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/2\" \"GET\" \"https\"://\"localhost:5011\"\"\"\"/swagger/favicon-32x32.png\"\"\" - null null","fields":{"Protocol":"HTTP/2","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"localhost:5011","PathBase":"","Path":"/swagger/favicon-32x32.png","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1I2:00000009","RequestPath":"/swagger/favicon-32x32.png","ConnectionId":"0HN790ETIM1I2"}}
{"@timestamp":"2024-10-10T08:17:46.3202073+00:00","level":"Information","messageTemplate":"Sending file. Request path: '{VirtualPath}'. Physical path: '{PhysicalPath}'","message":"Sending file. Request path: '\"/favicon-32x32.png\"'. Physical path: '\"N/A\"'","fields":{"VirtualPath":"/favicon-32x32.png","PhysicalPath":"N/A","EventId":{"Id":2,"Name":"FileServed"},"SourceContext":"Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware","RequestId":"0HN790ETIM1I2:00000009","RequestPath":"/swagger/favicon-32x32.png","ConnectionId":"0HN790ETIM1I2"}}
{"@timestamp":"2024-10-10T08:17:46.3438964+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/2\" \"GET\" \"https\"://\"localhost:5011\"\"\"\"/swagger/favicon-32x32.png\"\"\" - 200 628 \"image/png\" 46.2226ms","fields":{"ElapsedMilliseconds":46.2226,"StatusCode":200,"ContentType":"image/png","ContentLength":628,"Protocol":"HTTP/2","Method":"GET","Scheme":"https","Host":"localhost:5011","PathBase":"","Path":"/swagger/favicon-32x32.png","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1I2:00000009","RequestPath":"/swagger/favicon-32x32.png","ConnectionId":"0HN790ETIM1I2"}}
{"@timestamp":"2024-10-10T08:17:46.3675688+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/2\" \"GET\" \"https\"://\"localhost:5011\"\"\"\"/swagger/index.html\"\"\" - null null","fields":{"Protocol":"HTTP/2","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"localhost:5011","PathBase":"","Path":"/swagger/index.html","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1I3:00000001","RequestPath":"/swagger/index.html","ConnectionId":"0HN790ETIM1I3"}}
{"@timestamp":"2024-10-10T08:17:46.4136941+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/2\" \"GET\" \"https\"://\"localhost:5011\"\"\"\"/swagger/index.html\"\"\" - 200 null \"text/html;charset=utf-8\" 46.1316ms","fields":{"ElapsedMilliseconds":46.1316,"StatusCode":200,"ContentType":"text/html;charset=utf-8","ContentLength":null,"Protocol":"HTTP/2","Method":"GET","Scheme":"https","Host":"localhost:5011","PathBase":"","Path":"/swagger/index.html","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1I3:00000001","RequestPath":"/swagger/index.html","ConnectionId":"0HN790ETIM1I3"}}
{"@timestamp":"2024-10-10T08:17:46.4447507+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/2\" \"GET\" \"https\"://\"localhost:5011\"\"\"\"/swagger/v1/swagger.json\"\"\" - null null","fields":{"Protocol":"HTTP/2","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"localhost:5011","PathBase":"","Path":"/swagger/v1/swagger.json","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1I2:0000000B","RequestPath":"/swagger/v1/swagger.json","ConnectionId":"0HN790ETIM1I2"}}
{"@timestamp":"2024-10-10T08:17:46.5614108+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/2\" \"GET\" \"https\"://\"localhost:5011\"\"\"\"/swagger/v1/swagger.json\"\"\" - 200 null \"application/json;charset=utf-8\" 116.9029ms","fields":{"ElapsedMilliseconds":116.9029,"StatusCode":200,"ContentType":"application/json;charset=utf-8","ContentLength":null,"Protocol":"HTTP/2","Method":"GET","Scheme":"https","Host":"localhost:5011","PathBase":"","Path":"/swagger/v1/swagger.json","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1I2:0000000B","RequestPath":"/swagger/v1/swagger.json","ConnectionId":"0HN790ETIM1I2"}}
{"@timestamp":"2024-10-10T08:17:53.6125904+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/2\" \"GET\" \"https\"://\"localhost:5011\"\"\"\"/swagger/index.html\"\"\" - null null","fields":{"Protocol":"HTTP/2","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"localhost:5011","PathBase":"","Path":"/swagger/index.html","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1I4:00000001","RequestPath":"/swagger/index.html","ConnectionId":"0HN790ETIM1I4"}}
{"@timestamp":"2024-10-10T08:17:53.6585197+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/2\" \"GET\" \"https\"://\"localhost:5011\"\"\"\"/swagger/index.html\"\"\" - 200 null \"text/html;charset=utf-8\" 45.8943ms","fields":{"ElapsedMilliseconds":45.8943,"StatusCode":200,"ContentType":"text/html;charset=utf-8","ContentLength":null,"Protocol":"HTTP/2","Method":"GET","Scheme":"https","Host":"localhost:5011","PathBase":"","Path":"/swagger/index.html","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1I4:00000001","RequestPath":"/swagger/index.html","ConnectionId":"0HN790ETIM1I4"}}
{"@timestamp":"2024-10-10T08:17:54.0771177+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/2\" \"GET\" \"https\"://\"localhost:5011\"\"\"\"/swagger/index.html\"\"\" - null null","fields":{"Protocol":"HTTP/2","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"localhost:5011","PathBase":"","Path":"/swagger/index.html","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1I5:00000001","RequestPath":"/swagger/index.html","ConnectionId":"0HN790ETIM1I5"}}
{"@timestamp":"2024-10-10T08:17:54.0848483+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/2\" \"GET\" \"https\"://\"localhost:5011\"\"\"\"/swagger/index.html\"\"\" - 200 null \"text/html;charset=utf-8\" 8.3714ms","fields":{"ElapsedMilliseconds":8.3714,"StatusCode":200,"ContentType":"text/html;charset=utf-8","ContentLength":null,"Protocol":"HTTP/2","Method":"GET","Scheme":"https","Host":"localhost:5011","PathBase":"","Path":"/swagger/index.html","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1I5:00000001","RequestPath":"/swagger/index.html","ConnectionId":"0HN790ETIM1I5"}}
{"@timestamp":"2024-10-10T08:17:54.1109366+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/2\" \"GET\" \"https\"://\"localhost:5011\"\"\"\"/swagger/v1/swagger.json\"\"\" - null null","fields":{"Protocol":"HTTP/2","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"localhost:5011","PathBase":"","Path":"/swagger/v1/swagger.json","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1I4:00000003","RequestPath":"/swagger/v1/swagger.json","ConnectionId":"0HN790ETIM1I4"}}
{"@timestamp":"2024-10-10T08:17:54.1177587+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/2\" \"GET\" \"https\"://\"localhost:5011\"\"\"\"/swagger/v1/swagger.json\"\"\" - 200 null \"application/json;charset=utf-8\" 6.7875ms","fields":{"ElapsedMilliseconds":6.7875,"StatusCode":200,"ContentType":"application/json;charset=utf-8","ContentLength":null,"Protocol":"HTTP/2","Method":"GET","Scheme":"https","Host":"localhost:5011","PathBase":"","Path":"/swagger/v1/swagger.json","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1I4:00000003","RequestPath":"/swagger/v1/swagger.json","ConnectionId":"0HN790ETIM1I4"}}
{"@timestamp":"2024-10-10T08:18:24.0327229+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1I6:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790ETIM1I6"}}
{"@timestamp":"2024-10-10T08:18:24.0380206+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN790ETIM1I6:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790ETIM1I6"}}
{"@timestamp":"2024-10-10T08:18:24.0388735+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 204 null null 6.1074ms","fields":{"ElapsedMilliseconds":6.1074,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.0","Method":"OPTIONS","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1I6:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790ETIM1I6"}}
{"@timestamp":"2024-10-10T08:18:24.0466617+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1I7:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790ETIM1I7"}}
{"@timestamp":"2024-10-10T08:18:24.0478036+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN790ETIM1I7:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790ETIM1I7"}}
{"@timestamp":"2024-10-10T08:18:24.0508524+00:00","level":"Information","messageTemplate":"Failed to validate the token.","message":"Failed to validate the token.","exceptions":[{"Depth":0,"ClassName":"Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException","Message":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:16:57', Current time (UTC): '10/10/2024 08:18:24'.","Source":"Microsoft.IdentityModel.Tokens","StackTraceString":"   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)","RemoteStackTraceString":null,"RemoteStackIndex":0,"HResult":-2146233088,"HelpURL":null}],"fields":{"EventId":{"Id":1,"Name":"TokenValidationFailed"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN790ETIM1I7:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790ETIM1I7"}}
{"@timestamp":"2024-10-10T08:18:24.0568130+00:00","level":"Information","messageTemplate":"{AuthenticationScheme} was not authenticated. Failure message: {FailureMessage}","message":"\"Bearer\" was not authenticated. Failure message: \"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:16:57', Current time (UTC): '10/10/2024 08:18:24'.\"","fields":{"AuthenticationScheme":"Bearer","FailureMessage":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:16:57', Current time (UTC): '10/10/2024 08:18:24'.","EventId":{"Id":7,"Name":"AuthenticationSchemeNotAuthenticatedWithFailure"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN790ETIM1I7:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790ETIM1I7"}}
{"@timestamp":"2024-10-10T08:18:24.0585032+00:00","level":"Information","messageTemplate":"Executing endpoint '{EndpointName}'","message":"Executing endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN790ETIM1I7:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790ETIM1I7"}}
{"@timestamp":"2024-10-10T08:18:24.0629449+00:00","level":"Information","messageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","message":"Route matched with \"{action = \\\"Refresh\\\", controller = \\\"Token\\\"}\". Executing controller action with signature \"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()\" on controller \"Modsen.Server.Authentication.Api.Controllers.TokenController\" (\"Modsen.Server.Authentication.Api\").","fields":{"RouteData":"{action = \"Refresh\", controller = \"Token\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()","Controller":"Modsen.Server.Authentication.Api.Controllers.TokenController","AssemblyName":"Modsen.Server.Authentication.Api","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"bdba91aa-1e99-4c60-aea3-8e7a43c837bd","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1I7:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790ETIM1I7"}}
{"@timestamp":"2024-10-10T08:18:24.0692175+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"1\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT 1\"","fields":{"elapsed":"1","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"bdba91aa-1e99-4c60-aea3-8e7a43c837bd","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1I7:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790ETIM1I7"}}
{"@timestamp":"2024-10-10T08:18:24.0715847+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"1\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0\"","fields":{"elapsed":"1","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"bdba91aa-1e99-4c60-aea3-8e7a43c837bd","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1I7:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790ETIM1I7"}}
{"@timestamp":"2024-10-10T08:18:24.1139910+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"23\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"23","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"bdba91aa-1e99-4c60-aea3-8e7a43c837bd","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1I7:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790ETIM1I7"}}
{"@timestamp":"2024-10-10T08:18:24.1464520+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"3\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"3","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"bdba91aa-1e99-4c60-aea3-8e7a43c837bd","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1I7:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790ETIM1I7"}}
{"@timestamp":"2024-10-10T08:18:24.1596711+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"8\"ms) [Parameters=[\"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;\"","fields":{"elapsed":"8","parameters":"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"bdba91aa-1e99-4c60-aea3-8e7a43c837bd","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1I7:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790ETIM1I7"}}
{"@timestamp":"2024-10-10T08:18:24.1618283+00:00","level":"Information","messageTemplate":"User refresh token","message":"User refresh token","fields":{"SourceContext":"Modsen.Server.Authentication.Application.Features.ApplicationUser.CommandHandlers.RefreshTokenHandler","ActionId":"bdba91aa-1e99-4c60-aea3-8e7a43c837bd","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1I7:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790ETIM1I7"}}
{"@timestamp":"2024-10-10T08:18:24.1646131+00:00","level":"Information","messageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","message":"Executing \"OkObjectResult\", writing value of type '\"System.String\"'.","fields":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"bdba91aa-1e99-4c60-aea3-8e7a43c837bd","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1I7:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790ETIM1I7"}}
{"@timestamp":"2024-10-10T08:18:24.1659700+00:00","level":"Information","messageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","message":"Executed action \"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\" in 102.3633ms","fields":{"ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","ElapsedMilliseconds":102.3633,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HN790ETIM1I7:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790ETIM1I7"}}
{"@timestamp":"2024-10-10T08:18:24.1667485+00:00","level":"Information","messageTemplate":"Executed endpoint '{EndpointName}'","message":"Executed endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN790ETIM1I7:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790ETIM1I7"}}
{"@timestamp":"2024-10-10T08:18:24.1676261+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 200 null \"text/plain; charset=utf-8\" 120.9476ms","fields":{"ElapsedMilliseconds":120.9476,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.0","Method":"GET","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1I7:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790ETIM1I7"}}
{"@timestamp":"2024-10-10T08:18:24.5317773+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/users\"\"?page=1&count=10\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/users","QueryString":"?page=1&count=10","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1I8:00000001","RequestPath":"/api/users","ConnectionId":"0HN790ETIM1I8"}}
{"@timestamp":"2024-10-10T08:18:24.5330180+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN790ETIM1I8:00000001","RequestPath":"/api/users","ConnectionId":"0HN790ETIM1I8"}}
{"@timestamp":"2024-10-10T08:18:24.5341337+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/users\"\"?page=1&count=10\" - 204 null null 2.3517ms","fields":{"ElapsedMilliseconds":2.3517,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.0","Method":"OPTIONS","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/users","QueryString":"?page=1&count=10","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1I8:00000001","RequestPath":"/api/users","ConnectionId":"0HN790ETIM1I8"}}
{"@timestamp":"2024-10-10T08:18:24.5899289+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/users\"\"?page=1&count=10\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/users","QueryString":"?page=1&count=10","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1I9:00000001","RequestPath":"/api/users","ConnectionId":"0HN790ETIM1I9"}}
{"@timestamp":"2024-10-10T08:18:24.5908901+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN790ETIM1I9:00000001","RequestPath":"/api/users","ConnectionId":"0HN790ETIM1I9"}}
{"@timestamp":"2024-10-10T08:18:24.5963238+00:00","level":"Information","messageTemplate":"Executing endpoint '{EndpointName}'","message":"Executing endpoint '\"Modsen.Server.Authentication.Api.Controllers.UsersController.GetUsers (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.UsersController.GetUsers (Modsen.Server.Authentication.Api)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN790ETIM1I9:00000001","RequestPath":"/api/users","ConnectionId":"0HN790ETIM1I9"}}
{"@timestamp":"2024-10-10T08:18:24.5972841+00:00","level":"Information","messageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","message":"Route matched with \"{action = \\\"GetUsers\\\", controller = \\\"Users\\\"}\". Executing controller action with signature \"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsers(Int32, Int32)\" on controller \"Modsen.Server.Authentication.Api.Controllers.UsersController\" (\"Modsen.Server.Authentication.Api\").","fields":{"RouteData":"{action = \"GetUsers\", controller = \"Users\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsers(Int32, Int32)","Controller":"Modsen.Server.Authentication.Api.Controllers.UsersController","AssemblyName":"Modsen.Server.Authentication.Api","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"18b4be80-b3ac-4536-8a3c-d0226a33c5b8","ActionName":"Modsen.Server.Authentication.Api.Controllers.UsersController.GetUsers (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1I9:00000001","RequestPath":"/api/users","ConnectionId":"0HN790ETIM1I9"}}
{"@timestamp":"2024-10-10T08:18:24.6005579+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"1\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT 1\"","fields":{"elapsed":"1","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"18b4be80-b3ac-4536-8a3c-d0226a33c5b8","ActionName":"Modsen.Server.Authentication.Api.Controllers.UsersController.GetUsers (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1I9:00000001","RequestPath":"/api/users","ConnectionId":"0HN790ETIM1I9"}}
{"@timestamp":"2024-10-10T08:18:24.6040103+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"2\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0\"","fields":{"elapsed":"2","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"18b4be80-b3ac-4536-8a3c-d0226a33c5b8","ActionName":"Modsen.Server.Authentication.Api.Controllers.UsersController.GetUsers (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1I9:00000001","RequestPath":"/api/users","ConnectionId":"0HN790ETIM1I9"}}
{"@timestamp":"2024-10-10T08:18:24.6054369+00:00","level":"Information","messageTemplate":"Get users","message":"Get users","fields":{"SourceContext":"Modsen.Server.Authentication.Application.Features.ApplicationUser.QueryHandlers.GetApplicationUsersHandler","ActionId":"18b4be80-b3ac-4536-8a3c-d0226a33c5b8","ActionName":"Modsen.Server.Authentication.Api.Controllers.UsersController.GetUsers (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1I9:00000001","RequestPath":"/api/users","ConnectionId":"0HN790ETIM1I9"}}
{"@timestamp":"2024-10-10T08:18:24.6101421+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"3\"ms) [Parameters=[\"@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nORDER BY (SELECT 1)\nOFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY\"","fields":{"elapsed":"3","parameters":"@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nORDER BY (SELECT 1)\nOFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"18b4be80-b3ac-4536-8a3c-d0226a33c5b8","ActionName":"Modsen.Server.Authentication.Api.Controllers.UsersController.GetUsers (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1I9:00000001","RequestPath":"/api/users","ConnectionId":"0HN790ETIM1I9"}}
{"@timestamp":"2024-10-10T08:18:24.7046751+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"4\"ms) [Parameters=[\"@__userId_0='?' (Size = 450)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT [a0].[Name]\nFROM [AspNetUserRoles] AS [a]\nINNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]\nWHERE [a].[UserId] = @__userId_0\"","fields":{"elapsed":"4","parameters":"@__userId_0='?' (Size = 450)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT [a0].[Name]\nFROM [AspNetUserRoles] AS [a]\nINNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]\nWHERE [a].[UserId] = @__userId_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"18b4be80-b3ac-4536-8a3c-d0226a33c5b8","ActionName":"Modsen.Server.Authentication.Api.Controllers.UsersController.GetUsers (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1I9:00000001","RequestPath":"/api/users","ConnectionId":"0HN790ETIM1I9"}}
{"@timestamp":"2024-10-10T08:18:24.7099968+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"3\"ms) [Parameters=[\"@__userId_0='?' (Size = 450)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT [a0].[Name]\nFROM [AspNetUserRoles] AS [a]\nINNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]\nWHERE [a].[UserId] = @__userId_0\"","fields":{"elapsed":"3","parameters":"@__userId_0='?' (Size = 450)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT [a0].[Name]\nFROM [AspNetUserRoles] AS [a]\nINNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]\nWHERE [a].[UserId] = @__userId_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"18b4be80-b3ac-4536-8a3c-d0226a33c5b8","ActionName":"Modsen.Server.Authentication.Api.Controllers.UsersController.GetUsers (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1I9:00000001","RequestPath":"/api/users","ConnectionId":"0HN790ETIM1I9"}}
{"@timestamp":"2024-10-10T08:18:24.7120215+00:00","level":"Information","messageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","message":"Executing \"OkObjectResult\", writing value of type '\"System.Collections.Generic.List`1[[Modsen.Server.Authentication.Application.Models.Responses.UserResponse, Modsen.Server.Authentication.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]\"'.","fields":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[Modsen.Server.Authentication.Application.Models.Responses.UserResponse, Modsen.Server.Authentication.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"18b4be80-b3ac-4536-8a3c-d0226a33c5b8","ActionName":"Modsen.Server.Authentication.Api.Controllers.UsersController.GetUsers (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1I9:00000001","RequestPath":"/api/users","ConnectionId":"0HN790ETIM1I9"}}
{"@timestamp":"2024-10-10T08:18:24.7135948+00:00","level":"Information","messageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","message":"Executed action \"Modsen.Server.Authentication.Api.Controllers.UsersController.GetUsers (Modsen.Server.Authentication.Api)\" in 115.4473ms","fields":{"ActionName":"Modsen.Server.Authentication.Api.Controllers.UsersController.GetUsers (Modsen.Server.Authentication.Api)","ElapsedMilliseconds":115.4473,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HN790ETIM1I9:00000001","RequestPath":"/api/users","ConnectionId":"0HN790ETIM1I9"}}
{"@timestamp":"2024-10-10T08:18:24.7153004+00:00","level":"Information","messageTemplate":"Executed endpoint '{EndpointName}'","message":"Executed endpoint '\"Modsen.Server.Authentication.Api.Controllers.UsersController.GetUsers (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.UsersController.GetUsers (Modsen.Server.Authentication.Api)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN790ETIM1I9:00000001","RequestPath":"/api/users","ConnectionId":"0HN790ETIM1I9"}}
{"@timestamp":"2024-10-10T08:18:24.7163657+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/users\"\"?page=1&count=10\" - 200 null \"application/json; charset=utf-8\" 126.372ms","fields":{"ElapsedMilliseconds":126.372,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.0","Method":"GET","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/users","QueryString":"?page=1&count=10","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1I9:00000001","RequestPath":"/api/users","ConnectionId":"0HN790ETIM1I9"}}
{"@timestamp":"2024-10-10T08:18:31.6509935+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1IA:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790ETIM1IA"}}
{"@timestamp":"2024-10-10T08:18:31.6524631+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN790ETIM1IA:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790ETIM1IA"}}
{"@timestamp":"2024-10-10T08:18:31.6540889+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 204 null null 3.0755ms","fields":{"ElapsedMilliseconds":3.0755,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.0","Method":"OPTIONS","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1IA:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790ETIM1IA"}}
{"@timestamp":"2024-10-10T08:18:31.6694442+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1IB:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790ETIM1IB"}}
{"@timestamp":"2024-10-10T08:18:31.6718366+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN790ETIM1IB:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790ETIM1IB"}}
{"@timestamp":"2024-10-10T08:18:31.6743286+00:00","level":"Information","messageTemplate":"Executing endpoint '{EndpointName}'","message":"Executing endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN790ETIM1IB:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790ETIM1IB"}}
{"@timestamp":"2024-10-10T08:18:31.6754459+00:00","level":"Information","messageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","message":"Route matched with \"{action = \\\"Refresh\\\", controller = \\\"Token\\\"}\". Executing controller action with signature \"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()\" on controller \"Modsen.Server.Authentication.Api.Controllers.TokenController\" (\"Modsen.Server.Authentication.Api\").","fields":{"RouteData":"{action = \"Refresh\", controller = \"Token\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()","Controller":"Modsen.Server.Authentication.Api.Controllers.TokenController","AssemblyName":"Modsen.Server.Authentication.Api","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"bdba91aa-1e99-4c60-aea3-8e7a43c837bd","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1IB:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790ETIM1IB"}}
{"@timestamp":"2024-10-10T08:18:31.6809390+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"2\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT 1\"","fields":{"elapsed":"2","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"bdba91aa-1e99-4c60-aea3-8e7a43c837bd","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1IB:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790ETIM1IB"}}
{"@timestamp":"2024-10-10T08:18:31.6849352+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"3\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0\"","fields":{"elapsed":"3","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"bdba91aa-1e99-4c60-aea3-8e7a43c837bd","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1IB:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790ETIM1IB"}}
{"@timestamp":"2024-10-10T08:18:31.7012570+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"7\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"7","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"bdba91aa-1e99-4c60-aea3-8e7a43c837bd","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1IB:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790ETIM1IB"}}
{"@timestamp":"2024-10-10T08:18:31.7358758+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"5\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"5","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"bdba91aa-1e99-4c60-aea3-8e7a43c837bd","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1IB:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790ETIM1IB"}}
{"@timestamp":"2024-10-10T08:18:31.8098003+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"9\"ms) [Parameters=[\"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;\"","fields":{"elapsed":"9","parameters":"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"bdba91aa-1e99-4c60-aea3-8e7a43c837bd","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1IB:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790ETIM1IB"}}
{"@timestamp":"2024-10-10T08:18:31.8111150+00:00","level":"Information","messageTemplate":"User refresh token","message":"User refresh token","fields":{"SourceContext":"Modsen.Server.Authentication.Application.Features.ApplicationUser.CommandHandlers.RefreshTokenHandler","ActionId":"bdba91aa-1e99-4c60-aea3-8e7a43c837bd","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1IB:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790ETIM1IB"}}
{"@timestamp":"2024-10-10T08:18:31.8148014+00:00","level":"Information","messageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","message":"Executing \"OkObjectResult\", writing value of type '\"System.String\"'.","fields":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"bdba91aa-1e99-4c60-aea3-8e7a43c837bd","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790ETIM1IB:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790ETIM1IB"}}
{"@timestamp":"2024-10-10T08:18:31.8162309+00:00","level":"Information","messageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","message":"Executed action \"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\" in 139.5251ms","fields":{"ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","ElapsedMilliseconds":139.5251,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HN790ETIM1IB:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790ETIM1IB"}}
{"@timestamp":"2024-10-10T08:18:31.8175579+00:00","level":"Information","messageTemplate":"Executed endpoint '{EndpointName}'","message":"Executed endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN790ETIM1IB:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790ETIM1IB"}}
{"@timestamp":"2024-10-10T08:18:31.8186749+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 200 null \"text/plain; charset=utf-8\" 149.209ms","fields":{"ElapsedMilliseconds":149.209,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.0","Method":"GET","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790ETIM1IB:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790ETIM1IB"}}
{"@timestamp":"2024-10-10T08:23:37.0000887+00:00","level":"Warning","messageTemplate":"Using an in-memory repository. Keys will not be persisted to storage.","message":"Using an in-memory repository. Keys will not be persisted to storage.","fields":{"EventId":{"Id":50,"Name":"UsingInMemoryRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.Repositories.EphemeralXmlRepository"}}
{"@timestamp":"2024-10-10T08:23:37.0660502+00:00","level":"Warning","messageTemplate":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","message":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","fields":{"EventId":{"Id":59,"Name":"UsingEphemeralKeyRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"}}
{"@timestamp":"2024-10-10T08:23:37.1703032+00:00","level":"Information","messageTemplate":"Creating key {KeyId:B} with creation date {CreationDate:u}, activation date {ActivationDate:u}, and expiration date {ExpirationDate:u}.","message":"Creating key {32823a0d-cfa5-45c9-b4d8-bc60c408141b} with creation date 2024-10-10 08:23:37Z, activation date 2024-10-10 08:23:37Z, and expiration date 2025-01-08 08:23:37Z.","fields":{"KeyId":"32823a0d-cfa5-45c9-b4d8-bc60c408141b","CreationDate":"2024-10-10T08:23:37.1654370+00:00","ActivationDate":"2024-10-10T08:23:37.1620738+00:00","ExpirationDate":"2025-01-08T08:23:37.1620738+00:00","EventId":{"Id":58,"Name":"CreatingKey"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{32823a0d-cfa5-45c9-b4d8-bc60c408141b}"}],"CreationDate":[{"Format":"u","Rendering":"2024-10-10 08:23:37Z"}],"ActivationDate":[{"Format":"u","Rendering":"2024-10-10 08:23:37Z"}],"ExpirationDate":[{"Format":"u","Rendering":"2025-01-08 08:23:37Z"}]}}
{"@timestamp":"2024-10-10T08:23:37.1888443+00:00","level":"Warning","messageTemplate":"No XML encryptor configured. Key {KeyId:B} may be persisted to storage in unencrypted form.","message":"No XML encryptor configured. Key {32823a0d-cfa5-45c9-b4d8-bc60c408141b} may be persisted to storage in unencrypted form.","fields":{"KeyId":"32823a0d-cfa5-45c9-b4d8-bc60c408141b","EventId":{"Id":35,"Name":"NoXMLEncryptorConfiguredKeyMayBePersistedToStorageInUnencryptedForm"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{32823a0d-cfa5-45c9-b4d8-bc60c408141b}"}]}}
{"@timestamp":"2024-10-10T08:23:37.3402217+00:00","level":"Information","messageTemplate":"Bus started: {HostAddress}","message":"Bus started: loopback://localhost/","fields":{"HostAddress":"loopback://localhost/","SourceContext":"MassTransit"}}
{"@timestamp":"2024-10-10T08:23:37.6339363+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"http://[::]:8080\"","fields":{"address":"http://[::]:8080","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:23:37.6348537+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"https://[::]:8081\"","fields":{"address":"https://[::]:8081","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:23:37.6360818+00:00","level":"Information","messageTemplate":"Application started. Press Ctrl+C to shut down.","message":"Application started. Press Ctrl+C to shut down.","fields":{"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:23:37.6369802+00:00","level":"Information","messageTemplate":"Hosting environment: {EnvName}","message":"Hosting environment: \"Development\"","fields":{"EnvName":"Development","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:23:37.6378156+00:00","level":"Information","messageTemplate":"Content root path: {ContentRoot}","message":"Content root path: \"/app\"","fields":{"ContentRoot":"/app","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:23:57.0380588+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790JH8QAAL:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790JH8QAAL"}}
{"@timestamp":"2024-10-10T08:23:57.0747478+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN790JH8QAAL:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790JH8QAAL"}}
{"@timestamp":"2024-10-10T08:23:57.0892007+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 204 null null 52.5663ms","fields":{"ElapsedMilliseconds":52.5663,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.0","Method":"OPTIONS","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790JH8QAAL:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790JH8QAAL"}}
{"@timestamp":"2024-10-10T08:23:57.0972869+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790JH8QAAM:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790JH8QAAM"}}
{"@timestamp":"2024-10-10T08:23:57.1043461+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN790JH8QAAM:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790JH8QAAM"}}
{"@timestamp":"2024-10-10T08:23:57.2388317+00:00","level":"Information","messageTemplate":"Failed to validate the token.","message":"Failed to validate the token.","exceptions":[{"Depth":0,"ClassName":"Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException","Message":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:19:31', Current time (UTC): '10/10/2024 08:23:57'.","Source":"Microsoft.IdentityModel.Tokens","StackTraceString":"   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)","RemoteStackTraceString":null,"RemoteStackIndex":0,"HResult":-2146233088,"HelpURL":null}],"fields":{"EventId":{"Id":1,"Name":"TokenValidationFailed"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN790JH8QAAM:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790JH8QAAM"}}
{"@timestamp":"2024-10-10T08:23:57.2897321+00:00","level":"Information","messageTemplate":"{AuthenticationScheme} was not authenticated. Failure message: {FailureMessage}","message":"\"Bearer\" was not authenticated. Failure message: \"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:19:31', Current time (UTC): '10/10/2024 08:23:57'.\"","fields":{"AuthenticationScheme":"Bearer","FailureMessage":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:19:31', Current time (UTC): '10/10/2024 08:23:57'.","EventId":{"Id":7,"Name":"AuthenticationSchemeNotAuthenticatedWithFailure"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN790JH8QAAM:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790JH8QAAM"}}
{"@timestamp":"2024-10-10T08:23:57.2964372+00:00","level":"Information","messageTemplate":"Executing endpoint '{EndpointName}'","message":"Executing endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN790JH8QAAM:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790JH8QAAM"}}
{"@timestamp":"2024-10-10T08:23:57.3202655+00:00","level":"Information","messageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","message":"Route matched with \"{action = \\\"Refresh\\\", controller = \\\"Token\\\"}\". Executing controller action with signature \"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()\" on controller \"Modsen.Server.Authentication.Api.Controllers.TokenController\" (\"Modsen.Server.Authentication.Api\").","fields":{"RouteData":"{action = \"Refresh\", controller = \"Token\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()","Controller":"Modsen.Server.Authentication.Api.Controllers.TokenController","AssemblyName":"Modsen.Server.Authentication.Api","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"081d1171-d520-42b0-9538-de658e604f03","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790JH8QAAM:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790JH8QAAM"}}
{"@timestamp":"2024-10-10T08:23:58.5657379+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"21\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT 1\"","fields":{"elapsed":"21","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"081d1171-d520-42b0-9538-de658e604f03","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790JH8QAAM:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790JH8QAAM"}}
{"@timestamp":"2024-10-10T08:23:58.5906354+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"13\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0\"","fields":{"elapsed":"13","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"081d1171-d520-42b0-9538-de658e604f03","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790JH8QAAM:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790JH8QAAM"}}
{"@timestamp":"2024-10-10T08:23:58.9310577+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"42\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"42","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"081d1171-d520-42b0-9538-de658e604f03","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790JH8QAAM:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790JH8QAAM"}}
{"@timestamp":"2024-10-10T08:23:59.0611868+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"11\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"11","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"081d1171-d520-42b0-9538-de658e604f03","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790JH8QAAM:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790JH8QAAM"}}
{"@timestamp":"2024-10-10T08:23:59.2326407+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"9\"ms) [Parameters=[\"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;\"","fields":{"elapsed":"9","parameters":"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"081d1171-d520-42b0-9538-de658e604f03","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790JH8QAAM:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790JH8QAAM"}}
{"@timestamp":"2024-10-10T08:23:59.2486944+00:00","level":"Information","messageTemplate":"User refresh token","message":"User refresh token","fields":{"SourceContext":"Modsen.Server.Authentication.Application.Features.ApplicationUser.CommandHandlers.RefreshTokenHandler","ActionId":"081d1171-d520-42b0-9538-de658e604f03","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790JH8QAAM:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790JH8QAAM"}}
{"@timestamp":"2024-10-10T08:23:59.2729758+00:00","level":"Information","messageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","message":"Executing \"OkObjectResult\", writing value of type '\"System.String\"'.","fields":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"081d1171-d520-42b0-9538-de658e604f03","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790JH8QAAM:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790JH8QAAM"}}
{"@timestamp":"2024-10-10T08:23:59.2814458+00:00","level":"Information","messageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","message":"Executed action \"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\" in 1956.5631ms","fields":{"ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","ElapsedMilliseconds":1956.5631,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HN790JH8QAAM:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790JH8QAAM"}}
{"@timestamp":"2024-10-10T08:23:59.2829311+00:00","level":"Information","messageTemplate":"Executed endpoint '{EndpointName}'","message":"Executed endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN790JH8QAAM:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790JH8QAAM"}}
{"@timestamp":"2024-10-10T08:23:59.2961969+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 200 null \"text/plain; charset=utf-8\" 2198.9039ms","fields":{"ElapsedMilliseconds":2198.9039,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.0","Method":"GET","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790JH8QAAM:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790JH8QAAM"}}
{"@timestamp":"2024-10-10T08:25:25.5930784+00:00","level":"Warning","messageTemplate":"Using an in-memory repository. Keys will not be persisted to storage.","message":"Using an in-memory repository. Keys will not be persisted to storage.","fields":{"EventId":{"Id":50,"Name":"UsingInMemoryRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.Repositories.EphemeralXmlRepository"}}
{"@timestamp":"2024-10-10T08:25:25.6388395+00:00","level":"Warning","messageTemplate":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","message":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","fields":{"EventId":{"Id":59,"Name":"UsingEphemeralKeyRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"}}
{"@timestamp":"2024-10-10T08:25:25.7429829+00:00","level":"Information","messageTemplate":"Creating key {KeyId:B} with creation date {CreationDate:u}, activation date {ActivationDate:u}, and expiration date {ExpirationDate:u}.","message":"Creating key {a5bdb1f7-716a-4af0-9fa0-25545a8f559d} with creation date 2024-10-10 08:25:25Z, activation date 2024-10-10 08:25:25Z, and expiration date 2025-01-08 08:25:25Z.","fields":{"KeyId":"a5bdb1f7-716a-4af0-9fa0-25545a8f559d","CreationDate":"2024-10-10T08:25:25.7406247+00:00","ActivationDate":"2024-10-10T08:25:25.7377397+00:00","ExpirationDate":"2025-01-08T08:25:25.7377397+00:00","EventId":{"Id":58,"Name":"CreatingKey"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{a5bdb1f7-716a-4af0-9fa0-25545a8f559d}"}],"CreationDate":[{"Format":"u","Rendering":"2024-10-10 08:25:25Z"}],"ActivationDate":[{"Format":"u","Rendering":"2024-10-10 08:25:25Z"}],"ExpirationDate":[{"Format":"u","Rendering":"2025-01-08 08:25:25Z"}]}}
{"@timestamp":"2024-10-10T08:25:25.7634795+00:00","level":"Warning","messageTemplate":"No XML encryptor configured. Key {KeyId:B} may be persisted to storage in unencrypted form.","message":"No XML encryptor configured. Key {a5bdb1f7-716a-4af0-9fa0-25545a8f559d} may be persisted to storage in unencrypted form.","fields":{"KeyId":"a5bdb1f7-716a-4af0-9fa0-25545a8f559d","EventId":{"Id":35,"Name":"NoXMLEncryptorConfiguredKeyMayBePersistedToStorageInUnencryptedForm"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{a5bdb1f7-716a-4af0-9fa0-25545a8f559d}"}]}}
{"@timestamp":"2024-10-10T08:25:25.8795143+00:00","level":"Information","messageTemplate":"Bus started: {HostAddress}","message":"Bus started: loopback://localhost/","fields":{"HostAddress":"loopback://localhost/","SourceContext":"MassTransit"}}
{"@timestamp":"2024-10-10T08:25:26.1827978+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"http://[::]:8080\"","fields":{"address":"http://[::]:8080","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:25:26.1837896+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"https://[::]:8081\"","fields":{"address":"https://[::]:8081","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:25:26.1854655+00:00","level":"Information","messageTemplate":"Application started. Press Ctrl+C to shut down.","message":"Application started. Press Ctrl+C to shut down.","fields":{"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:25:26.1866113+00:00","level":"Information","messageTemplate":"Hosting environment: {EnvName}","message":"Hosting environment: \"Development\"","fields":{"EnvName":"Development","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:25:26.1876438+00:00","level":"Information","messageTemplate":"Content root path: {ContentRoot}","message":"Content root path: \"/app\"","fields":{"ContentRoot":"/app","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:25:40.9840234+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790KG81PJ6:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790KG81PJ6"}}
{"@timestamp":"2024-10-10T08:25:41.0292388+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN790KG81PJ6:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790KG81PJ6"}}
{"@timestamp":"2024-10-10T08:25:41.0449321+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 204 null null 63.9881ms","fields":{"ElapsedMilliseconds":63.9881,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.0","Method":"OPTIONS","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790KG81PJ6:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790KG81PJ6"}}
{"@timestamp":"2024-10-10T08:25:41.0528349+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790KG81PJ7:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790KG81PJ7"}}
{"@timestamp":"2024-10-10T08:25:41.0600096+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN790KG81PJ7:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790KG81PJ7"}}
{"@timestamp":"2024-10-10T08:25:41.2026657+00:00","level":"Information","messageTemplate":"Failed to validate the token.","message":"Failed to validate the token.","exceptions":[{"Depth":0,"ClassName":"Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException","Message":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:24:59', Current time (UTC): '10/10/2024 08:25:41'.","Source":"Microsoft.IdentityModel.Tokens","StackTraceString":"   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)","RemoteStackTraceString":null,"RemoteStackIndex":0,"HResult":-2146233088,"HelpURL":null}],"fields":{"EventId":{"Id":1,"Name":"TokenValidationFailed"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN790KG81PJ7:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790KG81PJ7"}}
{"@timestamp":"2024-10-10T08:25:41.2484139+00:00","level":"Information","messageTemplate":"{AuthenticationScheme} was not authenticated. Failure message: {FailureMessage}","message":"\"Bearer\" was not authenticated. Failure message: \"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:24:59', Current time (UTC): '10/10/2024 08:25:41'.\"","fields":{"AuthenticationScheme":"Bearer","FailureMessage":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:24:59', Current time (UTC): '10/10/2024 08:25:41'.","EventId":{"Id":7,"Name":"AuthenticationSchemeNotAuthenticatedWithFailure"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN790KG81PJ7:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790KG81PJ7"}}
{"@timestamp":"2024-10-10T08:25:41.2531148+00:00","level":"Information","messageTemplate":"Executing endpoint '{EndpointName}'","message":"Executing endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN790KG81PJ7:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790KG81PJ7"}}
{"@timestamp":"2024-10-10T08:25:41.2729973+00:00","level":"Information","messageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","message":"Route matched with \"{action = \\\"Refresh\\\", controller = \\\"Token\\\"}\". Executing controller action with signature \"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()\" on controller \"Modsen.Server.Authentication.Api.Controllers.TokenController\" (\"Modsen.Server.Authentication.Api\").","fields":{"RouteData":"{action = \"Refresh\", controller = \"Token\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()","Controller":"Modsen.Server.Authentication.Api.Controllers.TokenController","AssemblyName":"Modsen.Server.Authentication.Api","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"1994f13b-9cfd-4d3e-882f-ff3c27774dbd","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790KG81PJ7:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790KG81PJ7"}}
{"@timestamp":"2024-10-10T08:25:42.4054724+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"14\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT 1\"","fields":{"elapsed":"14","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"1994f13b-9cfd-4d3e-882f-ff3c27774dbd","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790KG81PJ7:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790KG81PJ7"}}
{"@timestamp":"2024-10-10T08:25:42.4281304+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"12\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0\"","fields":{"elapsed":"12","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"1994f13b-9cfd-4d3e-882f-ff3c27774dbd","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790KG81PJ7:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790KG81PJ7"}}
{"@timestamp":"2024-10-10T08:25:42.7590315+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"43\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"43","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"1994f13b-9cfd-4d3e-882f-ff3c27774dbd","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790KG81PJ7:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790KG81PJ7"}}
{"@timestamp":"2024-10-10T08:25:42.8698803+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"9\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"9","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"1994f13b-9cfd-4d3e-882f-ff3c27774dbd","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790KG81PJ7:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790KG81PJ7"}}
{"@timestamp":"2024-10-10T08:25:42.9818403+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"9\"ms) [Parameters=[\"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;\"","fields":{"elapsed":"9","parameters":"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"1994f13b-9cfd-4d3e-882f-ff3c27774dbd","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790KG81PJ7:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790KG81PJ7"}}
{"@timestamp":"2024-10-10T08:25:42.9945170+00:00","level":"Information","messageTemplate":"User refresh token","message":"User refresh token","fields":{"SourceContext":"Modsen.Server.Authentication.Application.Features.ApplicationUser.CommandHandlers.RefreshTokenHandler","ActionId":"1994f13b-9cfd-4d3e-882f-ff3c27774dbd","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790KG81PJ7:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790KG81PJ7"}}
{"@timestamp":"2024-10-10T08:25:43.0137376+00:00","level":"Information","messageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","message":"Executing \"OkObjectResult\", writing value of type '\"System.String\"'.","fields":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"1994f13b-9cfd-4d3e-882f-ff3c27774dbd","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790KG81PJ7:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790KG81PJ7"}}
{"@timestamp":"2024-10-10T08:25:43.0210346+00:00","level":"Information","messageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","message":"Executed action \"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\" in 1743.7586ms","fields":{"ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","ElapsedMilliseconds":1743.7586,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HN790KG81PJ7:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790KG81PJ7"}}
{"@timestamp":"2024-10-10T08:25:43.0225485+00:00","level":"Information","messageTemplate":"Executed endpoint '{EndpointName}'","message":"Executed endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN790KG81PJ7:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790KG81PJ7"}}
{"@timestamp":"2024-10-10T08:25:43.0325460+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 200 null \"text/plain; charset=utf-8\" 1979.5414ms","fields":{"ElapsedMilliseconds":1979.5414,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.0","Method":"GET","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790KG81PJ7:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790KG81PJ7"}}
{"@timestamp":"2024-10-10T08:26:34.0814727+00:00","level":"Warning","messageTemplate":"Using an in-memory repository. Keys will not be persisted to storage.","message":"Using an in-memory repository. Keys will not be persisted to storage.","fields":{"EventId":{"Id":50,"Name":"UsingInMemoryRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.Repositories.EphemeralXmlRepository"}}
{"@timestamp":"2024-10-10T08:26:34.1240548+00:00","level":"Warning","messageTemplate":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","message":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","fields":{"EventId":{"Id":59,"Name":"UsingEphemeralKeyRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"}}
{"@timestamp":"2024-10-10T08:26:34.2348655+00:00","level":"Information","messageTemplate":"Creating key {KeyId:B} with creation date {CreationDate:u}, activation date {ActivationDate:u}, and expiration date {ExpirationDate:u}.","message":"Creating key {68b1ce92-c7e1-4302-be69-b40617071f8e} with creation date 2024-10-10 08:26:34Z, activation date 2024-10-10 08:26:34Z, and expiration date 2025-01-08 08:26:34Z.","fields":{"KeyId":"68b1ce92-c7e1-4302-be69-b40617071f8e","CreationDate":"2024-10-10T08:26:34.2318490+00:00","ActivationDate":"2024-10-10T08:26:34.2289814+00:00","ExpirationDate":"2025-01-08T08:26:34.2289814+00:00","EventId":{"Id":58,"Name":"CreatingKey"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{68b1ce92-c7e1-4302-be69-b40617071f8e}"}],"CreationDate":[{"Format":"u","Rendering":"2024-10-10 08:26:34Z"}],"ActivationDate":[{"Format":"u","Rendering":"2024-10-10 08:26:34Z"}],"ExpirationDate":[{"Format":"u","Rendering":"2025-01-08 08:26:34Z"}]}}
{"@timestamp":"2024-10-10T08:26:34.2571219+00:00","level":"Warning","messageTemplate":"No XML encryptor configured. Key {KeyId:B} may be persisted to storage in unencrypted form.","message":"No XML encryptor configured. Key {68b1ce92-c7e1-4302-be69-b40617071f8e} may be persisted to storage in unencrypted form.","fields":{"KeyId":"68b1ce92-c7e1-4302-be69-b40617071f8e","EventId":{"Id":35,"Name":"NoXMLEncryptorConfiguredKeyMayBePersistedToStorageInUnencryptedForm"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{68b1ce92-c7e1-4302-be69-b40617071f8e}"}]}}
{"@timestamp":"2024-10-10T08:26:34.3694060+00:00","level":"Information","messageTemplate":"Bus started: {HostAddress}","message":"Bus started: loopback://localhost/","fields":{"HostAddress":"loopback://localhost/","SourceContext":"MassTransit"}}
{"@timestamp":"2024-10-10T08:26:34.6861364+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"http://[::]:8080\"","fields":{"address":"http://[::]:8080","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:26:34.6870282+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"https://[::]:8081\"","fields":{"address":"https://[::]:8081","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:26:34.6881781+00:00","level":"Information","messageTemplate":"Application started. Press Ctrl+C to shut down.","message":"Application started. Press Ctrl+C to shut down.","fields":{"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:26:34.6889300+00:00","level":"Information","messageTemplate":"Hosting environment: {EnvName}","message":"Hosting environment: \"Development\"","fields":{"EnvName":"Development","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:26:34.6897782+00:00","level":"Information","messageTemplate":"Content root path: {ContentRoot}","message":"Content root path: \"/app\"","fields":{"ContentRoot":"/app","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:26:46.5720016+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790L3PAHF9:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790L3PAHF9"}}
{"@timestamp":"2024-10-10T08:26:46.6418096+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN790L3PAHF9:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790L3PAHF9"}}
{"@timestamp":"2024-10-10T08:26:46.6620330+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 204 null null 91.8605ms","fields":{"ElapsedMilliseconds":91.8605,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.0","Method":"OPTIONS","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790L3PAHF9:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790L3PAHF9"}}
{"@timestamp":"2024-10-10T08:26:46.6745754+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790L3PAHFA:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790L3PAHFA"}}
{"@timestamp":"2024-10-10T08:26:46.6906181+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN790L3PAHFA:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790L3PAHFA"}}
{"@timestamp":"2024-10-10T08:26:46.8918225+00:00","level":"Information","messageTemplate":"Failed to validate the token.","message":"Failed to validate the token.","exceptions":[{"Depth":0,"ClassName":"Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException","Message":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:26:42', Current time (UTC): '10/10/2024 08:26:46'.","Source":"Microsoft.IdentityModel.Tokens","StackTraceString":"   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)","RemoteStackTraceString":null,"RemoteStackIndex":0,"HResult":-2146233088,"HelpURL":null}],"fields":{"EventId":{"Id":1,"Name":"TokenValidationFailed"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN790L3PAHFA:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790L3PAHFA"}}
{"@timestamp":"2024-10-10T08:26:46.9603572+00:00","level":"Information","messageTemplate":"{AuthenticationScheme} was not authenticated. Failure message: {FailureMessage}","message":"\"Bearer\" was not authenticated. Failure message: \"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:26:42', Current time (UTC): '10/10/2024 08:26:46'.\"","fields":{"AuthenticationScheme":"Bearer","FailureMessage":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:26:42', Current time (UTC): '10/10/2024 08:26:46'.","EventId":{"Id":7,"Name":"AuthenticationSchemeNotAuthenticatedWithFailure"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN790L3PAHFA:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790L3PAHFA"}}
{"@timestamp":"2024-10-10T08:26:46.9673008+00:00","level":"Information","messageTemplate":"Executing endpoint '{EndpointName}'","message":"Executing endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN790L3PAHFA:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790L3PAHFA"}}
{"@timestamp":"2024-10-10T08:26:46.9916374+00:00","level":"Information","messageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","message":"Route matched with \"{action = \\\"Refresh\\\", controller = \\\"Token\\\"}\". Executing controller action with signature \"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()\" on controller \"Modsen.Server.Authentication.Api.Controllers.TokenController\" (\"Modsen.Server.Authentication.Api\").","fields":{"RouteData":"{action = \"Refresh\", controller = \"Token\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()","Controller":"Modsen.Server.Authentication.Api.Controllers.TokenController","AssemblyName":"Modsen.Server.Authentication.Api","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"66c600e2-4579-40a1-98af-de5ca2a5fe6f","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790L3PAHFA:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790L3PAHFA"}}
{"@timestamp":"2024-10-10T08:26:48.3707765+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"19\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT 1\"","fields":{"elapsed":"19","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"66c600e2-4579-40a1-98af-de5ca2a5fe6f","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790L3PAHFA:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790L3PAHFA"}}
{"@timestamp":"2024-10-10T08:26:48.4023950+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"17\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0\"","fields":{"elapsed":"17","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"66c600e2-4579-40a1-98af-de5ca2a5fe6f","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790L3PAHFA:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790L3PAHFA"}}
{"@timestamp":"2024-10-10T08:26:48.8198151+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"84\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"84","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"66c600e2-4579-40a1-98af-de5ca2a5fe6f","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790L3PAHFA:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790L3PAHFA"}}
{"@timestamp":"2024-10-10T08:26:48.9784795+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"29\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"29","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"66c600e2-4579-40a1-98af-de5ca2a5fe6f","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790L3PAHFA:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790L3PAHFA"}}
{"@timestamp":"2024-10-10T08:26:49.1331774+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"11\"ms) [Parameters=[\"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;\"","fields":{"elapsed":"11","parameters":"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"66c600e2-4579-40a1-98af-de5ca2a5fe6f","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790L3PAHFA:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790L3PAHFA"}}
{"@timestamp":"2024-10-10T08:26:49.1478725+00:00","level":"Information","messageTemplate":"User refresh token","message":"User refresh token","fields":{"SourceContext":"Modsen.Server.Authentication.Application.Features.ApplicationUser.CommandHandlers.RefreshTokenHandler","ActionId":"66c600e2-4579-40a1-98af-de5ca2a5fe6f","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790L3PAHFA:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790L3PAHFA"}}
{"@timestamp":"2024-10-10T08:26:49.1685155+00:00","level":"Information","messageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","message":"Executing \"OkObjectResult\", writing value of type '\"System.String\"'.","fields":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"66c600e2-4579-40a1-98af-de5ca2a5fe6f","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790L3PAHFA:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790L3PAHFA"}}
{"@timestamp":"2024-10-10T08:26:49.1771238+00:00","level":"Information","messageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","message":"Executed action \"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\" in 2180.369ms","fields":{"ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","ElapsedMilliseconds":2180.369,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HN790L3PAHFA:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790L3PAHFA"}}
{"@timestamp":"2024-10-10T08:26:49.1786358+00:00","level":"Information","messageTemplate":"Executed endpoint '{EndpointName}'","message":"Executed endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN790L3PAHFA:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790L3PAHFA"}}
{"@timestamp":"2024-10-10T08:26:49.1882214+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 200 null \"text/plain; charset=utf-8\" 2513.6813ms","fields":{"ElapsedMilliseconds":2513.6813,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.0","Method":"GET","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790L3PAHFA:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790L3PAHFA"}}
{"@timestamp":"2024-10-10T08:30:31.2961915+00:00","level":"Warning","messageTemplate":"Using an in-memory repository. Keys will not be persisted to storage.","message":"Using an in-memory repository. Keys will not be persisted to storage.","fields":{"EventId":{"Id":50,"Name":"UsingInMemoryRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.Repositories.EphemeralXmlRepository"}}
{"@timestamp":"2024-10-10T08:30:31.3381252+00:00","level":"Warning","messageTemplate":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","message":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","fields":{"EventId":{"Id":59,"Name":"UsingEphemeralKeyRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"}}
{"@timestamp":"2024-10-10T08:30:31.4362985+00:00","level":"Information","messageTemplate":"Creating key {KeyId:B} with creation date {CreationDate:u}, activation date {ActivationDate:u}, and expiration date {ExpirationDate:u}.","message":"Creating key {7a42c088-ccbd-4509-a31b-b4ba5397f65f} with creation date 2024-10-10 08:30:31Z, activation date 2024-10-10 08:30:31Z, and expiration date 2025-01-08 08:30:31Z.","fields":{"KeyId":"7a42c088-ccbd-4509-a31b-b4ba5397f65f","CreationDate":"2024-10-10T08:30:31.4338535+00:00","ActivationDate":"2024-10-10T08:30:31.4310534+00:00","ExpirationDate":"2025-01-08T08:30:31.4310534+00:00","EventId":{"Id":58,"Name":"CreatingKey"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{7a42c088-ccbd-4509-a31b-b4ba5397f65f}"}],"CreationDate":[{"Format":"u","Rendering":"2024-10-10 08:30:31Z"}],"ActivationDate":[{"Format":"u","Rendering":"2024-10-10 08:30:31Z"}],"ExpirationDate":[{"Format":"u","Rendering":"2025-01-08 08:30:31Z"}]}}
{"@timestamp":"2024-10-10T08:30:31.4517020+00:00","level":"Warning","messageTemplate":"No XML encryptor configured. Key {KeyId:B} may be persisted to storage in unencrypted form.","message":"No XML encryptor configured. Key {7a42c088-ccbd-4509-a31b-b4ba5397f65f} may be persisted to storage in unencrypted form.","fields":{"KeyId":"7a42c088-ccbd-4509-a31b-b4ba5397f65f","EventId":{"Id":35,"Name":"NoXMLEncryptorConfiguredKeyMayBePersistedToStorageInUnencryptedForm"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{7a42c088-ccbd-4509-a31b-b4ba5397f65f}"}]}}
{"@timestamp":"2024-10-10T08:30:31.5814777+00:00","level":"Information","messageTemplate":"Bus started: {HostAddress}","message":"Bus started: loopback://localhost/","fields":{"HostAddress":"loopback://localhost/","SourceContext":"MassTransit"}}
{"@timestamp":"2024-10-10T08:30:31.9298236+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"http://[::]:8080\"","fields":{"address":"http://[::]:8080","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:30:31.9308527+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"https://[::]:8081\"","fields":{"address":"https://[::]:8081","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:30:31.9323041+00:00","level":"Information","messageTemplate":"Application started. Press Ctrl+C to shut down.","message":"Application started. Press Ctrl+C to shut down.","fields":{"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:30:31.9333820+00:00","level":"Information","messageTemplate":"Hosting environment: {EnvName}","message":"Hosting environment: \"Development\"","fields":{"EnvName":"Development","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:30:31.9345714+00:00","level":"Information","messageTemplate":"Content root path: {ContentRoot}","message":"Content root path: \"/app\"","fields":{"ContentRoot":"/app","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:30:42.9209344+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790NA7FP1H:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790NA7FP1H"}}
{"@timestamp":"2024-10-10T08:30:42.9603495+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN790NA7FP1H:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790NA7FP1H"}}
{"@timestamp":"2024-10-10T08:30:42.9750341+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 204 null null 56.4836ms","fields":{"ElapsedMilliseconds":56.4836,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.0","Method":"OPTIONS","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790NA7FP1H:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790NA7FP1H"}}
{"@timestamp":"2024-10-10T08:30:42.9830491+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790NA7FP1I:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790NA7FP1I"}}
{"@timestamp":"2024-10-10T08:30:42.9902826+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN790NA7FP1I:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790NA7FP1I"}}
{"@timestamp":"2024-10-10T08:30:43.1298750+00:00","level":"Information","messageTemplate":"Failed to validate the token.","message":"Failed to validate the token.","exceptions":[{"Depth":0,"ClassName":"Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException","Message":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:27:49', Current time (UTC): '10/10/2024 08:30:43'.","Source":"Microsoft.IdentityModel.Tokens","StackTraceString":"   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)","RemoteStackTraceString":null,"RemoteStackIndex":0,"HResult":-2146233088,"HelpURL":null}],"fields":{"EventId":{"Id":1,"Name":"TokenValidationFailed"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN790NA7FP1I:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790NA7FP1I"}}
{"@timestamp":"2024-10-10T08:30:43.1826237+00:00","level":"Information","messageTemplate":"{AuthenticationScheme} was not authenticated. Failure message: {FailureMessage}","message":"\"Bearer\" was not authenticated. Failure message: \"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:27:49', Current time (UTC): '10/10/2024 08:30:43'.\"","fields":{"AuthenticationScheme":"Bearer","FailureMessage":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:27:49', Current time (UTC): '10/10/2024 08:30:43'.","EventId":{"Id":7,"Name":"AuthenticationSchemeNotAuthenticatedWithFailure"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN790NA7FP1I:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790NA7FP1I"}}
{"@timestamp":"2024-10-10T08:30:43.1874062+00:00","level":"Information","messageTemplate":"Executing endpoint '{EndpointName}'","message":"Executing endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN790NA7FP1I:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790NA7FP1I"}}
{"@timestamp":"2024-10-10T08:30:43.2108266+00:00","level":"Information","messageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","message":"Route matched with \"{action = \\\"Refresh\\\", controller = \\\"Token\\\"}\". Executing controller action with signature \"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()\" on controller \"Modsen.Server.Authentication.Api.Controllers.TokenController\" (\"Modsen.Server.Authentication.Api\").","fields":{"RouteData":"{action = \"Refresh\", controller = \"Token\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()","Controller":"Modsen.Server.Authentication.Api.Controllers.TokenController","AssemblyName":"Modsen.Server.Authentication.Api","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"f1382cc4-082f-4e57-bf77-133c4671b8af","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790NA7FP1I:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790NA7FP1I"}}
{"@timestamp":"2024-10-10T08:30:44.3563409+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"16\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT 1\"","fields":{"elapsed":"16","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"f1382cc4-082f-4e57-bf77-133c4671b8af","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790NA7FP1I:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790NA7FP1I"}}
{"@timestamp":"2024-10-10T08:30:44.3772946+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"11\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0\"","fields":{"elapsed":"11","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"f1382cc4-082f-4e57-bf77-133c4671b8af","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790NA7FP1I:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790NA7FP1I"}}
{"@timestamp":"2024-10-10T08:30:44.7103447+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"40\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"40","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"f1382cc4-082f-4e57-bf77-133c4671b8af","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790NA7FP1I:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790NA7FP1I"}}
{"@timestamp":"2024-10-10T08:30:44.8059869+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"8\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"8","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"f1382cc4-082f-4e57-bf77-133c4671b8af","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790NA7FP1I:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790NA7FP1I"}}
{"@timestamp":"2024-10-10T08:30:44.9465172+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"53\"ms) [Parameters=[\"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;\"","fields":{"elapsed":"53","parameters":"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"f1382cc4-082f-4e57-bf77-133c4671b8af","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790NA7FP1I:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790NA7FP1I"}}
{"@timestamp":"2024-10-10T08:30:44.9672024+00:00","level":"Information","messageTemplate":"User refresh token","message":"User refresh token","fields":{"SourceContext":"Modsen.Server.Authentication.Application.Features.ApplicationUser.CommandHandlers.RefreshTokenHandler","ActionId":"f1382cc4-082f-4e57-bf77-133c4671b8af","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790NA7FP1I:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790NA7FP1I"}}
{"@timestamp":"2024-10-10T08:30:45.0010293+00:00","level":"Information","messageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","message":"Executing \"OkObjectResult\", writing value of type '\"System.String\"'.","fields":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"f1382cc4-082f-4e57-bf77-133c4671b8af","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790NA7FP1I:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790NA7FP1I"}}
{"@timestamp":"2024-10-10T08:30:45.0142879+00:00","level":"Information","messageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","message":"Executed action \"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\" in 1796.0906ms","fields":{"ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","ElapsedMilliseconds":1796.0906,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HN790NA7FP1I:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790NA7FP1I"}}
{"@timestamp":"2024-10-10T08:30:45.0168308+00:00","level":"Information","messageTemplate":"Executed endpoint '{EndpointName}'","message":"Executed endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN790NA7FP1I:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790NA7FP1I"}}
{"@timestamp":"2024-10-10T08:30:45.0291861+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 200 null \"text/plain; charset=utf-8\" 2046.0855ms","fields":{"ElapsedMilliseconds":2046.0855,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.0","Method":"GET","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790NA7FP1I:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790NA7FP1I"}}
{"@timestamp":"2024-10-10T08:34:04.5984747+00:00","level":"Warning","messageTemplate":"Using an in-memory repository. Keys will not be persisted to storage.","message":"Using an in-memory repository. Keys will not be persisted to storage.","fields":{"EventId":{"Id":50,"Name":"UsingInMemoryRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.Repositories.EphemeralXmlRepository"}}
{"@timestamp":"2024-10-10T08:34:04.6425144+00:00","level":"Warning","messageTemplate":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","message":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","fields":{"EventId":{"Id":59,"Name":"UsingEphemeralKeyRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"}}
{"@timestamp":"2024-10-10T08:34:04.7439262+00:00","level":"Information","messageTemplate":"Creating key {KeyId:B} with creation date {CreationDate:u}, activation date {ActivationDate:u}, and expiration date {ExpirationDate:u}.","message":"Creating key {7a80147f-7ac7-4334-aaca-bb0f252d1a7c} with creation date 2024-10-10 08:34:04Z, activation date 2024-10-10 08:34:04Z, and expiration date 2025-01-08 08:34:04Z.","fields":{"KeyId":"7a80147f-7ac7-4334-aaca-bb0f252d1a7c","CreationDate":"2024-10-10T08:34:04.7412400+00:00","ActivationDate":"2024-10-10T08:34:04.7387403+00:00","ExpirationDate":"2025-01-08T08:34:04.7387403+00:00","EventId":{"Id":58,"Name":"CreatingKey"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{7a80147f-7ac7-4334-aaca-bb0f252d1a7c}"}],"CreationDate":[{"Format":"u","Rendering":"2024-10-10 08:34:04Z"}],"ActivationDate":[{"Format":"u","Rendering":"2024-10-10 08:34:04Z"}],"ExpirationDate":[{"Format":"u","Rendering":"2025-01-08 08:34:04Z"}]}}
{"@timestamp":"2024-10-10T08:34:04.7618594+00:00","level":"Warning","messageTemplate":"No XML encryptor configured. Key {KeyId:B} may be persisted to storage in unencrypted form.","message":"No XML encryptor configured. Key {7a80147f-7ac7-4334-aaca-bb0f252d1a7c} may be persisted to storage in unencrypted form.","fields":{"KeyId":"7a80147f-7ac7-4334-aaca-bb0f252d1a7c","EventId":{"Id":35,"Name":"NoXMLEncryptorConfiguredKeyMayBePersistedToStorageInUnencryptedForm"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{7a80147f-7ac7-4334-aaca-bb0f252d1a7c}"}]}}
{"@timestamp":"2024-10-10T08:34:04.8658242+00:00","level":"Information","messageTemplate":"Bus started: {HostAddress}","message":"Bus started: loopback://localhost/","fields":{"HostAddress":"loopback://localhost/","SourceContext":"MassTransit"}}
{"@timestamp":"2024-10-10T08:34:05.1705750+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"http://[::]:8080\"","fields":{"address":"http://[::]:8080","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:34:05.1716331+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"https://[::]:8081\"","fields":{"address":"https://[::]:8081","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:34:05.1726852+00:00","level":"Information","messageTemplate":"Application started. Press Ctrl+C to shut down.","message":"Application started. Press Ctrl+C to shut down.","fields":{"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:34:05.1734733+00:00","level":"Information","messageTemplate":"Hosting environment: {EnvName}","message":"Hosting environment: \"Development\"","fields":{"EnvName":"Development","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:34:05.1747537+00:00","level":"Information","messageTemplate":"Content root path: {ContentRoot}","message":"Content root path: \"/app\"","fields":{"ContentRoot":"/app","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:34:19.7641076+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790PARDQBL:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790PARDQBL"}}
{"@timestamp":"2024-10-10T08:34:19.8016132+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN790PARDQBL:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790PARDQBL"}}
{"@timestamp":"2024-10-10T08:34:19.8166746+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 204 null null 53.9424ms","fields":{"ElapsedMilliseconds":53.9424,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.0","Method":"OPTIONS","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790PARDQBL:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790PARDQBL"}}
{"@timestamp":"2024-10-10T08:34:19.8257680+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790PARDQBM:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790PARDQBM"}}
{"@timestamp":"2024-10-10T08:34:19.8322237+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN790PARDQBM:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790PARDQBM"}}
{"@timestamp":"2024-10-10T08:34:19.9706839+00:00","level":"Information","messageTemplate":"Failed to validate the token.","message":"Failed to validate the token.","exceptions":[{"Depth":0,"ClassName":"Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException","Message":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:31:44', Current time (UTC): '10/10/2024 08:34:19'.","Source":"Microsoft.IdentityModel.Tokens","StackTraceString":"   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)","RemoteStackTraceString":null,"RemoteStackIndex":0,"HResult":-2146233088,"HelpURL":null}],"fields":{"EventId":{"Id":1,"Name":"TokenValidationFailed"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN790PARDQBM:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790PARDQBM"}}
{"@timestamp":"2024-10-10T08:34:20.0198567+00:00","level":"Information","messageTemplate":"{AuthenticationScheme} was not authenticated. Failure message: {FailureMessage}","message":"\"Bearer\" was not authenticated. Failure message: \"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:31:44', Current time (UTC): '10/10/2024 08:34:19'.\"","fields":{"AuthenticationScheme":"Bearer","FailureMessage":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:31:44', Current time (UTC): '10/10/2024 08:34:19'.","EventId":{"Id":7,"Name":"AuthenticationSchemeNotAuthenticatedWithFailure"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN790PARDQBM:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790PARDQBM"}}
{"@timestamp":"2024-10-10T08:34:20.0239600+00:00","level":"Information","messageTemplate":"Executing endpoint '{EndpointName}'","message":"Executing endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN790PARDQBM:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790PARDQBM"}}
{"@timestamp":"2024-10-10T08:34:20.0445514+00:00","level":"Information","messageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","message":"Route matched with \"{action = \\\"Refresh\\\", controller = \\\"Token\\\"}\". Executing controller action with signature \"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()\" on controller \"Modsen.Server.Authentication.Api.Controllers.TokenController\" (\"Modsen.Server.Authentication.Api\").","fields":{"RouteData":"{action = \"Refresh\", controller = \"Token\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()","Controller":"Modsen.Server.Authentication.Api.Controllers.TokenController","AssemblyName":"Modsen.Server.Authentication.Api","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"16694048-669e-44a4-a23d-f6130d684818","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790PARDQBM:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790PARDQBM"}}
{"@timestamp":"2024-10-10T08:34:21.2484015+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"15\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT 1\"","fields":{"elapsed":"15","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"16694048-669e-44a4-a23d-f6130d684818","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790PARDQBM:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790PARDQBM"}}
{"@timestamp":"2024-10-10T08:34:21.2686742+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"11\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0\"","fields":{"elapsed":"11","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"16694048-669e-44a4-a23d-f6130d684818","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790PARDQBM:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790PARDQBM"}}
{"@timestamp":"2024-10-10T08:34:21.6041811+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"47\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"47","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"16694048-669e-44a4-a23d-f6130d684818","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790PARDQBM:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790PARDQBM"}}
{"@timestamp":"2024-10-10T08:34:21.7677827+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"9\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"9","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"16694048-669e-44a4-a23d-f6130d684818","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790PARDQBM:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790PARDQBM"}}
{"@timestamp":"2024-10-10T08:34:21.8846829+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"9\"ms) [Parameters=[\"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;\"","fields":{"elapsed":"9","parameters":"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"16694048-669e-44a4-a23d-f6130d684818","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790PARDQBM:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790PARDQBM"}}
{"@timestamp":"2024-10-10T08:34:21.8969914+00:00","level":"Information","messageTemplate":"User refresh token","message":"User refresh token","fields":{"SourceContext":"Modsen.Server.Authentication.Application.Features.ApplicationUser.CommandHandlers.RefreshTokenHandler","ActionId":"16694048-669e-44a4-a23d-f6130d684818","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790PARDQBM:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790PARDQBM"}}
{"@timestamp":"2024-10-10T08:34:21.9179278+00:00","level":"Information","messageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","message":"Executing \"OkObjectResult\", writing value of type '\"System.String\"'.","fields":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"16694048-669e-44a4-a23d-f6130d684818","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790PARDQBM:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790PARDQBM"}}
{"@timestamp":"2024-10-10T08:34:21.9259670+00:00","level":"Information","messageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","message":"Executed action \"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\" in 1877.1752ms","fields":{"ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","ElapsedMilliseconds":1877.1752,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HN790PARDQBM:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790PARDQBM"}}
{"@timestamp":"2024-10-10T08:34:21.9278422+00:00","level":"Information","messageTemplate":"Executed endpoint '{EndpointName}'","message":"Executed endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN790PARDQBM:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790PARDQBM"}}
{"@timestamp":"2024-10-10T08:34:21.9380716+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 200 null \"text/plain; charset=utf-8\" 2112.199ms","fields":{"ElapsedMilliseconds":2112.199,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.0","Method":"GET","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790PARDQBM:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790PARDQBM"}}
{"@timestamp":"2024-10-10T08:34:23.2672110+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790PARDQBN:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790PARDQBN"}}
{"@timestamp":"2024-10-10T08:34:23.2732252+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN790PARDQBN:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790PARDQBN"}}
{"@timestamp":"2024-10-10T08:34:23.2915027+00:00","level":"Information","messageTemplate":"Executing endpoint '{EndpointName}'","message":"Executing endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN790PARDQBN:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790PARDQBN"}}
{"@timestamp":"2024-10-10T08:34:23.2932999+00:00","level":"Information","messageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","message":"Route matched with \"{action = \\\"Refresh\\\", controller = \\\"Token\\\"}\". Executing controller action with signature \"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()\" on controller \"Modsen.Server.Authentication.Api.Controllers.TokenController\" (\"Modsen.Server.Authentication.Api\").","fields":{"RouteData":"{action = \"Refresh\", controller = \"Token\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()","Controller":"Modsen.Server.Authentication.Api.Controllers.TokenController","AssemblyName":"Modsen.Server.Authentication.Api","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"16694048-669e-44a4-a23d-f6130d684818","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790PARDQBN:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790PARDQBN"}}
{"@timestamp":"2024-10-10T08:34:23.3283404+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"1\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT 1\"","fields":{"elapsed":"1","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"16694048-669e-44a4-a23d-f6130d684818","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790PARDQBN:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790PARDQBN"}}
{"@timestamp":"2024-10-10T08:34:23.3316489+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"2\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0\"","fields":{"elapsed":"2","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"16694048-669e-44a4-a23d-f6130d684818","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790PARDQBN:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790PARDQBN"}}
{"@timestamp":"2024-10-10T08:34:23.4090229+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"68\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"68","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"16694048-669e-44a4-a23d-f6130d684818","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790PARDQBN:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790PARDQBN"}}
{"@timestamp":"2024-10-10T08:34:23.5620871+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"23\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"23","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"16694048-669e-44a4-a23d-f6130d684818","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790PARDQBN:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790PARDQBN"}}
{"@timestamp":"2024-10-10T08:34:23.5774392+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"8\"ms) [Parameters=[\"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;\"","fields":{"elapsed":"8","parameters":"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"16694048-669e-44a4-a23d-f6130d684818","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790PARDQBN:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790PARDQBN"}}
{"@timestamp":"2024-10-10T08:34:23.5793829+00:00","level":"Information","messageTemplate":"User refresh token","message":"User refresh token","fields":{"SourceContext":"Modsen.Server.Authentication.Application.Features.ApplicationUser.CommandHandlers.RefreshTokenHandler","ActionId":"16694048-669e-44a4-a23d-f6130d684818","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790PARDQBN:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790PARDQBN"}}
{"@timestamp":"2024-10-10T08:34:23.5816928+00:00","level":"Information","messageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","message":"Executing \"OkObjectResult\", writing value of type '\"System.String\"'.","fields":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"16694048-669e-44a4-a23d-f6130d684818","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790PARDQBN:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790PARDQBN"}}
{"@timestamp":"2024-10-10T08:34:23.5833404+00:00","level":"Information","messageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","message":"Executed action \"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\" in 286.1156ms","fields":{"ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","ElapsedMilliseconds":286.1156,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HN790PARDQBN:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790PARDQBN"}}
{"@timestamp":"2024-10-10T08:34:23.5844461+00:00","level":"Information","messageTemplate":"Executed endpoint '{EndpointName}'","message":"Executed endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN790PARDQBN:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790PARDQBN"}}
{"@timestamp":"2024-10-10T08:34:23.5866383+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 200 null \"text/plain; charset=utf-8\" 319.5555ms","fields":{"ElapsedMilliseconds":319.5555,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.0","Method":"GET","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790PARDQBN:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790PARDQBN"}}
{"@timestamp":"2024-10-10T08:38:07.4178773+00:00","level":"Warning","messageTemplate":"Using an in-memory repository. Keys will not be persisted to storage.","message":"Using an in-memory repository. Keys will not be persisted to storage.","fields":{"EventId":{"Id":50,"Name":"UsingInMemoryRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.Repositories.EphemeralXmlRepository"}}
{"@timestamp":"2024-10-10T08:38:07.4687881+00:00","level":"Warning","messageTemplate":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","message":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","fields":{"EventId":{"Id":59,"Name":"UsingEphemeralKeyRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"}}
{"@timestamp":"2024-10-10T08:38:07.5913360+00:00","level":"Information","messageTemplate":"Creating key {KeyId:B} with creation date {CreationDate:u}, activation date {ActivationDate:u}, and expiration date {ExpirationDate:u}.","message":"Creating key {c4b35179-1659-4935-a982-ed200cc75854} with creation date 2024-10-10 08:38:07Z, activation date 2024-10-10 08:38:07Z, and expiration date 2025-01-08 08:38:07Z.","fields":{"KeyId":"c4b35179-1659-4935-a982-ed200cc75854","CreationDate":"2024-10-10T08:38:07.5873573+00:00","ActivationDate":"2024-10-10T08:38:07.5825990+00:00","ExpirationDate":"2025-01-08T08:38:07.5825990+00:00","EventId":{"Id":58,"Name":"CreatingKey"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{c4b35179-1659-4935-a982-ed200cc75854}"}],"CreationDate":[{"Format":"u","Rendering":"2024-10-10 08:38:07Z"}],"ActivationDate":[{"Format":"u","Rendering":"2024-10-10 08:38:07Z"}],"ExpirationDate":[{"Format":"u","Rendering":"2025-01-08 08:38:07Z"}]}}
{"@timestamp":"2024-10-10T08:38:07.6099566+00:00","level":"Warning","messageTemplate":"No XML encryptor configured. Key {KeyId:B} may be persisted to storage in unencrypted form.","message":"No XML encryptor configured. Key {c4b35179-1659-4935-a982-ed200cc75854} may be persisted to storage in unencrypted form.","fields":{"KeyId":"c4b35179-1659-4935-a982-ed200cc75854","EventId":{"Id":35,"Name":"NoXMLEncryptorConfiguredKeyMayBePersistedToStorageInUnencryptedForm"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{c4b35179-1659-4935-a982-ed200cc75854}"}]}}
{"@timestamp":"2024-10-10T08:38:07.7236934+00:00","level":"Information","messageTemplate":"Bus started: {HostAddress}","message":"Bus started: loopback://localhost/","fields":{"HostAddress":"loopback://localhost/","SourceContext":"MassTransit"}}
{"@timestamp":"2024-10-10T08:38:08.0391590+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"http://[::]:8080\"","fields":{"address":"http://[::]:8080","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:38:08.0401323+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"https://[::]:8081\"","fields":{"address":"https://[::]:8081","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:38:08.0413438+00:00","level":"Information","messageTemplate":"Application started. Press Ctrl+C to shut down.","message":"Application started. Press Ctrl+C to shut down.","fields":{"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:38:08.0422456+00:00","level":"Information","messageTemplate":"Hosting environment: {EnvName}","message":"Hosting environment: \"Development\"","fields":{"EnvName":"Development","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:38:08.0433422+00:00","level":"Information","messageTemplate":"Content root path: {ContentRoot}","message":"Content root path: \"/app\"","fields":{"ContentRoot":"/app","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:38:19.1596323+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790RI6CBJG:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790RI6CBJG"}}
{"@timestamp":"2024-10-10T08:38:19.2099783+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN790RI6CBJG:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790RI6CBJG"}}
{"@timestamp":"2024-10-10T08:38:19.2271784+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 204 null null 69.2734ms","fields":{"ElapsedMilliseconds":69.2734,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.0","Method":"OPTIONS","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790RI6CBJG:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790RI6CBJG"}}
{"@timestamp":"2024-10-10T08:38:19.2780134+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790RI6CBJH:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790RI6CBJH"}}
{"@timestamp":"2024-10-10T08:38:19.2868819+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN790RI6CBJH:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790RI6CBJH"}}
{"@timestamp":"2024-10-10T08:38:19.4257763+00:00","level":"Information","messageTemplate":"Failed to validate the token.","message":"Failed to validate the token.","exceptions":[{"Depth":0,"ClassName":"Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException","Message":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:35:23', Current time (UTC): '10/10/2024 08:38:19'.","Source":"Microsoft.IdentityModel.Tokens","StackTraceString":"   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)","RemoteStackTraceString":null,"RemoteStackIndex":0,"HResult":-2146233088,"HelpURL":null}],"fields":{"EventId":{"Id":1,"Name":"TokenValidationFailed"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN790RI6CBJH:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790RI6CBJH"}}
{"@timestamp":"2024-10-10T08:38:19.4758470+00:00","level":"Information","messageTemplate":"{AuthenticationScheme} was not authenticated. Failure message: {FailureMessage}","message":"\"Bearer\" was not authenticated. Failure message: \"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:35:23', Current time (UTC): '10/10/2024 08:38:19'.\"","fields":{"AuthenticationScheme":"Bearer","FailureMessage":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:35:23', Current time (UTC): '10/10/2024 08:38:19'.","EventId":{"Id":7,"Name":"AuthenticationSchemeNotAuthenticatedWithFailure"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN790RI6CBJH:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790RI6CBJH"}}
{"@timestamp":"2024-10-10T08:38:19.4799627+00:00","level":"Information","messageTemplate":"Executing endpoint '{EndpointName}'","message":"Executing endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN790RI6CBJH:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790RI6CBJH"}}
{"@timestamp":"2024-10-10T08:38:19.4998985+00:00","level":"Information","messageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","message":"Route matched with \"{action = \\\"Refresh\\\", controller = \\\"Token\\\"}\". Executing controller action with signature \"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()\" on controller \"Modsen.Server.Authentication.Api.Controllers.TokenController\" (\"Modsen.Server.Authentication.Api\").","fields":{"RouteData":"{action = \"Refresh\", controller = \"Token\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()","Controller":"Modsen.Server.Authentication.Api.Controllers.TokenController","AssemblyName":"Modsen.Server.Authentication.Api","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"f904e5ff-4dd8-4378-b2b1-1d92bbbff15a","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790RI6CBJH:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790RI6CBJH"}}
{"@timestamp":"2024-10-10T08:38:20.7908235+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"20\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT 1\"","fields":{"elapsed":"20","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"f904e5ff-4dd8-4378-b2b1-1d92bbbff15a","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790RI6CBJH:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790RI6CBJH"}}
{"@timestamp":"2024-10-10T08:38:20.8318995+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"21\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0\"","fields":{"elapsed":"21","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"f904e5ff-4dd8-4378-b2b1-1d92bbbff15a","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790RI6CBJH:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790RI6CBJH"}}
{"@timestamp":"2024-10-10T08:38:21.2298761+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"67\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"67","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"f904e5ff-4dd8-4378-b2b1-1d92bbbff15a","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790RI6CBJH:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790RI6CBJH"}}
{"@timestamp":"2024-10-10T08:38:21.4472551+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"8\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"8","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"f904e5ff-4dd8-4378-b2b1-1d92bbbff15a","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790RI6CBJH:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790RI6CBJH"}}
{"@timestamp":"2024-10-10T08:38:21.6371481+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"67\"ms) [Parameters=[\"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;\"","fields":{"elapsed":"67","parameters":"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"f904e5ff-4dd8-4378-b2b1-1d92bbbff15a","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790RI6CBJH:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790RI6CBJH"}}
{"@timestamp":"2024-10-10T08:38:21.6511258+00:00","level":"Information","messageTemplate":"User refresh token","message":"User refresh token","fields":{"SourceContext":"Modsen.Server.Authentication.Application.Features.ApplicationUser.CommandHandlers.RefreshTokenHandler","ActionId":"f904e5ff-4dd8-4378-b2b1-1d92bbbff15a","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790RI6CBJH:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790RI6CBJH"}}
{"@timestamp":"2024-10-10T08:38:21.6703116+00:00","level":"Information","messageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","message":"Executing \"OkObjectResult\", writing value of type '\"System.String\"'.","fields":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"f904e5ff-4dd8-4378-b2b1-1d92bbbff15a","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790RI6CBJH:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790RI6CBJH"}}
{"@timestamp":"2024-10-10T08:38:21.6776030+00:00","level":"Information","messageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","message":"Executed action \"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\" in 2172.9775ms","fields":{"ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","ElapsedMilliseconds":2172.9775,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HN790RI6CBJH:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790RI6CBJH"}}
{"@timestamp":"2024-10-10T08:38:21.6796285+00:00","level":"Information","messageTemplate":"Executed endpoint '{EndpointName}'","message":"Executed endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN790RI6CBJH:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790RI6CBJH"}}
{"@timestamp":"2024-10-10T08:38:21.6878742+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 200 null \"text/plain; charset=utf-8\" 2409.8394ms","fields":{"ElapsedMilliseconds":2409.8394,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.0","Method":"GET","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790RI6CBJH:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790RI6CBJH"}}
{"@timestamp":"2024-10-10T08:40:40.0541271+00:00","level":"Warning","messageTemplate":"Using an in-memory repository. Keys will not be persisted to storage.","message":"Using an in-memory repository. Keys will not be persisted to storage.","fields":{"EventId":{"Id":50,"Name":"UsingInMemoryRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.Repositories.EphemeralXmlRepository"}}
{"@timestamp":"2024-10-10T08:40:40.0966728+00:00","level":"Warning","messageTemplate":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","message":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","fields":{"EventId":{"Id":59,"Name":"UsingEphemeralKeyRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"}}
{"@timestamp":"2024-10-10T08:40:40.1915285+00:00","level":"Information","messageTemplate":"Creating key {KeyId:B} with creation date {CreationDate:u}, activation date {ActivationDate:u}, and expiration date {ExpirationDate:u}.","message":"Creating key {5a8de7d3-01f8-45fb-966f-466fdcd8ec5b} with creation date 2024-10-10 08:40:40Z, activation date 2024-10-10 08:40:40Z, and expiration date 2025-01-08 08:40:40Z.","fields":{"KeyId":"5a8de7d3-01f8-45fb-966f-466fdcd8ec5b","CreationDate":"2024-10-10T08:40:40.1890670+00:00","ActivationDate":"2024-10-10T08:40:40.1861754+00:00","ExpirationDate":"2025-01-08T08:40:40.1861754+00:00","EventId":{"Id":58,"Name":"CreatingKey"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{5a8de7d3-01f8-45fb-966f-466fdcd8ec5b}"}],"CreationDate":[{"Format":"u","Rendering":"2024-10-10 08:40:40Z"}],"ActivationDate":[{"Format":"u","Rendering":"2024-10-10 08:40:40Z"}],"ExpirationDate":[{"Format":"u","Rendering":"2025-01-08 08:40:40Z"}]}}
{"@timestamp":"2024-10-10T08:40:40.2076116+00:00","level":"Warning","messageTemplate":"No XML encryptor configured. Key {KeyId:B} may be persisted to storage in unencrypted form.","message":"No XML encryptor configured. Key {5a8de7d3-01f8-45fb-966f-466fdcd8ec5b} may be persisted to storage in unencrypted form.","fields":{"KeyId":"5a8de7d3-01f8-45fb-966f-466fdcd8ec5b","EventId":{"Id":35,"Name":"NoXMLEncryptorConfiguredKeyMayBePersistedToStorageInUnencryptedForm"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{5a8de7d3-01f8-45fb-966f-466fdcd8ec5b}"}]}}
{"@timestamp":"2024-10-10T08:40:40.3261795+00:00","level":"Information","messageTemplate":"Bus started: {HostAddress}","message":"Bus started: loopback://localhost/","fields":{"HostAddress":"loopback://localhost/","SourceContext":"MassTransit"}}
{"@timestamp":"2024-10-10T08:40:40.6299039+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"http://[::]:8080\"","fields":{"address":"http://[::]:8080","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:40:40.6312949+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"https://[::]:8081\"","fields":{"address":"https://[::]:8081","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:40:40.6324685+00:00","level":"Information","messageTemplate":"Application started. Press Ctrl+C to shut down.","message":"Application started. Press Ctrl+C to shut down.","fields":{"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:40:40.6332978+00:00","level":"Information","messageTemplate":"Hosting environment: {EnvName}","message":"Hosting environment: \"Development\"","fields":{"EnvName":"Development","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:40:40.6341705+00:00","level":"Information","messageTemplate":"Content root path: {ContentRoot}","message":"Content root path: \"/app\"","fields":{"ContentRoot":"/app","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:40:49.2827010+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790SUU3G4P:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790SUU3G4P"}}
{"@timestamp":"2024-10-10T08:40:49.3220398+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN790SUU3G4P:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790SUU3G4P"}}
{"@timestamp":"2024-10-10T08:40:49.3392347+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 204 null null 57.9471ms","fields":{"ElapsedMilliseconds":57.9471,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.0","Method":"OPTIONS","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790SUU3G4P:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790SUU3G4P"}}
{"@timestamp":"2024-10-10T08:40:49.3505286+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790SUU3G4Q:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790SUU3G4Q"}}
{"@timestamp":"2024-10-10T08:40:49.3592020+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN790SUU3G4Q:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790SUU3G4Q"}}
{"@timestamp":"2024-10-10T08:40:49.5302879+00:00","level":"Information","messageTemplate":"Failed to validate the token.","message":"Failed to validate the token.","exceptions":[{"Depth":0,"ClassName":"Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException","Message":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:39:21', Current time (UTC): '10/10/2024 08:40:49'.","Source":"Microsoft.IdentityModel.Tokens","StackTraceString":"   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)","RemoteStackTraceString":null,"RemoteStackIndex":0,"HResult":-2146233088,"HelpURL":null}],"fields":{"EventId":{"Id":1,"Name":"TokenValidationFailed"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN790SUU3G4Q:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790SUU3G4Q"}}
{"@timestamp":"2024-10-10T08:40:49.5761500+00:00","level":"Information","messageTemplate":"{AuthenticationScheme} was not authenticated. Failure message: {FailureMessage}","message":"\"Bearer\" was not authenticated. Failure message: \"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:39:21', Current time (UTC): '10/10/2024 08:40:49'.\"","fields":{"AuthenticationScheme":"Bearer","FailureMessage":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:39:21', Current time (UTC): '10/10/2024 08:40:49'.","EventId":{"Id":7,"Name":"AuthenticationSchemeNotAuthenticatedWithFailure"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN790SUU3G4Q:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790SUU3G4Q"}}
{"@timestamp":"2024-10-10T08:40:49.5817115+00:00","level":"Information","messageTemplate":"Executing endpoint '{EndpointName}'","message":"Executing endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN790SUU3G4Q:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790SUU3G4Q"}}
{"@timestamp":"2024-10-10T08:40:49.6028102+00:00","level":"Information","messageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","message":"Route matched with \"{action = \\\"Refresh\\\", controller = \\\"Token\\\"}\". Executing controller action with signature \"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()\" on controller \"Modsen.Server.Authentication.Api.Controllers.TokenController\" (\"Modsen.Server.Authentication.Api\").","fields":{"RouteData":"{action = \"Refresh\", controller = \"Token\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()","Controller":"Modsen.Server.Authentication.Api.Controllers.TokenController","AssemblyName":"Modsen.Server.Authentication.Api","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"d4578937-f619-4607-af46-e6bde5118b72","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790SUU3G4Q:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790SUU3G4Q"}}
{"@timestamp":"2024-10-10T08:40:50.8989154+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"22\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT 1\"","fields":{"elapsed":"22","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"d4578937-f619-4607-af46-e6bde5118b72","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790SUU3G4Q:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790SUU3G4Q"}}
{"@timestamp":"2024-10-10T08:40:50.9215919+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"12\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0\"","fields":{"elapsed":"12","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"d4578937-f619-4607-af46-e6bde5118b72","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790SUU3G4Q:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790SUU3G4Q"}}
{"@timestamp":"2024-10-10T08:40:51.3463606+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"44\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"44","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"d4578937-f619-4607-af46-e6bde5118b72","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790SUU3G4Q:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790SUU3G4Q"}}
{"@timestamp":"2024-10-10T08:40:51.4679980+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"7\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"7","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"d4578937-f619-4607-af46-e6bde5118b72","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790SUU3G4Q:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790SUU3G4Q"}}
{"@timestamp":"2024-10-10T08:40:51.6152831+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"51\"ms) [Parameters=[\"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;\"","fields":{"elapsed":"51","parameters":"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"d4578937-f619-4607-af46-e6bde5118b72","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790SUU3G4Q:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790SUU3G4Q"}}
{"@timestamp":"2024-10-10T08:40:51.6293566+00:00","level":"Information","messageTemplate":"User refresh token","message":"User refresh token","fields":{"SourceContext":"Modsen.Server.Authentication.Application.Features.ApplicationUser.CommandHandlers.RefreshTokenHandler","ActionId":"d4578937-f619-4607-af46-e6bde5118b72","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790SUU3G4Q:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790SUU3G4Q"}}
{"@timestamp":"2024-10-10T08:40:51.6494610+00:00","level":"Information","messageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","message":"Executing \"OkObjectResult\", writing value of type '\"System.String\"'.","fields":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"d4578937-f619-4607-af46-e6bde5118b72","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790SUU3G4Q:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790SUU3G4Q"}}
{"@timestamp":"2024-10-10T08:40:51.6603263+00:00","level":"Information","messageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","message":"Executed action \"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\" in 2050.9198ms","fields":{"ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","ElapsedMilliseconds":2050.9198,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HN790SUU3G4Q:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790SUU3G4Q"}}
{"@timestamp":"2024-10-10T08:40:51.6618444+00:00","level":"Information","messageTemplate":"Executed endpoint '{EndpointName}'","message":"Executed endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN790SUU3G4Q:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790SUU3G4Q"}}
{"@timestamp":"2024-10-10T08:40:51.6721813+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 200 null \"text/plain; charset=utf-8\" 2321.6084ms","fields":{"ElapsedMilliseconds":2321.6084,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.0","Method":"GET","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790SUU3G4Q:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790SUU3G4Q"}}
{"@timestamp":"2024-10-10T08:41:13.7351516+00:00","level":"Warning","messageTemplate":"Using an in-memory repository. Keys will not be persisted to storage.","message":"Using an in-memory repository. Keys will not be persisted to storage.","fields":{"EventId":{"Id":50,"Name":"UsingInMemoryRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.Repositories.EphemeralXmlRepository"}}
{"@timestamp":"2024-10-10T08:41:13.7866265+00:00","level":"Warning","messageTemplate":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","message":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","fields":{"EventId":{"Id":59,"Name":"UsingEphemeralKeyRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"}}
{"@timestamp":"2024-10-10T08:41:13.9100632+00:00","level":"Information","messageTemplate":"Creating key {KeyId:B} with creation date {CreationDate:u}, activation date {ActivationDate:u}, and expiration date {ExpirationDate:u}.","message":"Creating key {ac75aef2-fda0-45a9-947d-67ea62c26df3} with creation date 2024-10-10 08:41:13Z, activation date 2024-10-10 08:41:13Z, and expiration date 2025-01-08 08:41:13Z.","fields":{"KeyId":"ac75aef2-fda0-45a9-947d-67ea62c26df3","CreationDate":"2024-10-10T08:41:13.9076396+00:00","ActivationDate":"2024-10-10T08:41:13.9042762+00:00","ExpirationDate":"2025-01-08T08:41:13.9042762+00:00","EventId":{"Id":58,"Name":"CreatingKey"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{ac75aef2-fda0-45a9-947d-67ea62c26df3}"}],"CreationDate":[{"Format":"u","Rendering":"2024-10-10 08:41:13Z"}],"ActivationDate":[{"Format":"u","Rendering":"2024-10-10 08:41:13Z"}],"ExpirationDate":[{"Format":"u","Rendering":"2025-01-08 08:41:13Z"}]}}
{"@timestamp":"2024-10-10T08:41:13.9265995+00:00","level":"Warning","messageTemplate":"No XML encryptor configured. Key {KeyId:B} may be persisted to storage in unencrypted form.","message":"No XML encryptor configured. Key {ac75aef2-fda0-45a9-947d-67ea62c26df3} may be persisted to storage in unencrypted form.","fields":{"KeyId":"ac75aef2-fda0-45a9-947d-67ea62c26df3","EventId":{"Id":35,"Name":"NoXMLEncryptorConfiguredKeyMayBePersistedToStorageInUnencryptedForm"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{ac75aef2-fda0-45a9-947d-67ea62c26df3}"}]}}
{"@timestamp":"2024-10-10T08:41:14.0180838+00:00","level":"Information","messageTemplate":"Bus started: {HostAddress}","message":"Bus started: loopback://localhost/","fields":{"HostAddress":"loopback://localhost/","SourceContext":"MassTransit"}}
{"@timestamp":"2024-10-10T08:41:14.3150576+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"http://[::]:8080\"","fields":{"address":"http://[::]:8080","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:41:14.3160854+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"https://[::]:8081\"","fields":{"address":"https://[::]:8081","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:41:14.3181451+00:00","level":"Information","messageTemplate":"Application started. Press Ctrl+C to shut down.","message":"Application started. Press Ctrl+C to shut down.","fields":{"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:41:14.3189104+00:00","level":"Information","messageTemplate":"Hosting environment: {EnvName}","message":"Hosting environment: \"Development\"","fields":{"EnvName":"Development","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:41:14.3198609+00:00","level":"Information","messageTemplate":"Content root path: {ContentRoot}","message":"Content root path: \"/app\"","fields":{"ContentRoot":"/app","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:44:14.7072226+00:00","level":"Warning","messageTemplate":"Using an in-memory repository. Keys will not be persisted to storage.","message":"Using an in-memory repository. Keys will not be persisted to storage.","fields":{"EventId":{"Id":50,"Name":"UsingInMemoryRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.Repositories.EphemeralXmlRepository"}}
{"@timestamp":"2024-10-10T08:44:14.7485198+00:00","level":"Warning","messageTemplate":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","message":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","fields":{"EventId":{"Id":59,"Name":"UsingEphemeralKeyRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"}}
{"@timestamp":"2024-10-10T08:44:14.8475903+00:00","level":"Information","messageTemplate":"Creating key {KeyId:B} with creation date {CreationDate:u}, activation date {ActivationDate:u}, and expiration date {ExpirationDate:u}.","message":"Creating key {69db532c-7949-4147-a695-499ca1306927} with creation date 2024-10-10 08:44:14Z, activation date 2024-10-10 08:44:14Z, and expiration date 2025-01-08 08:44:14Z.","fields":{"KeyId":"69db532c-7949-4147-a695-499ca1306927","CreationDate":"2024-10-10T08:44:14.8449384+00:00","ActivationDate":"2024-10-10T08:44:14.8422206+00:00","ExpirationDate":"2025-01-08T08:44:14.8422206+00:00","EventId":{"Id":58,"Name":"CreatingKey"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{69db532c-7949-4147-a695-499ca1306927}"}],"CreationDate":[{"Format":"u","Rendering":"2024-10-10 08:44:14Z"}],"ActivationDate":[{"Format":"u","Rendering":"2024-10-10 08:44:14Z"}],"ExpirationDate":[{"Format":"u","Rendering":"2025-01-08 08:44:14Z"}]}}
{"@timestamp":"2024-10-10T08:44:14.8632305+00:00","level":"Warning","messageTemplate":"No XML encryptor configured. Key {KeyId:B} may be persisted to storage in unencrypted form.","message":"No XML encryptor configured. Key {69db532c-7949-4147-a695-499ca1306927} may be persisted to storage in unencrypted form.","fields":{"KeyId":"69db532c-7949-4147-a695-499ca1306927","EventId":{"Id":35,"Name":"NoXMLEncryptorConfiguredKeyMayBePersistedToStorageInUnencryptedForm"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{69db532c-7949-4147-a695-499ca1306927}"}]}}
{"@timestamp":"2024-10-10T08:44:14.9816875+00:00","level":"Information","messageTemplate":"Bus started: {HostAddress}","message":"Bus started: loopback://localhost/","fields":{"HostAddress":"loopback://localhost/","SourceContext":"MassTransit"}}
{"@timestamp":"2024-10-10T08:44:15.2945173+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"http://[::]:8080\"","fields":{"address":"http://[::]:8080","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:44:15.2961735+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"https://[::]:8081\"","fields":{"address":"https://[::]:8081","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:44:15.2975548+00:00","level":"Information","messageTemplate":"Application started. Press Ctrl+C to shut down.","message":"Application started. Press Ctrl+C to shut down.","fields":{"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:44:15.2986589+00:00","level":"Information","messageTemplate":"Hosting environment: {EnvName}","message":"Hosting environment: \"Development\"","fields":{"EnvName":"Development","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:44:15.2993539+00:00","level":"Information","messageTemplate":"Content root path: {ContentRoot}","message":"Content root path: \"/app\"","fields":{"ContentRoot":"/app","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:44:26.8061013+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790UVOJ0JU:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790UVOJ0JU"}}
{"@timestamp":"2024-10-10T08:44:26.8542667+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN790UVOJ0JU:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790UVOJ0JU"}}
{"@timestamp":"2024-10-10T08:44:26.8736753+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 204 null null 69.0225ms","fields":{"ElapsedMilliseconds":69.0225,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.0","Method":"OPTIONS","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790UVOJ0JU:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790UVOJ0JU"}}
{"@timestamp":"2024-10-10T08:44:26.9026011+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790UVOJ0JV:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790UVOJ0JV"}}
{"@timestamp":"2024-10-10T08:44:26.9124635+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN790UVOJ0JV:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790UVOJ0JV"}}
{"@timestamp":"2024-10-10T08:44:27.0554930+00:00","level":"Information","messageTemplate":"Failed to validate the token.","message":"Failed to validate the token.","exceptions":[{"Depth":0,"ClassName":"Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException","Message":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:41:51', Current time (UTC): '10/10/2024 08:44:27'.","Source":"Microsoft.IdentityModel.Tokens","StackTraceString":"   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)","RemoteStackTraceString":null,"RemoteStackIndex":0,"HResult":-2146233088,"HelpURL":null}],"fields":{"EventId":{"Id":1,"Name":"TokenValidationFailed"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN790UVOJ0JV:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790UVOJ0JV"}}
{"@timestamp":"2024-10-10T08:44:27.1068024+00:00","level":"Information","messageTemplate":"{AuthenticationScheme} was not authenticated. Failure message: {FailureMessage}","message":"\"Bearer\" was not authenticated. Failure message: \"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:41:51', Current time (UTC): '10/10/2024 08:44:27'.\"","fields":{"AuthenticationScheme":"Bearer","FailureMessage":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:41:51', Current time (UTC): '10/10/2024 08:44:27'.","EventId":{"Id":7,"Name":"AuthenticationSchemeNotAuthenticatedWithFailure"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN790UVOJ0JV:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790UVOJ0JV"}}
{"@timestamp":"2024-10-10T08:44:27.1110893+00:00","level":"Information","messageTemplate":"Executing endpoint '{EndpointName}'","message":"Executing endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN790UVOJ0JV:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790UVOJ0JV"}}
{"@timestamp":"2024-10-10T08:44:27.1309776+00:00","level":"Information","messageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","message":"Route matched with \"{action = \\\"Refresh\\\", controller = \\\"Token\\\"}\". Executing controller action with signature \"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()\" on controller \"Modsen.Server.Authentication.Api.Controllers.TokenController\" (\"Modsen.Server.Authentication.Api\").","fields":{"RouteData":"{action = \"Refresh\", controller = \"Token\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()","Controller":"Modsen.Server.Authentication.Api.Controllers.TokenController","AssemblyName":"Modsen.Server.Authentication.Api","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"aaaa5df1-b13b-477b-b116-d75aa0f71928","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790UVOJ0JV:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790UVOJ0JV"}}
{"@timestamp":"2024-10-10T08:44:28.5791940+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"19\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT 1\"","fields":{"elapsed":"19","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"aaaa5df1-b13b-477b-b116-d75aa0f71928","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790UVOJ0JV:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790UVOJ0JV"}}
{"@timestamp":"2024-10-10T08:44:28.6002220+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"11\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0\"","fields":{"elapsed":"11","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"aaaa5df1-b13b-477b-b116-d75aa0f71928","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790UVOJ0JV:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790UVOJ0JV"}}
{"@timestamp":"2024-10-10T08:44:28.9331094+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"39\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"39","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"aaaa5df1-b13b-477b-b116-d75aa0f71928","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790UVOJ0JV:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790UVOJ0JV"}}
{"@timestamp":"2024-10-10T08:44:29.0479402+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"10\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"10","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"aaaa5df1-b13b-477b-b116-d75aa0f71928","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790UVOJ0JV:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790UVOJ0JV"}}
{"@timestamp":"2024-10-10T08:44:29.2006494+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"9\"ms) [Parameters=[\"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;\"","fields":{"elapsed":"9","parameters":"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"aaaa5df1-b13b-477b-b116-d75aa0f71928","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790UVOJ0JV:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790UVOJ0JV"}}
{"@timestamp":"2024-10-10T08:44:29.2357584+00:00","level":"Information","messageTemplate":"User refresh token","message":"User refresh token","fields":{"SourceContext":"Modsen.Server.Authentication.Application.Features.ApplicationUser.CommandHandlers.RefreshTokenHandler","ActionId":"aaaa5df1-b13b-477b-b116-d75aa0f71928","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790UVOJ0JV:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790UVOJ0JV"}}
{"@timestamp":"2024-10-10T08:44:29.2580611+00:00","level":"Information","messageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","message":"Executing \"OkObjectResult\", writing value of type '\"System.String\"'.","fields":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"aaaa5df1-b13b-477b-b116-d75aa0f71928","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790UVOJ0JV:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790UVOJ0JV"}}
{"@timestamp":"2024-10-10T08:44:29.2653488+00:00","level":"Information","messageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","message":"Executed action \"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\" in 2129.6519ms","fields":{"ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","ElapsedMilliseconds":2129.6519,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HN790UVOJ0JV:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790UVOJ0JV"}}
{"@timestamp":"2024-10-10T08:44:29.2670163+00:00","level":"Information","messageTemplate":"Executed endpoint '{EndpointName}'","message":"Executed endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN790UVOJ0JV:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790UVOJ0JV"}}
{"@timestamp":"2024-10-10T08:44:29.2762644+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 200 null \"text/plain; charset=utf-8\" 2373.6473ms","fields":{"ElapsedMilliseconds":2373.6473,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.0","Method":"GET","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790UVOJ0JV:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790UVOJ0JV"}}
{"@timestamp":"2024-10-10T08:44:29.2866599+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790UVOJ0K0:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790UVOJ0K0"}}
{"@timestamp":"2024-10-10T08:44:29.2894734+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN790UVOJ0K0:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790UVOJ0K0"}}
{"@timestamp":"2024-10-10T08:44:29.2931029+00:00","level":"Information","messageTemplate":"Failed to validate the token.","message":"Failed to validate the token.","exceptions":[{"Depth":0,"ClassName":"Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException","Message":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:41:51', Current time (UTC): '10/10/2024 08:44:29'.","Source":"Microsoft.IdentityModel.Tokens","StackTraceString":"   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)","RemoteStackTraceString":null,"RemoteStackIndex":0,"HResult":-2146233088,"HelpURL":null}],"fields":{"EventId":{"Id":1,"Name":"TokenValidationFailed"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN790UVOJ0K0:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790UVOJ0K0"}}
{"@timestamp":"2024-10-10T08:44:29.2948572+00:00","level":"Information","messageTemplate":"{AuthenticationScheme} was not authenticated. Failure message: {FailureMessage}","message":"\"Bearer\" was not authenticated. Failure message: \"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:41:51', Current time (UTC): '10/10/2024 08:44:29'.\"","fields":{"AuthenticationScheme":"Bearer","FailureMessage":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:41:51', Current time (UTC): '10/10/2024 08:44:29'.","EventId":{"Id":7,"Name":"AuthenticationSchemeNotAuthenticatedWithFailure"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN790UVOJ0K0:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790UVOJ0K0"}}
{"@timestamp":"2024-10-10T08:44:29.2964626+00:00","level":"Information","messageTemplate":"Executing endpoint '{EndpointName}'","message":"Executing endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN790UVOJ0K0:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790UVOJ0K0"}}
{"@timestamp":"2024-10-10T08:44:29.2981490+00:00","level":"Information","messageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","message":"Route matched with \"{action = \\\"Refresh\\\", controller = \\\"Token\\\"}\". Executing controller action with signature \"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()\" on controller \"Modsen.Server.Authentication.Api.Controllers.TokenController\" (\"Modsen.Server.Authentication.Api\").","fields":{"RouteData":"{action = \"Refresh\", controller = \"Token\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()","Controller":"Modsen.Server.Authentication.Api.Controllers.TokenController","AssemblyName":"Modsen.Server.Authentication.Api","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"aaaa5df1-b13b-477b-b116-d75aa0f71928","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790UVOJ0K0:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790UVOJ0K0"}}
{"@timestamp":"2024-10-10T08:44:29.3161712+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"1\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT 1\"","fields":{"elapsed":"1","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"aaaa5df1-b13b-477b-b116-d75aa0f71928","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790UVOJ0K0:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790UVOJ0K0"}}
{"@timestamp":"2024-10-10T08:44:29.3188337+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"1\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0\"","fields":{"elapsed":"1","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"aaaa5df1-b13b-477b-b116-d75aa0f71928","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790UVOJ0K0:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790UVOJ0K0"}}
{"@timestamp":"2024-10-10T08:44:29.3720082+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"46\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"46","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"aaaa5df1-b13b-477b-b116-d75aa0f71928","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790UVOJ0K0:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790UVOJ0K0"}}
{"@timestamp":"2024-10-10T08:44:29.4801495+00:00","level":"Error","messageTemplate":"User has invalid refresh token","message":"User has invalid refresh token","fields":{"SourceContext":"Modsen.Server.Authentication.Application.Features.ApplicationUser.CommandHandlers.RefreshTokenHandler","ActionId":"aaaa5df1-b13b-477b-b116-d75aa0f71928","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN790UVOJ0K0:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790UVOJ0K0"}}
{"@timestamp":"2024-10-10T08:44:29.5841008+00:00","level":"Information","messageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","message":"Executed action \"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\" in 284.9052ms","fields":{"ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","ElapsedMilliseconds":284.9052,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HN790UVOJ0K0:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790UVOJ0K0"}}
{"@timestamp":"2024-10-10T08:44:29.5853508+00:00","level":"Information","messageTemplate":"Executed endpoint '{EndpointName}'","message":"Executed endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN790UVOJ0K0:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790UVOJ0K0"}}
{"@timestamp":"2024-10-10T08:44:29.8280337+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 400 null \"application/json\" 541.346ms","fields":{"ElapsedMilliseconds":541.346,"StatusCode":400,"ContentType":"application/json","ContentLength":null,"Protocol":"HTTP/1.0","Method":"GET","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN790UVOJ0K0:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN790UVOJ0K0"}}
{"@timestamp":"2024-10-10T08:48:04.0030023+00:00","level":"Warning","messageTemplate":"Using an in-memory repository. Keys will not be persisted to storage.","message":"Using an in-memory repository. Keys will not be persisted to storage.","fields":{"EventId":{"Id":50,"Name":"UsingInMemoryRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.Repositories.EphemeralXmlRepository"}}
{"@timestamp":"2024-10-10T08:48:04.0452654+00:00","level":"Warning","messageTemplate":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","message":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","fields":{"EventId":{"Id":59,"Name":"UsingEphemeralKeyRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"}}
{"@timestamp":"2024-10-10T08:48:04.1470121+00:00","level":"Information","messageTemplate":"Creating key {KeyId:B} with creation date {CreationDate:u}, activation date {ActivationDate:u}, and expiration date {ExpirationDate:u}.","message":"Creating key {9f8096c1-d717-411f-92f2-c3b4d6eb09d8} with creation date 2024-10-10 08:48:04Z, activation date 2024-10-10 08:48:04Z, and expiration date 2025-01-08 08:48:04Z.","fields":{"KeyId":"9f8096c1-d717-411f-92f2-c3b4d6eb09d8","CreationDate":"2024-10-10T08:48:04.1443255+00:00","ActivationDate":"2024-10-10T08:48:04.1412556+00:00","ExpirationDate":"2025-01-08T08:48:04.1412556+00:00","EventId":{"Id":58,"Name":"CreatingKey"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{9f8096c1-d717-411f-92f2-c3b4d6eb09d8}"}],"CreationDate":[{"Format":"u","Rendering":"2024-10-10 08:48:04Z"}],"ActivationDate":[{"Format":"u","Rendering":"2024-10-10 08:48:04Z"}],"ExpirationDate":[{"Format":"u","Rendering":"2025-01-08 08:48:04Z"}]}}
{"@timestamp":"2024-10-10T08:48:04.1639923+00:00","level":"Warning","messageTemplate":"No XML encryptor configured. Key {KeyId:B} may be persisted to storage in unencrypted form.","message":"No XML encryptor configured. Key {9f8096c1-d717-411f-92f2-c3b4d6eb09d8} may be persisted to storage in unencrypted form.","fields":{"KeyId":"9f8096c1-d717-411f-92f2-c3b4d6eb09d8","EventId":{"Id":35,"Name":"NoXMLEncryptorConfiguredKeyMayBePersistedToStorageInUnencryptedForm"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{9f8096c1-d717-411f-92f2-c3b4d6eb09d8}"}]}}
{"@timestamp":"2024-10-10T08:48:04.2871826+00:00","level":"Information","messageTemplate":"Bus started: {HostAddress}","message":"Bus started: loopback://localhost/","fields":{"HostAddress":"loopback://localhost/","SourceContext":"MassTransit"}}
{"@timestamp":"2024-10-10T08:48:04.5853235+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"http://[::]:8080\"","fields":{"address":"http://[::]:8080","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:48:04.5872668+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"https://[::]:8081\"","fields":{"address":"https://[::]:8081","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:48:04.5882333+00:00","level":"Information","messageTemplate":"Application started. Press Ctrl+C to shut down.","message":"Application started. Press Ctrl+C to shut down.","fields":{"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:48:04.5891239+00:00","level":"Information","messageTemplate":"Hosting environment: {EnvName}","message":"Hosting environment: \"Development\"","fields":{"EnvName":"Development","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:48:04.5901052+00:00","level":"Information","messageTemplate":"Content root path: {ContentRoot}","message":"Content root path: \"/app\"","fields":{"ContentRoot":"/app","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:48:11.0434300+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN79112J9D4H:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN79112J9D4H"}}
{"@timestamp":"2024-10-10T08:48:11.0789771+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN79112J9D4H:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN79112J9D4H"}}
{"@timestamp":"2024-10-10T08:48:11.0931929+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 204 null null 51.0656ms","fields":{"ElapsedMilliseconds":51.0656,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.0","Method":"OPTIONS","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN79112J9D4H:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN79112J9D4H"}}
{"@timestamp":"2024-10-10T08:48:11.1026480+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN79112J9D4I:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN79112J9D4I"}}
{"@timestamp":"2024-10-10T08:48:11.1104377+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN79112J9D4I:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN79112J9D4I"}}
{"@timestamp":"2024-10-10T08:48:11.2505085+00:00","level":"Information","messageTemplate":"Failed to validate the token.","message":"Failed to validate the token.","exceptions":[{"Depth":0,"ClassName":"Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException","Message":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:45:29', Current time (UTC): '10/10/2024 08:48:11'.","Source":"Microsoft.IdentityModel.Tokens","StackTraceString":"   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)","RemoteStackTraceString":null,"RemoteStackIndex":0,"HResult":-2146233088,"HelpURL":null}],"fields":{"EventId":{"Id":1,"Name":"TokenValidationFailed"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN79112J9D4I:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN79112J9D4I"}}
{"@timestamp":"2024-10-10T08:48:11.2963440+00:00","level":"Information","messageTemplate":"{AuthenticationScheme} was not authenticated. Failure message: {FailureMessage}","message":"\"Bearer\" was not authenticated. Failure message: \"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:45:29', Current time (UTC): '10/10/2024 08:48:11'.\"","fields":{"AuthenticationScheme":"Bearer","FailureMessage":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:45:29', Current time (UTC): '10/10/2024 08:48:11'.","EventId":{"Id":7,"Name":"AuthenticationSchemeNotAuthenticatedWithFailure"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN79112J9D4I:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN79112J9D4I"}}
{"@timestamp":"2024-10-10T08:48:11.3006066+00:00","level":"Information","messageTemplate":"Executing endpoint '{EndpointName}'","message":"Executing endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN79112J9D4I:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN79112J9D4I"}}
{"@timestamp":"2024-10-10T08:48:11.3194292+00:00","level":"Information","messageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","message":"Route matched with \"{action = \\\"Refresh\\\", controller = \\\"Token\\\"}\". Executing controller action with signature \"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()\" on controller \"Modsen.Server.Authentication.Api.Controllers.TokenController\" (\"Modsen.Server.Authentication.Api\").","fields":{"RouteData":"{action = \"Refresh\", controller = \"Token\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()","Controller":"Modsen.Server.Authentication.Api.Controllers.TokenController","AssemblyName":"Modsen.Server.Authentication.Api","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"d8f0734b-cca7-4b71-add4-a152272a3e14","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN79112J9D4I:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN79112J9D4I"}}
{"@timestamp":"2024-10-10T08:48:12.4561885+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"16\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT 1\"","fields":{"elapsed":"16","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"d8f0734b-cca7-4b71-add4-a152272a3e14","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN79112J9D4I:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN79112J9D4I"}}
{"@timestamp":"2024-10-10T08:48:12.4769153+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"11\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0\"","fields":{"elapsed":"11","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"d8f0734b-cca7-4b71-add4-a152272a3e14","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN79112J9D4I:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN79112J9D4I"}}
{"@timestamp":"2024-10-10T08:48:12.8206247+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"60\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"60","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"d8f0734b-cca7-4b71-add4-a152272a3e14","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN79112J9D4I:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN79112J9D4I"}}
{"@timestamp":"2024-10-10T08:48:12.9149076+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"8\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"8","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"d8f0734b-cca7-4b71-add4-a152272a3e14","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN79112J9D4I:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN79112J9D4I"}}
{"@timestamp":"2024-10-10T08:48:13.0202742+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"9\"ms) [Parameters=[\"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;\"","fields":{"elapsed":"9","parameters":"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"d8f0734b-cca7-4b71-add4-a152272a3e14","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN79112J9D4I:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN79112J9D4I"}}
{"@timestamp":"2024-10-10T08:48:13.0355265+00:00","level":"Information","messageTemplate":"User refresh token","message":"User refresh token","fields":{"SourceContext":"Modsen.Server.Authentication.Application.Features.ApplicationUser.CommandHandlers.RefreshTokenHandler","ActionId":"d8f0734b-cca7-4b71-add4-a152272a3e14","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN79112J9D4I:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN79112J9D4I"}}
{"@timestamp":"2024-10-10T08:48:13.0556759+00:00","level":"Information","messageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","message":"Executing \"OkObjectResult\", writing value of type '\"System.String\"'.","fields":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"d8f0734b-cca7-4b71-add4-a152272a3e14","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN79112J9D4I:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN79112J9D4I"}}
{"@timestamp":"2024-10-10T08:48:13.0631667+00:00","level":"Information","messageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","message":"Executed action \"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\" in 1739.0521ms","fields":{"ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","ElapsedMilliseconds":1739.0521,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HN79112J9D4I:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN79112J9D4I"}}
{"@timestamp":"2024-10-10T08:48:13.0648088+00:00","level":"Information","messageTemplate":"Executed endpoint '{EndpointName}'","message":"Executed endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN79112J9D4I:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN79112J9D4I"}}
{"@timestamp":"2024-10-10T08:48:13.0748614+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 200 null \"text/plain; charset=utf-8\" 1972.3146ms","fields":{"ElapsedMilliseconds":1972.3146,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.0","Method":"GET","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN79112J9D4I:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN79112J9D4I"}}
{"@timestamp":"2024-10-10T08:49:05.5173120+00:00","level":"Warning","messageTemplate":"Using an in-memory repository. Keys will not be persisted to storage.","message":"Using an in-memory repository. Keys will not be persisted to storage.","fields":{"EventId":{"Id":50,"Name":"UsingInMemoryRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.Repositories.EphemeralXmlRepository"}}
{"@timestamp":"2024-10-10T08:49:05.5730330+00:00","level":"Warning","messageTemplate":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","message":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","fields":{"EventId":{"Id":59,"Name":"UsingEphemeralKeyRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"}}
{"@timestamp":"2024-10-10T08:49:05.6865204+00:00","level":"Information","messageTemplate":"Creating key {KeyId:B} with creation date {CreationDate:u}, activation date {ActivationDate:u}, and expiration date {ExpirationDate:u}.","message":"Creating key {0d3f8c1c-467d-48c4-a574-ce28b91b1900} with creation date 2024-10-10 08:49:05Z, activation date 2024-10-10 08:49:05Z, and expiration date 2025-01-08 08:49:05Z.","fields":{"KeyId":"0d3f8c1c-467d-48c4-a574-ce28b91b1900","CreationDate":"2024-10-10T08:49:05.6827985+00:00","ActivationDate":"2024-10-10T08:49:05.6795820+00:00","ExpirationDate":"2025-01-08T08:49:05.6795820+00:00","EventId":{"Id":58,"Name":"CreatingKey"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{0d3f8c1c-467d-48c4-a574-ce28b91b1900}"}],"CreationDate":[{"Format":"u","Rendering":"2024-10-10 08:49:05Z"}],"ActivationDate":[{"Format":"u","Rendering":"2024-10-10 08:49:05Z"}],"ExpirationDate":[{"Format":"u","Rendering":"2025-01-08 08:49:05Z"}]}}
{"@timestamp":"2024-10-10T08:49:05.7053489+00:00","level":"Warning","messageTemplate":"No XML encryptor configured. Key {KeyId:B} may be persisted to storage in unencrypted form.","message":"No XML encryptor configured. Key {0d3f8c1c-467d-48c4-a574-ce28b91b1900} may be persisted to storage in unencrypted form.","fields":{"KeyId":"0d3f8c1c-467d-48c4-a574-ce28b91b1900","EventId":{"Id":35,"Name":"NoXMLEncryptorConfiguredKeyMayBePersistedToStorageInUnencryptedForm"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{0d3f8c1c-467d-48c4-a574-ce28b91b1900}"}]}}
{"@timestamp":"2024-10-10T08:49:05.8389703+00:00","level":"Information","messageTemplate":"Bus started: {HostAddress}","message":"Bus started: loopback://localhost/","fields":{"HostAddress":"loopback://localhost/","SourceContext":"MassTransit"}}
{"@timestamp":"2024-10-10T08:49:06.1531832+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"http://[::]:8080\"","fields":{"address":"http://[::]:8080","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:49:06.1543012+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"https://[::]:8081\"","fields":{"address":"https://[::]:8081","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:49:06.1565504+00:00","level":"Information","messageTemplate":"Application started. Press Ctrl+C to shut down.","message":"Application started. Press Ctrl+C to shut down.","fields":{"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:49:06.1578211+00:00","level":"Information","messageTemplate":"Hosting environment: {EnvName}","message":"Hosting environment: \"Development\"","fields":{"EnvName":"Development","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:49:06.1590918+00:00","level":"Information","messageTemplate":"Content root path: {ContentRoot}","message":"Content root path: \"/app\"","fields":{"ContentRoot":"/app","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:49:20.1778471+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN7911N6DK8N:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7911N6DK8N"}}
{"@timestamp":"2024-10-10T08:49:20.2339140+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN7911N6DK8N:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7911N6DK8N"}}
{"@timestamp":"2024-10-10T08:49:20.2646617+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 204 null null 87.6796ms","fields":{"ElapsedMilliseconds":87.6796,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.0","Method":"OPTIONS","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN7911N6DK8N:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7911N6DK8N"}}
{"@timestamp":"2024-10-10T08:49:20.2833097+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN7911N6DK8O:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7911N6DK8O"}}
{"@timestamp":"2024-10-10T08:49:20.2936913+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN7911N6DK8O:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7911N6DK8O"}}
{"@timestamp":"2024-10-10T08:49:20.4380769+00:00","level":"Information","messageTemplate":"Failed to validate the token.","message":"Failed to validate the token.","exceptions":[{"Depth":0,"ClassName":"Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException","Message":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:49:13', Current time (UTC): '10/10/2024 08:49:20'.","Source":"Microsoft.IdentityModel.Tokens","StackTraceString":"   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)","RemoteStackTraceString":null,"RemoteStackIndex":0,"HResult":-2146233088,"HelpURL":null}],"fields":{"EventId":{"Id":1,"Name":"TokenValidationFailed"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN7911N6DK8O:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7911N6DK8O"}}
{"@timestamp":"2024-10-10T08:49:20.4860017+00:00","level":"Information","messageTemplate":"{AuthenticationScheme} was not authenticated. Failure message: {FailureMessage}","message":"\"Bearer\" was not authenticated. Failure message: \"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:49:13', Current time (UTC): '10/10/2024 08:49:20'.\"","fields":{"AuthenticationScheme":"Bearer","FailureMessage":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:49:13', Current time (UTC): '10/10/2024 08:49:20'.","EventId":{"Id":7,"Name":"AuthenticationSchemeNotAuthenticatedWithFailure"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN7911N6DK8O:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7911N6DK8O"}}
{"@timestamp":"2024-10-10T08:49:20.4901351+00:00","level":"Information","messageTemplate":"Executing endpoint '{EndpointName}'","message":"Executing endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN7911N6DK8O:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7911N6DK8O"}}
{"@timestamp":"2024-10-10T08:49:20.5107837+00:00","level":"Information","messageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","message":"Route matched with \"{action = \\\"Refresh\\\", controller = \\\"Token\\\"}\". Executing controller action with signature \"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()\" on controller \"Modsen.Server.Authentication.Api.Controllers.TokenController\" (\"Modsen.Server.Authentication.Api\").","fields":{"RouteData":"{action = \"Refresh\", controller = \"Token\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()","Controller":"Modsen.Server.Authentication.Api.Controllers.TokenController","AssemblyName":"Modsen.Server.Authentication.Api","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"6124b4cd-e34a-4672-bd89-79ee44593d51","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN7911N6DK8O:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7911N6DK8O"}}
{"@timestamp":"2024-10-10T08:49:21.7641679+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"15\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT 1\"","fields":{"elapsed":"15","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"6124b4cd-e34a-4672-bd89-79ee44593d51","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN7911N6DK8O:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7911N6DK8O"}}
{"@timestamp":"2024-10-10T08:49:21.7920615+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"16\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0\"","fields":{"elapsed":"16","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"6124b4cd-e34a-4672-bd89-79ee44593d51","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN7911N6DK8O:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7911N6DK8O"}}
{"@timestamp":"2024-10-10T08:49:22.1853349+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"66\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"66","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"6124b4cd-e34a-4672-bd89-79ee44593d51","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN7911N6DK8O:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7911N6DK8O"}}
{"@timestamp":"2024-10-10T08:49:22.3153999+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"28\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"28","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"6124b4cd-e34a-4672-bd89-79ee44593d51","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN7911N6DK8O:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7911N6DK8O"}}
{"@timestamp":"2024-10-10T08:49:22.4405728+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"9\"ms) [Parameters=[\"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;\"","fields":{"elapsed":"9","parameters":"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"6124b4cd-e34a-4672-bd89-79ee44593d51","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN7911N6DK8O:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7911N6DK8O"}}
{"@timestamp":"2024-10-10T08:49:22.4537290+00:00","level":"Information","messageTemplate":"User refresh token","message":"User refresh token","fields":{"SourceContext":"Modsen.Server.Authentication.Application.Features.ApplicationUser.CommandHandlers.RefreshTokenHandler","ActionId":"6124b4cd-e34a-4672-bd89-79ee44593d51","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN7911N6DK8O:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7911N6DK8O"}}
{"@timestamp":"2024-10-10T08:49:22.4781807+00:00","level":"Information","messageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","message":"Executing \"OkObjectResult\", writing value of type '\"System.String\"'.","fields":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"6124b4cd-e34a-4672-bd89-79ee44593d51","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN7911N6DK8O:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7911N6DK8O"}}
{"@timestamp":"2024-10-10T08:49:22.4864072+00:00","level":"Information","messageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","message":"Executed action \"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\" in 1971.5117ms","fields":{"ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","ElapsedMilliseconds":1971.5117,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HN7911N6DK8O:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7911N6DK8O"}}
{"@timestamp":"2024-10-10T08:49:22.4879065+00:00","level":"Information","messageTemplate":"Executed endpoint '{EndpointName}'","message":"Executed endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN7911N6DK8O:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7911N6DK8O"}}
{"@timestamp":"2024-10-10T08:49:22.4972565+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 200 null \"text/plain; charset=utf-8\" 2213.865ms","fields":{"ElapsedMilliseconds":2213.865,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.0","Method":"GET","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN7911N6DK8O:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7911N6DK8O"}}
{"@timestamp":"2024-10-10T08:50:52.8549013+00:00","level":"Warning","messageTemplate":"Using an in-memory repository. Keys will not be persisted to storage.","message":"Using an in-memory repository. Keys will not be persisted to storage.","fields":{"EventId":{"Id":50,"Name":"UsingInMemoryRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.Repositories.EphemeralXmlRepository"}}
{"@timestamp":"2024-10-10T08:50:52.8978197+00:00","level":"Warning","messageTemplate":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","message":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","fields":{"EventId":{"Id":59,"Name":"UsingEphemeralKeyRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"}}
{"@timestamp":"2024-10-10T08:50:52.9938317+00:00","level":"Information","messageTemplate":"Creating key {KeyId:B} with creation date {CreationDate:u}, activation date {ActivationDate:u}, and expiration date {ExpirationDate:u}.","message":"Creating key {96275d9e-1a46-4742-a1ad-3e42fcf33abb} with creation date 2024-10-10 08:50:52Z, activation date 2024-10-10 08:50:52Z, and expiration date 2025-01-08 08:50:52Z.","fields":{"KeyId":"96275d9e-1a46-4742-a1ad-3e42fcf33abb","CreationDate":"2024-10-10T08:50:52.9913141+00:00","ActivationDate":"2024-10-10T08:50:52.9882701+00:00","ExpirationDate":"2025-01-08T08:50:52.9882701+00:00","EventId":{"Id":58,"Name":"CreatingKey"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{96275d9e-1a46-4742-a1ad-3e42fcf33abb}"}],"CreationDate":[{"Format":"u","Rendering":"2024-10-10 08:50:52Z"}],"ActivationDate":[{"Format":"u","Rendering":"2024-10-10 08:50:52Z"}],"ExpirationDate":[{"Format":"u","Rendering":"2025-01-08 08:50:52Z"}]}}
{"@timestamp":"2024-10-10T08:50:53.0102298+00:00","level":"Warning","messageTemplate":"No XML encryptor configured. Key {KeyId:B} may be persisted to storage in unencrypted form.","message":"No XML encryptor configured. Key {96275d9e-1a46-4742-a1ad-3e42fcf33abb} may be persisted to storage in unencrypted form.","fields":{"KeyId":"96275d9e-1a46-4742-a1ad-3e42fcf33abb","EventId":{"Id":35,"Name":"NoXMLEncryptorConfiguredKeyMayBePersistedToStorageInUnencryptedForm"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{96275d9e-1a46-4742-a1ad-3e42fcf33abb}"}]}}
{"@timestamp":"2024-10-10T08:50:53.1050753+00:00","level":"Information","messageTemplate":"Bus started: {HostAddress}","message":"Bus started: loopback://localhost/","fields":{"HostAddress":"loopback://localhost/","SourceContext":"MassTransit"}}
{"@timestamp":"2024-10-10T08:50:53.4403980+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"http://[::]:8080\"","fields":{"address":"http://[::]:8080","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:50:53.4413466+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"https://[::]:8081\"","fields":{"address":"https://[::]:8081","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:50:53.4427170+00:00","level":"Information","messageTemplate":"Application started. Press Ctrl+C to shut down.","message":"Application started. Press Ctrl+C to shut down.","fields":{"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:50:53.4441789+00:00","level":"Information","messageTemplate":"Hosting environment: {EnvName}","message":"Hosting environment: \"Development\"","fields":{"EnvName":"Development","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:50:53.4448826+00:00","level":"Information","messageTemplate":"Content root path: {ContentRoot}","message":"Content root path: \"/app\"","fields":{"ContentRoot":"/app","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:51:00.3344209+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN7912L0HBUN:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7912L0HBUN"}}
{"@timestamp":"2024-10-10T08:51:00.4190352+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN7912L0HBUN:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7912L0HBUN"}}
{"@timestamp":"2024-10-10T08:51:00.4874891+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN7912L0HBUO:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7912L0HBUO"}}
{"@timestamp":"2024-10-10T08:51:00.4860169+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 204 null null 151.2542ms","fields":{"ElapsedMilliseconds":151.2542,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.0","Method":"OPTIONS","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN7912L0HBUN:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7912L0HBUN"}}
{"@timestamp":"2024-10-10T08:51:00.4978507+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN7912L0HBUO:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7912L0HBUO"}}
{"@timestamp":"2024-10-10T08:51:00.7163848+00:00","level":"Information","messageTemplate":"Failed to validate the token.","message":"Failed to validate the token.","exceptions":[{"Depth":0,"ClassName":"Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException","Message":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:50:22', Current time (UTC): '10/10/2024 08:51:00'.","Source":"Microsoft.IdentityModel.Tokens","StackTraceString":"   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)","RemoteStackTraceString":null,"RemoteStackIndex":0,"HResult":-2146233088,"HelpURL":null}],"fields":{"EventId":{"Id":1,"Name":"TokenValidationFailed"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN7912L0HBUO:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7912L0HBUO"}}
{"@timestamp":"2024-10-10T08:51:00.7831555+00:00","level":"Information","messageTemplate":"{AuthenticationScheme} was not authenticated. Failure message: {FailureMessage}","message":"\"Bearer\" was not authenticated. Failure message: \"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:50:22', Current time (UTC): '10/10/2024 08:51:00'.\"","fields":{"AuthenticationScheme":"Bearer","FailureMessage":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:50:22', Current time (UTC): '10/10/2024 08:51:00'.","EventId":{"Id":7,"Name":"AuthenticationSchemeNotAuthenticatedWithFailure"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN7912L0HBUO:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7912L0HBUO"}}
{"@timestamp":"2024-10-10T08:51:00.7899601+00:00","level":"Information","messageTemplate":"Executing endpoint '{EndpointName}'","message":"Executing endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN7912L0HBUO:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7912L0HBUO"}}
{"@timestamp":"2024-10-10T08:51:00.8338368+00:00","level":"Information","messageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","message":"Route matched with \"{action = \\\"Refresh\\\", controller = \\\"Token\\\"}\". Executing controller action with signature \"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()\" on controller \"Modsen.Server.Authentication.Api.Controllers.TokenController\" (\"Modsen.Server.Authentication.Api\").","fields":{"RouteData":"{action = \"Refresh\", controller = \"Token\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()","Controller":"Modsen.Server.Authentication.Api.Controllers.TokenController","AssemblyName":"Modsen.Server.Authentication.Api","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"07a28ab0-2056-4103-857f-914800ad5310","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN7912L0HBUO:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7912L0HBUO"}}
{"@timestamp":"2024-10-10T08:51:02.3330507+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"17\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT 1\"","fields":{"elapsed":"17","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"07a28ab0-2056-4103-857f-914800ad5310","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN7912L0HBUO:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7912L0HBUO"}}
{"@timestamp":"2024-10-10T08:51:02.3592234+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"13\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0\"","fields":{"elapsed":"13","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"07a28ab0-2056-4103-857f-914800ad5310","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN7912L0HBUO:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7912L0HBUO"}}
{"@timestamp":"2024-10-10T08:51:02.7176050+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"40\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"40","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"07a28ab0-2056-4103-857f-914800ad5310","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN7912L0HBUO:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7912L0HBUO"}}
{"@timestamp":"2024-10-10T08:51:02.8289153+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"10\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"10","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"07a28ab0-2056-4103-857f-914800ad5310","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN7912L0HBUO:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7912L0HBUO"}}
{"@timestamp":"2024-10-10T08:51:02.9400651+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"10\"ms) [Parameters=[\"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;\"","fields":{"elapsed":"10","parameters":"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"07a28ab0-2056-4103-857f-914800ad5310","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN7912L0HBUO:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7912L0HBUO"}}
{"@timestamp":"2024-10-10T08:51:02.9532771+00:00","level":"Information","messageTemplate":"User refresh token","message":"User refresh token","fields":{"SourceContext":"Modsen.Server.Authentication.Application.Features.ApplicationUser.CommandHandlers.RefreshTokenHandler","ActionId":"07a28ab0-2056-4103-857f-914800ad5310","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN7912L0HBUO:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7912L0HBUO"}}
{"@timestamp":"2024-10-10T08:51:02.9719711+00:00","level":"Information","messageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","message":"Executing \"OkObjectResult\", writing value of type '\"System.String\"'.","fields":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"07a28ab0-2056-4103-857f-914800ad5310","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN7912L0HBUO:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7912L0HBUO"}}
{"@timestamp":"2024-10-10T08:51:02.9790921+00:00","level":"Information","messageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","message":"Executed action \"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\" in 2139.4674ms","fields":{"ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","ElapsedMilliseconds":2139.4674,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HN7912L0HBUO:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7912L0HBUO"}}
{"@timestamp":"2024-10-10T08:51:02.9808336+00:00","level":"Information","messageTemplate":"Executed endpoint '{EndpointName}'","message":"Executed endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN7912L0HBUO:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7912L0HBUO"}}
{"@timestamp":"2024-10-10T08:51:02.9898963+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 200 null \"text/plain; charset=utf-8\" 2502.4107ms","fields":{"ElapsedMilliseconds":2502.4107,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.0","Method":"GET","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN7912L0HBUO:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7912L0HBUO"}}
{"@timestamp":"2024-10-10T08:51:03.0012576+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN7912L0HBUP:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7912L0HBUP"}}
{"@timestamp":"2024-10-10T08:51:03.0039425+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN7912L0HBUP:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7912L0HBUP"}}
{"@timestamp":"2024-10-10T08:51:03.0071837+00:00","level":"Information","messageTemplate":"Failed to validate the token.","message":"Failed to validate the token.","exceptions":[{"Depth":0,"ClassName":"Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException","Message":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:50:22', Current time (UTC): '10/10/2024 08:51:03'.","Source":"Microsoft.IdentityModel.Tokens","StackTraceString":"   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)","RemoteStackTraceString":null,"RemoteStackIndex":0,"HResult":-2146233088,"HelpURL":null}],"fields":{"EventId":{"Id":1,"Name":"TokenValidationFailed"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN7912L0HBUP:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7912L0HBUP"}}
{"@timestamp":"2024-10-10T08:51:03.0088276+00:00","level":"Information","messageTemplate":"{AuthenticationScheme} was not authenticated. Failure message: {FailureMessage}","message":"\"Bearer\" was not authenticated. Failure message: \"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:50:22', Current time (UTC): '10/10/2024 08:51:03'.\"","fields":{"AuthenticationScheme":"Bearer","FailureMessage":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:50:22', Current time (UTC): '10/10/2024 08:51:03'.","EventId":{"Id":7,"Name":"AuthenticationSchemeNotAuthenticatedWithFailure"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN7912L0HBUP:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7912L0HBUP"}}
{"@timestamp":"2024-10-10T08:51:03.0100045+00:00","level":"Information","messageTemplate":"Executing endpoint '{EndpointName}'","message":"Executing endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN7912L0HBUP:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7912L0HBUP"}}
{"@timestamp":"2024-10-10T08:51:03.0120102+00:00","level":"Information","messageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","message":"Route matched with \"{action = \\\"Refresh\\\", controller = \\\"Token\\\"}\". Executing controller action with signature \"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()\" on controller \"Modsen.Server.Authentication.Api.Controllers.TokenController\" (\"Modsen.Server.Authentication.Api\").","fields":{"RouteData":"{action = \"Refresh\", controller = \"Token\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()","Controller":"Modsen.Server.Authentication.Api.Controllers.TokenController","AssemblyName":"Modsen.Server.Authentication.Api","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"07a28ab0-2056-4103-857f-914800ad5310","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN7912L0HBUP:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7912L0HBUP"}}
{"@timestamp":"2024-10-10T08:51:03.0338846+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"1\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT 1\"","fields":{"elapsed":"1","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"07a28ab0-2056-4103-857f-914800ad5310","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN7912L0HBUP:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7912L0HBUP"}}
{"@timestamp":"2024-10-10T08:51:03.0368044+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"2\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0\"","fields":{"elapsed":"2","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"07a28ab0-2056-4103-857f-914800ad5310","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN7912L0HBUP:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7912L0HBUP"}}
{"@timestamp":"2024-10-10T08:51:03.0500559+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"3\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"3","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"07a28ab0-2056-4103-857f-914800ad5310","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN7912L0HBUP:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7912L0HBUP"}}
{"@timestamp":"2024-10-10T08:51:03.1164188+00:00","level":"Error","messageTemplate":"User has invalid refresh token","message":"User has invalid refresh token","fields":{"SourceContext":"Modsen.Server.Authentication.Application.Features.ApplicationUser.CommandHandlers.RefreshTokenHandler","ActionId":"07a28ab0-2056-4103-857f-914800ad5310","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN7912L0HBUP:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7912L0HBUP"}}
{"@timestamp":"2024-10-10T08:51:03.2826146+00:00","level":"Information","messageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","message":"Executed action \"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\" in 269.4268ms","fields":{"ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","ElapsedMilliseconds":269.4268,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HN7912L0HBUP:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7912L0HBUP"}}
{"@timestamp":"2024-10-10T08:51:03.2838914+00:00","level":"Information","messageTemplate":"Executed endpoint '{EndpointName}'","message":"Executed endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN7912L0HBUP:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7912L0HBUP"}}
{"@timestamp":"2024-10-10T08:51:03.4391478+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 400 null \"application/json\" 437.9037ms","fields":{"ElapsedMilliseconds":437.9037,"StatusCode":400,"ContentType":"application/json","ContentLength":null,"Protocol":"HTTP/1.0","Method":"GET","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN7912L0HBUP:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7912L0HBUP"}}
{"@timestamp":"2024-10-10T08:52:47.2437846+00:00","level":"Warning","messageTemplate":"Using an in-memory repository. Keys will not be persisted to storage.","message":"Using an in-memory repository. Keys will not be persisted to storage.","fields":{"EventId":{"Id":50,"Name":"UsingInMemoryRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.Repositories.EphemeralXmlRepository"}}
{"@timestamp":"2024-10-10T08:52:47.2930743+00:00","level":"Warning","messageTemplate":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","message":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","fields":{"EventId":{"Id":59,"Name":"UsingEphemeralKeyRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"}}
{"@timestamp":"2024-10-10T08:52:47.3947218+00:00","level":"Information","messageTemplate":"Creating key {KeyId:B} with creation date {CreationDate:u}, activation date {ActivationDate:u}, and expiration date {ExpirationDate:u}.","message":"Creating key {2ff0e436-6648-4a1c-a1b9-f99405af62e0} with creation date 2024-10-10 08:52:47Z, activation date 2024-10-10 08:52:47Z, and expiration date 2025-01-08 08:52:47Z.","fields":{"KeyId":"2ff0e436-6648-4a1c-a1b9-f99405af62e0","CreationDate":"2024-10-10T08:52:47.3923437+00:00","ActivationDate":"2024-10-10T08:52:47.3895740+00:00","ExpirationDate":"2025-01-08T08:52:47.3895740+00:00","EventId":{"Id":58,"Name":"CreatingKey"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{2ff0e436-6648-4a1c-a1b9-f99405af62e0}"}],"CreationDate":[{"Format":"u","Rendering":"2024-10-10 08:52:47Z"}],"ActivationDate":[{"Format":"u","Rendering":"2024-10-10 08:52:47Z"}],"ExpirationDate":[{"Format":"u","Rendering":"2025-01-08 08:52:47Z"}]}}
{"@timestamp":"2024-10-10T08:52:47.4116181+00:00","level":"Warning","messageTemplate":"No XML encryptor configured. Key {KeyId:B} may be persisted to storage in unencrypted form.","message":"No XML encryptor configured. Key {2ff0e436-6648-4a1c-a1b9-f99405af62e0} may be persisted to storage in unencrypted form.","fields":{"KeyId":"2ff0e436-6648-4a1c-a1b9-f99405af62e0","EventId":{"Id":35,"Name":"NoXMLEncryptorConfiguredKeyMayBePersistedToStorageInUnencryptedForm"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{2ff0e436-6648-4a1c-a1b9-f99405af62e0}"}]}}
{"@timestamp":"2024-10-10T08:52:47.5127327+00:00","level":"Information","messageTemplate":"Bus started: {HostAddress}","message":"Bus started: loopback://localhost/","fields":{"HostAddress":"loopback://localhost/","SourceContext":"MassTransit"}}
{"@timestamp":"2024-10-10T08:52:47.8155703+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"http://[::]:8080\"","fields":{"address":"http://[::]:8080","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:52:47.8163661+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"https://[::]:8081\"","fields":{"address":"https://[::]:8081","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:52:47.8181798+00:00","level":"Information","messageTemplate":"Application started. Press Ctrl+C to shut down.","message":"Application started. Press Ctrl+C to shut down.","fields":{"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:52:47.8189960+00:00","level":"Information","messageTemplate":"Hosting environment: {EnvName}","message":"Hosting environment: \"Development\"","fields":{"EnvName":"Development","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:52:47.8197003+00:00","level":"Information","messageTemplate":"Content root path: {ContentRoot}","message":"Content root path: \"/app\"","fields":{"ContentRoot":"/app","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:52:57.2418709+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN7913NSJ21K:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7913NSJ21K"}}
{"@timestamp":"2024-10-10T08:52:57.2812605+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN7913NSJ21K:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7913NSJ21K"}}
{"@timestamp":"2024-10-10T08:52:57.2953708+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 204 null null 55.4666ms","fields":{"ElapsedMilliseconds":55.4666,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.0","Method":"OPTIONS","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN7913NSJ21K:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7913NSJ21K"}}
{"@timestamp":"2024-10-10T08:52:57.3032134+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN7913NSJ21L:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7913NSJ21L"}}
{"@timestamp":"2024-10-10T08:52:57.3108345+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN7913NSJ21L:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7913NSJ21L"}}
{"@timestamp":"2024-10-10T08:52:57.4439335+00:00","level":"Information","messageTemplate":"Failed to validate the token.","message":"Failed to validate the token.","exceptions":[{"Depth":0,"ClassName":"Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException","Message":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:52:02', Current time (UTC): '10/10/2024 08:52:57'.","Source":"Microsoft.IdentityModel.Tokens","StackTraceString":"   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)","RemoteStackTraceString":null,"RemoteStackIndex":0,"HResult":-2146233088,"HelpURL":null}],"fields":{"EventId":{"Id":1,"Name":"TokenValidationFailed"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN7913NSJ21L:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7913NSJ21L"}}
{"@timestamp":"2024-10-10T08:52:57.4938085+00:00","level":"Information","messageTemplate":"{AuthenticationScheme} was not authenticated. Failure message: {FailureMessage}","message":"\"Bearer\" was not authenticated. Failure message: \"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:52:02', Current time (UTC): '10/10/2024 08:52:57'.\"","fields":{"AuthenticationScheme":"Bearer","FailureMessage":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:52:02', Current time (UTC): '10/10/2024 08:52:57'.","EventId":{"Id":7,"Name":"AuthenticationSchemeNotAuthenticatedWithFailure"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN7913NSJ21L:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7913NSJ21L"}}
{"@timestamp":"2024-10-10T08:52:57.4981638+00:00","level":"Information","messageTemplate":"Executing endpoint '{EndpointName}'","message":"Executing endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN7913NSJ21L:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7913NSJ21L"}}
{"@timestamp":"2024-10-10T08:52:57.5178876+00:00","level":"Information","messageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","message":"Route matched with \"{action = \\\"Refresh\\\", controller = \\\"Token\\\"}\". Executing controller action with signature \"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()\" on controller \"Modsen.Server.Authentication.Api.Controllers.TokenController\" (\"Modsen.Server.Authentication.Api\").","fields":{"RouteData":"{action = \"Refresh\", controller = \"Token\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()","Controller":"Modsen.Server.Authentication.Api.Controllers.TokenController","AssemblyName":"Modsen.Server.Authentication.Api","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"4862f4d2-643c-49ff-b440-812c917767fa","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN7913NSJ21L:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7913NSJ21L"}}
{"@timestamp":"2024-10-10T08:52:58.6178951+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"14\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT 1\"","fields":{"elapsed":"14","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"4862f4d2-643c-49ff-b440-812c917767fa","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN7913NSJ21L:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7913NSJ21L"}}
{"@timestamp":"2024-10-10T08:52:58.6388429+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"10\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0\"","fields":{"elapsed":"10","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"4862f4d2-643c-49ff-b440-812c917767fa","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN7913NSJ21L:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7913NSJ21L"}}
{"@timestamp":"2024-10-10T08:52:58.9655488+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"40\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"40","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"4862f4d2-643c-49ff-b440-812c917767fa","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN7913NSJ21L:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7913NSJ21L"}}
{"@timestamp":"2024-10-10T08:52:59.0654018+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"8\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"8","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"4862f4d2-643c-49ff-b440-812c917767fa","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN7913NSJ21L:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7913NSJ21L"}}
{"@timestamp":"2024-10-10T08:52:59.1811933+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"9\"ms) [Parameters=[\"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;\"","fields":{"elapsed":"9","parameters":"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"4862f4d2-643c-49ff-b440-812c917767fa","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN7913NSJ21L:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7913NSJ21L"}}
{"@timestamp":"2024-10-10T08:52:59.1962451+00:00","level":"Information","messageTemplate":"User refresh token","message":"User refresh token","fields":{"SourceContext":"Modsen.Server.Authentication.Application.Features.ApplicationUser.CommandHandlers.RefreshTokenHandler","ActionId":"4862f4d2-643c-49ff-b440-812c917767fa","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN7913NSJ21L:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7913NSJ21L"}}
{"@timestamp":"2024-10-10T08:52:59.2204153+00:00","level":"Information","messageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","message":"Executing \"OkObjectResult\", writing value of type '\"System.String\"'.","fields":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"4862f4d2-643c-49ff-b440-812c917767fa","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN7913NSJ21L:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7913NSJ21L"}}
{"@timestamp":"2024-10-10T08:52:59.2267544+00:00","level":"Information","messageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","message":"Executed action \"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\" in 1705.1338ms","fields":{"ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","ElapsedMilliseconds":1705.1338,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HN7913NSJ21L:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7913NSJ21L"}}
{"@timestamp":"2024-10-10T08:52:59.2284542+00:00","level":"Information","messageTemplate":"Executed endpoint '{EndpointName}'","message":"Executed endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN7913NSJ21L:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7913NSJ21L"}}
{"@timestamp":"2024-10-10T08:52:59.2373731+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 200 null \"text/plain; charset=utf-8\" 1934.102ms","fields":{"ElapsedMilliseconds":1934.102,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.0","Method":"GET","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN7913NSJ21L:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN7913NSJ21L"}}
{"@timestamp":"2024-10-10T08:57:21.2781873+00:00","level":"Warning","messageTemplate":"Using an in-memory repository. Keys will not be persisted to storage.","message":"Using an in-memory repository. Keys will not be persisted to storage.","fields":{"EventId":{"Id":50,"Name":"UsingInMemoryRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.Repositories.EphemeralXmlRepository"}}
{"@timestamp":"2024-10-10T08:57:21.3690230+00:00","level":"Warning","messageTemplate":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","message":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","fields":{"EventId":{"Id":59,"Name":"UsingEphemeralKeyRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"}}
{"@timestamp":"2024-10-10T08:57:21.4735100+00:00","level":"Information","messageTemplate":"Creating key {KeyId:B} with creation date {CreationDate:u}, activation date {ActivationDate:u}, and expiration date {ExpirationDate:u}.","message":"Creating key {89b80429-5bdc-4b6c-ac35-fa27a8da50e3} with creation date 2024-10-10 08:57:21Z, activation date 2024-10-10 08:57:21Z, and expiration date 2025-01-08 08:57:21Z.","fields":{"KeyId":"89b80429-5bdc-4b6c-ac35-fa27a8da50e3","CreationDate":"2024-10-10T08:57:21.4708317+00:00","ActivationDate":"2024-10-10T08:57:21.4681432+00:00","ExpirationDate":"2025-01-08T08:57:21.4681432+00:00","EventId":{"Id":58,"Name":"CreatingKey"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{89b80429-5bdc-4b6c-ac35-fa27a8da50e3}"}],"CreationDate":[{"Format":"u","Rendering":"2024-10-10 08:57:21Z"}],"ActivationDate":[{"Format":"u","Rendering":"2024-10-10 08:57:21Z"}],"ExpirationDate":[{"Format":"u","Rendering":"2025-01-08 08:57:21Z"}]}}
{"@timestamp":"2024-10-10T08:57:21.4906362+00:00","level":"Warning","messageTemplate":"No XML encryptor configured. Key {KeyId:B} may be persisted to storage in unencrypted form.","message":"No XML encryptor configured. Key {89b80429-5bdc-4b6c-ac35-fa27a8da50e3} may be persisted to storage in unencrypted form.","fields":{"KeyId":"89b80429-5bdc-4b6c-ac35-fa27a8da50e3","EventId":{"Id":35,"Name":"NoXMLEncryptorConfiguredKeyMayBePersistedToStorageInUnencryptedForm"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{89b80429-5bdc-4b6c-ac35-fa27a8da50e3}"}]}}
{"@timestamp":"2024-10-10T08:57:21.5792004+00:00","level":"Information","messageTemplate":"Bus started: {HostAddress}","message":"Bus started: loopback://localhost/","fields":{"HostAddress":"loopback://localhost/","SourceContext":"MassTransit"}}
{"@timestamp":"2024-10-10T08:57:21.8780218+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"http://[::]:8080\"","fields":{"address":"http://[::]:8080","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:57:21.8800094+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"https://[::]:8081\"","fields":{"address":"https://[::]:8081","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:57:21.8815249+00:00","level":"Information","messageTemplate":"Application started. Press Ctrl+C to shut down.","message":"Application started. Press Ctrl+C to shut down.","fields":{"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:57:21.8834317+00:00","level":"Information","messageTemplate":"Hosting environment: {EnvName}","message":"Hosting environment: \"Development\"","fields":{"EnvName":"Development","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:57:21.8843740+00:00","level":"Information","messageTemplate":"Content root path: {ContentRoot}","message":"Content root path: \"/app\"","fields":{"ContentRoot":"/app","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T08:57:27.4439742+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN79168D6QIF:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN79168D6QIF"}}
{"@timestamp":"2024-10-10T08:57:27.4897003+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN79168D6QIF:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN79168D6QIF"}}
{"@timestamp":"2024-10-10T08:57:27.5051010+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 204 null null 63.0768ms","fields":{"ElapsedMilliseconds":63.0768,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.0","Method":"OPTIONS","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN79168D6QIF:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN79168D6QIF"}}
{"@timestamp":"2024-10-10T08:57:27.5329929+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN79168D6QIG:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN79168D6QIG"}}
{"@timestamp":"2024-10-10T08:57:27.5410357+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN79168D6QIG:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN79168D6QIG"}}
{"@timestamp":"2024-10-10T08:57:27.6973424+00:00","level":"Information","messageTemplate":"Failed to validate the token.","message":"Failed to validate the token.","exceptions":[{"Depth":0,"ClassName":"Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException","Message":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:53:59', Current time (UTC): '10/10/2024 08:57:27'.","Source":"Microsoft.IdentityModel.Tokens","StackTraceString":"   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)","RemoteStackTraceString":null,"RemoteStackIndex":0,"HResult":-2146233088,"HelpURL":null}],"fields":{"EventId":{"Id":1,"Name":"TokenValidationFailed"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN79168D6QIG:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN79168D6QIG"}}
{"@timestamp":"2024-10-10T08:57:27.7478386+00:00","level":"Information","messageTemplate":"{AuthenticationScheme} was not authenticated. Failure message: {FailureMessage}","message":"\"Bearer\" was not authenticated. Failure message: \"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:53:59', Current time (UTC): '10/10/2024 08:57:27'.\"","fields":{"AuthenticationScheme":"Bearer","FailureMessage":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:53:59', Current time (UTC): '10/10/2024 08:57:27'.","EventId":{"Id":7,"Name":"AuthenticationSchemeNotAuthenticatedWithFailure"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN79168D6QIG:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN79168D6QIG"}}
{"@timestamp":"2024-10-10T08:57:27.7526669+00:00","level":"Information","messageTemplate":"Executing endpoint '{EndpointName}'","message":"Executing endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN79168D6QIG:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN79168D6QIG"}}
{"@timestamp":"2024-10-10T08:57:27.7745484+00:00","level":"Information","messageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","message":"Route matched with \"{action = \\\"Refresh\\\", controller = \\\"Token\\\"}\". Executing controller action with signature \"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()\" on controller \"Modsen.Server.Authentication.Api.Controllers.TokenController\" (\"Modsen.Server.Authentication.Api\").","fields":{"RouteData":"{action = \"Refresh\", controller = \"Token\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()","Controller":"Modsen.Server.Authentication.Api.Controllers.TokenController","AssemblyName":"Modsen.Server.Authentication.Api","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"3b7882c0-fb45-4f8d-b1d9-55185fc5bf17","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN79168D6QIG:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN79168D6QIG"}}
{"@timestamp":"2024-10-10T08:57:29.0017708+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"15\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT 1\"","fields":{"elapsed":"15","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"3b7882c0-fb45-4f8d-b1d9-55185fc5bf17","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN79168D6QIG:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN79168D6QIG"}}
{"@timestamp":"2024-10-10T08:57:29.0221941+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"10\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0\"","fields":{"elapsed":"10","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"3b7882c0-fb45-4f8d-b1d9-55185fc5bf17","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN79168D6QIG:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN79168D6QIG"}}
{"@timestamp":"2024-10-10T08:57:29.4368101+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"72\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"72","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"3b7882c0-fb45-4f8d-b1d9-55185fc5bf17","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN79168D6QIG:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN79168D6QIG"}}
{"@timestamp":"2024-10-10T08:57:29.5450763+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"8\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"8","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"3b7882c0-fb45-4f8d-b1d9-55185fc5bf17","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN79168D6QIG:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN79168D6QIG"}}
{"@timestamp":"2024-10-10T08:57:29.6416870+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"9\"ms) [Parameters=[\"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;\"","fields":{"elapsed":"9","parameters":"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"3b7882c0-fb45-4f8d-b1d9-55185fc5bf17","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN79168D6QIG:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN79168D6QIG"}}
{"@timestamp":"2024-10-10T08:57:29.6555944+00:00","level":"Information","messageTemplate":"User refresh token","message":"User refresh token","fields":{"SourceContext":"Modsen.Server.Authentication.Application.Features.ApplicationUser.CommandHandlers.RefreshTokenHandler","ActionId":"3b7882c0-fb45-4f8d-b1d9-55185fc5bf17","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN79168D6QIG:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN79168D6QIG"}}
{"@timestamp":"2024-10-10T08:57:29.6751245+00:00","level":"Information","messageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","message":"Executing \"OkObjectResult\", writing value of type '\"System.String\"'.","fields":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"3b7882c0-fb45-4f8d-b1d9-55185fc5bf17","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN79168D6QIG:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN79168D6QIG"}}
{"@timestamp":"2024-10-10T08:57:29.6820401+00:00","level":"Information","messageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","message":"Executed action \"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\" in 1903.3465ms","fields":{"ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","ElapsedMilliseconds":1903.3465,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HN79168D6QIG:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN79168D6QIG"}}
{"@timestamp":"2024-10-10T08:57:29.6836049+00:00","level":"Information","messageTemplate":"Executed endpoint '{EndpointName}'","message":"Executed endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN79168D6QIG:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN79168D6QIG"}}
{"@timestamp":"2024-10-10T08:57:29.6925609+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 200 null \"text/plain; charset=utf-8\" 2159.5271ms","fields":{"ElapsedMilliseconds":2159.5271,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.0","Method":"GET","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN79168D6QIG:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN79168D6QIG"}}
{"@timestamp":"2024-10-10T09:02:56.2536302+00:00","level":"Warning","messageTemplate":"Using an in-memory repository. Keys will not be persisted to storage.","message":"Using an in-memory repository. Keys will not be persisted to storage.","fields":{"EventId":{"Id":50,"Name":"UsingInMemoryRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.Repositories.EphemeralXmlRepository"}}
{"@timestamp":"2024-10-10T09:02:56.2943573+00:00","level":"Warning","messageTemplate":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","message":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","fields":{"EventId":{"Id":59,"Name":"UsingEphemeralKeyRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"}}
{"@timestamp":"2024-10-10T09:02:56.3879948+00:00","level":"Information","messageTemplate":"Creating key {KeyId:B} with creation date {CreationDate:u}, activation date {ActivationDate:u}, and expiration date {ExpirationDate:u}.","message":"Creating key {815b2021-25c2-42e8-9762-f3d848f3412d} with creation date 2024-10-10 09:02:56Z, activation date 2024-10-10 09:02:56Z, and expiration date 2025-01-08 09:02:56Z.","fields":{"KeyId":"815b2021-25c2-42e8-9762-f3d848f3412d","CreationDate":"2024-10-10T09:02:56.3851322+00:00","ActivationDate":"2024-10-10T09:02:56.3822042+00:00","ExpirationDate":"2025-01-08T09:02:56.3822042+00:00","EventId":{"Id":58,"Name":"CreatingKey"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{815b2021-25c2-42e8-9762-f3d848f3412d}"}],"CreationDate":[{"Format":"u","Rendering":"2024-10-10 09:02:56Z"}],"ActivationDate":[{"Format":"u","Rendering":"2024-10-10 09:02:56Z"}],"ExpirationDate":[{"Format":"u","Rendering":"2025-01-08 09:02:56Z"}]}}
{"@timestamp":"2024-10-10T09:02:56.4048553+00:00","level":"Warning","messageTemplate":"No XML encryptor configured. Key {KeyId:B} may be persisted to storage in unencrypted form.","message":"No XML encryptor configured. Key {815b2021-25c2-42e8-9762-f3d848f3412d} may be persisted to storage in unencrypted form.","fields":{"KeyId":"815b2021-25c2-42e8-9762-f3d848f3412d","EventId":{"Id":35,"Name":"NoXMLEncryptorConfiguredKeyMayBePersistedToStorageInUnencryptedForm"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{815b2021-25c2-42e8-9762-f3d848f3412d}"}]}}
{"@timestamp":"2024-10-10T09:02:56.5251744+00:00","level":"Information","messageTemplate":"Bus started: {HostAddress}","message":"Bus started: loopback://localhost/","fields":{"HostAddress":"loopback://localhost/","SourceContext":"MassTransit"}}
{"@timestamp":"2024-10-10T09:02:56.8296855+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"http://[::]:8080\"","fields":{"address":"http://[::]:8080","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T09:02:56.8307131+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"https://[::]:8081\"","fields":{"address":"https://[::]:8081","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T09:02:56.8321471+00:00","level":"Information","messageTemplate":"Application started. Press Ctrl+C to shut down.","message":"Application started. Press Ctrl+C to shut down.","fields":{"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T09:02:56.8330044+00:00","level":"Information","messageTemplate":"Hosting environment: {EnvName}","message":"Hosting environment: \"Development\"","fields":{"EnvName":"Development","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T09:02:56.8344394+00:00","level":"Information","messageTemplate":"Content root path: {ContentRoot}","message":"Content root path: \"/app\"","fields":{"ContentRoot":"/app","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T09:04:20.7450208+00:00","level":"Warning","messageTemplate":"Using an in-memory repository. Keys will not be persisted to storage.","message":"Using an in-memory repository. Keys will not be persisted to storage.","fields":{"EventId":{"Id":50,"Name":"UsingInMemoryRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.Repositories.EphemeralXmlRepository"}}
{"@timestamp":"2024-10-10T09:04:20.7861671+00:00","level":"Warning","messageTemplate":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","message":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","fields":{"EventId":{"Id":59,"Name":"UsingEphemeralKeyRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"}}
{"@timestamp":"2024-10-10T09:04:20.8991088+00:00","level":"Information","messageTemplate":"Creating key {KeyId:B} with creation date {CreationDate:u}, activation date {ActivationDate:u}, and expiration date {ExpirationDate:u}.","message":"Creating key {39a835a8-3b41-40b8-a2e9-1765a268ae08} with creation date 2024-10-10 09:04:20Z, activation date 2024-10-10 09:04:20Z, and expiration date 2025-01-08 09:04:20Z.","fields":{"KeyId":"39a835a8-3b41-40b8-a2e9-1765a268ae08","CreationDate":"2024-10-10T09:04:20.8961292+00:00","ActivationDate":"2024-10-10T09:04:20.8922887+00:00","ExpirationDate":"2025-01-08T09:04:20.8922887+00:00","EventId":{"Id":58,"Name":"CreatingKey"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{39a835a8-3b41-40b8-a2e9-1765a268ae08}"}],"CreationDate":[{"Format":"u","Rendering":"2024-10-10 09:04:20Z"}],"ActivationDate":[{"Format":"u","Rendering":"2024-10-10 09:04:20Z"}],"ExpirationDate":[{"Format":"u","Rendering":"2025-01-08 09:04:20Z"}]}}
{"@timestamp":"2024-10-10T09:04:20.9185444+00:00","level":"Warning","messageTemplate":"No XML encryptor configured. Key {KeyId:B} may be persisted to storage in unencrypted form.","message":"No XML encryptor configured. Key {39a835a8-3b41-40b8-a2e9-1765a268ae08} may be persisted to storage in unencrypted form.","fields":{"KeyId":"39a835a8-3b41-40b8-a2e9-1765a268ae08","EventId":{"Id":35,"Name":"NoXMLEncryptorConfiguredKeyMayBePersistedToStorageInUnencryptedForm"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{39a835a8-3b41-40b8-a2e9-1765a268ae08}"}]}}
{"@timestamp":"2024-10-10T09:04:21.0250903+00:00","level":"Information","messageTemplate":"Bus started: {HostAddress}","message":"Bus started: loopback://localhost/","fields":{"HostAddress":"loopback://localhost/","SourceContext":"MassTransit"}}
{"@timestamp":"2024-10-10T09:04:21.3286302+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"http://[::]:8080\"","fields":{"address":"http://[::]:8080","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T09:04:21.3295722+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"https://[::]:8081\"","fields":{"address":"https://[::]:8081","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T09:04:21.3308101+00:00","level":"Information","messageTemplate":"Application started. Press Ctrl+C to shut down.","message":"Application started. Press Ctrl+C to shut down.","fields":{"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T09:04:21.3317117+00:00","level":"Information","messageTemplate":"Hosting environment: {EnvName}","message":"Hosting environment: \"Development\"","fields":{"EnvName":"Development","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T09:04:21.3338774+00:00","level":"Information","messageTemplate":"Content root path: {ContentRoot}","message":"Content root path: \"/app\"","fields":{"ContentRoot":"/app","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T09:06:38.3604936+00:00","level":"Warning","messageTemplate":"Using an in-memory repository. Keys will not be persisted to storage.","message":"Using an in-memory repository. Keys will not be persisted to storage.","fields":{"EventId":{"Id":50,"Name":"UsingInMemoryRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.Repositories.EphemeralXmlRepository"}}
{"@timestamp":"2024-10-10T09:06:38.4009959+00:00","level":"Warning","messageTemplate":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","message":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","fields":{"EventId":{"Id":59,"Name":"UsingEphemeralKeyRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"}}
{"@timestamp":"2024-10-10T09:06:38.4945042+00:00","level":"Information","messageTemplate":"Creating key {KeyId:B} with creation date {CreationDate:u}, activation date {ActivationDate:u}, and expiration date {ExpirationDate:u}.","message":"Creating key {c3d78398-d0d1-4b8d-ad23-26d2347eb08d} with creation date 2024-10-10 09:06:38Z, activation date 2024-10-10 09:06:38Z, and expiration date 2025-01-08 09:06:38Z.","fields":{"KeyId":"c3d78398-d0d1-4b8d-ad23-26d2347eb08d","CreationDate":"2024-10-10T09:06:38.4920466+00:00","ActivationDate":"2024-10-10T09:06:38.4894530+00:00","ExpirationDate":"2025-01-08T09:06:38.4894530+00:00","EventId":{"Id":58,"Name":"CreatingKey"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{c3d78398-d0d1-4b8d-ad23-26d2347eb08d}"}],"CreationDate":[{"Format":"u","Rendering":"2024-10-10 09:06:38Z"}],"ActivationDate":[{"Format":"u","Rendering":"2024-10-10 09:06:38Z"}],"ExpirationDate":[{"Format":"u","Rendering":"2025-01-08 09:06:38Z"}]}}
{"@timestamp":"2024-10-10T09:06:38.5096925+00:00","level":"Warning","messageTemplate":"No XML encryptor configured. Key {KeyId:B} may be persisted to storage in unencrypted form.","message":"No XML encryptor configured. Key {c3d78398-d0d1-4b8d-ad23-26d2347eb08d} may be persisted to storage in unencrypted form.","fields":{"KeyId":"c3d78398-d0d1-4b8d-ad23-26d2347eb08d","EventId":{"Id":35,"Name":"NoXMLEncryptorConfiguredKeyMayBePersistedToStorageInUnencryptedForm"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{c3d78398-d0d1-4b8d-ad23-26d2347eb08d}"}]}}
{"@timestamp":"2024-10-10T09:06:38.6422643+00:00","level":"Information","messageTemplate":"Bus started: {HostAddress}","message":"Bus started: loopback://localhost/","fields":{"HostAddress":"loopback://localhost/","SourceContext":"MassTransit"}}
{"@timestamp":"2024-10-10T09:06:38.9508549+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"http://[::]:8080\"","fields":{"address":"http://[::]:8080","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T09:06:38.9519012+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"https://[::]:8081\"","fields":{"address":"https://[::]:8081","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T09:06:38.9533027+00:00","level":"Information","messageTemplate":"Application started. Press Ctrl+C to shut down.","message":"Application started. Press Ctrl+C to shut down.","fields":{"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T09:06:38.9547457+00:00","level":"Information","messageTemplate":"Hosting environment: {EnvName}","message":"Hosting environment: \"Development\"","fields":{"EnvName":"Development","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T09:06:38.9555453+00:00","level":"Information","messageTemplate":"Content root path: {ContentRoot}","message":"Content root path: \"/app\"","fields":{"ContentRoot":"/app","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T09:07:59.8601923+00:00","level":"Warning","messageTemplate":"Using an in-memory repository. Keys will not be persisted to storage.","message":"Using an in-memory repository. Keys will not be persisted to storage.","fields":{"EventId":{"Id":50,"Name":"UsingInMemoryRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.Repositories.EphemeralXmlRepository"}}
{"@timestamp":"2024-10-10T09:07:59.9036383+00:00","level":"Warning","messageTemplate":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","message":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","fields":{"EventId":{"Id":59,"Name":"UsingEphemeralKeyRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"}}
{"@timestamp":"2024-10-10T09:07:59.9997350+00:00","level":"Information","messageTemplate":"Creating key {KeyId:B} with creation date {CreationDate:u}, activation date {ActivationDate:u}, and expiration date {ExpirationDate:u}.","message":"Creating key {4120758a-c97d-47c8-bc5b-942ea1541be2} with creation date 2024-10-10 09:07:59Z, activation date 2024-10-10 09:07:59Z, and expiration date 2025-01-08 09:07:59Z.","fields":{"KeyId":"4120758a-c97d-47c8-bc5b-942ea1541be2","CreationDate":"2024-10-10T09:07:59.9973460+00:00","ActivationDate":"2024-10-10T09:07:59.9942592+00:00","ExpirationDate":"2025-01-08T09:07:59.9942592+00:00","EventId":{"Id":58,"Name":"CreatingKey"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{4120758a-c97d-47c8-bc5b-942ea1541be2}"}],"CreationDate":[{"Format":"u","Rendering":"2024-10-10 09:07:59Z"}],"ActivationDate":[{"Format":"u","Rendering":"2024-10-10 09:07:59Z"}],"ExpirationDate":[{"Format":"u","Rendering":"2025-01-08 09:07:59Z"}]}}
{"@timestamp":"2024-10-10T09:08:00.0188074+00:00","level":"Warning","messageTemplate":"No XML encryptor configured. Key {KeyId:B} may be persisted to storage in unencrypted form.","message":"No XML encryptor configured. Key {4120758a-c97d-47c8-bc5b-942ea1541be2} may be persisted to storage in unencrypted form.","fields":{"KeyId":"4120758a-c97d-47c8-bc5b-942ea1541be2","EventId":{"Id":35,"Name":"NoXMLEncryptorConfiguredKeyMayBePersistedToStorageInUnencryptedForm"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{4120758a-c97d-47c8-bc5b-942ea1541be2}"}]}}
{"@timestamp":"2024-10-10T09:08:00.1348180+00:00","level":"Information","messageTemplate":"Bus started: {HostAddress}","message":"Bus started: loopback://localhost/","fields":{"HostAddress":"loopback://localhost/","SourceContext":"MassTransit"}}
{"@timestamp":"2024-10-10T09:08:00.4890570+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"http://[::]:8080\"","fields":{"address":"http://[::]:8080","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T09:08:00.4899134+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"https://[::]:8081\"","fields":{"address":"https://[::]:8081","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T09:08:00.4912945+00:00","level":"Information","messageTemplate":"Application started. Press Ctrl+C to shut down.","message":"Application started. Press Ctrl+C to shut down.","fields":{"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T09:08:00.4926480+00:00","level":"Information","messageTemplate":"Hosting environment: {EnvName}","message":"Hosting environment: \"Development\"","fields":{"EnvName":"Development","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T09:08:00.4934576+00:00","level":"Information","messageTemplate":"Content root path: {ContentRoot}","message":"Content root path: \"/app\"","fields":{"ContentRoot":"/app","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T09:08:44.1426451+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN791CI2DCT2:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791CI2DCT2"}}
{"@timestamp":"2024-10-10T09:08:44.1976783+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN791CI2DCT2:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791CI2DCT2"}}
{"@timestamp":"2024-10-10T09:08:44.2222368+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 204 null null 80.6366ms","fields":{"ElapsedMilliseconds":80.6366,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.0","Method":"OPTIONS","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN791CI2DCT2:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791CI2DCT2"}}
{"@timestamp":"2024-10-10T09:08:44.2520481+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN791CI2DCT3:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791CI2DCT3"}}
{"@timestamp":"2024-10-10T09:08:44.2665484+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN791CI2DCT3:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791CI2DCT3"}}
{"@timestamp":"2024-10-10T09:08:44.4649870+00:00","level":"Information","messageTemplate":"Failed to validate the token.","message":"Failed to validate the token.","exceptions":[{"Depth":0,"ClassName":"Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException","Message":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:58:29', Current time (UTC): '10/10/2024 09:08:44'.","Source":"Microsoft.IdentityModel.Tokens","StackTraceString":"   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)","RemoteStackTraceString":null,"RemoteStackIndex":0,"HResult":-2146233088,"HelpURL":null}],"fields":{"EventId":{"Id":1,"Name":"TokenValidationFailed"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN791CI2DCT3:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791CI2DCT3"}}
{"@timestamp":"2024-10-10T09:08:44.5166809+00:00","level":"Information","messageTemplate":"{AuthenticationScheme} was not authenticated. Failure message: {FailureMessage}","message":"\"Bearer\" was not authenticated. Failure message: \"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:58:29', Current time (UTC): '10/10/2024 09:08:44'.\"","fields":{"AuthenticationScheme":"Bearer","FailureMessage":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 08:58:29', Current time (UTC): '10/10/2024 09:08:44'.","EventId":{"Id":7,"Name":"AuthenticationSchemeNotAuthenticatedWithFailure"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN791CI2DCT3:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791CI2DCT3"}}
{"@timestamp":"2024-10-10T09:08:44.5232590+00:00","level":"Information","messageTemplate":"Executing endpoint '{EndpointName}'","message":"Executing endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN791CI2DCT3:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791CI2DCT3"}}
{"@timestamp":"2024-10-10T09:08:44.5509695+00:00","level":"Information","messageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","message":"Route matched with \"{action = \\\"Refresh\\\", controller = \\\"Token\\\"}\". Executing controller action with signature \"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()\" on controller \"Modsen.Server.Authentication.Api.Controllers.TokenController\" (\"Modsen.Server.Authentication.Api\").","fields":{"RouteData":"{action = \"Refresh\", controller = \"Token\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()","Controller":"Modsen.Server.Authentication.Api.Controllers.TokenController","AssemblyName":"Modsen.Server.Authentication.Api","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"dfe3d7cf-0a32-4c2d-bbba-716fef9d7968","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791CI2DCT3:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791CI2DCT3"}}
{"@timestamp":"2024-10-10T09:08:46.0624543+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"15\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT 1\"","fields":{"elapsed":"15","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"dfe3d7cf-0a32-4c2d-bbba-716fef9d7968","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791CI2DCT3:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791CI2DCT3"}}
{"@timestamp":"2024-10-10T09:08:46.1460944+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"72\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0\"","fields":{"elapsed":"72","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"dfe3d7cf-0a32-4c2d-bbba-716fef9d7968","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791CI2DCT3:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791CI2DCT3"}}
{"@timestamp":"2024-10-10T09:08:46.5060936+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"41\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"41","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"dfe3d7cf-0a32-4c2d-bbba-716fef9d7968","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791CI2DCT3:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791CI2DCT3"}}
{"@timestamp":"2024-10-10T09:08:46.6073261+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"8\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"8","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"dfe3d7cf-0a32-4c2d-bbba-716fef9d7968","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791CI2DCT3:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791CI2DCT3"}}
{"@timestamp":"2024-10-10T09:08:46.7440872+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"42\"ms) [Parameters=[\"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;\"","fields":{"elapsed":"42","parameters":"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"dfe3d7cf-0a32-4c2d-bbba-716fef9d7968","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791CI2DCT3:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791CI2DCT3"}}
{"@timestamp":"2024-10-10T09:08:46.7595241+00:00","level":"Information","messageTemplate":"User refresh token","message":"User refresh token","fields":{"SourceContext":"Modsen.Server.Authentication.Application.Features.ApplicationUser.CommandHandlers.RefreshTokenHandler","ActionId":"dfe3d7cf-0a32-4c2d-bbba-716fef9d7968","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791CI2DCT3:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791CI2DCT3"}}
{"@timestamp":"2024-10-10T09:08:46.7821482+00:00","level":"Information","messageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","message":"Executing \"OkObjectResult\", writing value of type '\"System.String\"'.","fields":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"dfe3d7cf-0a32-4c2d-bbba-716fef9d7968","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791CI2DCT3:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791CI2DCT3"}}
{"@timestamp":"2024-10-10T09:08:46.7902075+00:00","level":"Information","messageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","message":"Executed action \"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\" in 2233.8777ms","fields":{"ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","ElapsedMilliseconds":2233.8777,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HN791CI2DCT3:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791CI2DCT3"}}
{"@timestamp":"2024-10-10T09:08:46.7918940+00:00","level":"Information","messageTemplate":"Executed endpoint '{EndpointName}'","message":"Executed endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN791CI2DCT3:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791CI2DCT3"}}
{"@timestamp":"2024-10-10T09:08:46.8179422+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 200 null \"text/plain; charset=utf-8\" 2565.8497ms","fields":{"ElapsedMilliseconds":2565.8497,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.0","Method":"GET","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN791CI2DCT3:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791CI2DCT3"}}
{"@timestamp":"2024-10-10T09:09:54.7043890+00:00","level":"Warning","messageTemplate":"Using an in-memory repository. Keys will not be persisted to storage.","message":"Using an in-memory repository. Keys will not be persisted to storage.","fields":{"EventId":{"Id":50,"Name":"UsingInMemoryRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.Repositories.EphemeralXmlRepository"}}
{"@timestamp":"2024-10-10T09:09:54.7473769+00:00","level":"Warning","messageTemplate":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","message":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","fields":{"EventId":{"Id":59,"Name":"UsingEphemeralKeyRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"}}
{"@timestamp":"2024-10-10T09:09:54.8540364+00:00","level":"Information","messageTemplate":"Creating key {KeyId:B} with creation date {CreationDate:u}, activation date {ActivationDate:u}, and expiration date {ExpirationDate:u}.","message":"Creating key {88fd5642-f0cd-4a48-9469-dcc523d01ab2} with creation date 2024-10-10 09:09:54Z, activation date 2024-10-10 09:09:54Z, and expiration date 2025-01-08 09:09:54Z.","fields":{"KeyId":"88fd5642-f0cd-4a48-9469-dcc523d01ab2","CreationDate":"2024-10-10T09:09:54.8507136+00:00","ActivationDate":"2024-10-10T09:09:54.8475915+00:00","ExpirationDate":"2025-01-08T09:09:54.8475915+00:00","EventId":{"Id":58,"Name":"CreatingKey"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{88fd5642-f0cd-4a48-9469-dcc523d01ab2}"}],"CreationDate":[{"Format":"u","Rendering":"2024-10-10 09:09:54Z"}],"ActivationDate":[{"Format":"u","Rendering":"2024-10-10 09:09:54Z"}],"ExpirationDate":[{"Format":"u","Rendering":"2025-01-08 09:09:54Z"}]}}
{"@timestamp":"2024-10-10T09:09:54.8710903+00:00","level":"Warning","messageTemplate":"No XML encryptor configured. Key {KeyId:B} may be persisted to storage in unencrypted form.","message":"No XML encryptor configured. Key {88fd5642-f0cd-4a48-9469-dcc523d01ab2} may be persisted to storage in unencrypted form.","fields":{"KeyId":"88fd5642-f0cd-4a48-9469-dcc523d01ab2","EventId":{"Id":35,"Name":"NoXMLEncryptorConfiguredKeyMayBePersistedToStorageInUnencryptedForm"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{88fd5642-f0cd-4a48-9469-dcc523d01ab2}"}]}}
{"@timestamp":"2024-10-10T09:09:54.9649475+00:00","level":"Information","messageTemplate":"Bus started: {HostAddress}","message":"Bus started: loopback://localhost/","fields":{"HostAddress":"loopback://localhost/","SourceContext":"MassTransit"}}
{"@timestamp":"2024-10-10T09:09:55.3243328+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"http://[::]:8080\"","fields":{"address":"http://[::]:8080","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T09:09:55.3255049+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"https://[::]:8081\"","fields":{"address":"https://[::]:8081","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T09:09:55.3266879+00:00","level":"Information","messageTemplate":"Application started. Press Ctrl+C to shut down.","message":"Application started. Press Ctrl+C to shut down.","fields":{"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T09:09:55.3277286+00:00","level":"Information","messageTemplate":"Hosting environment: {EnvName}","message":"Hosting environment: \"Development\"","fields":{"EnvName":"Development","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T09:09:55.3292422+00:00","level":"Information","messageTemplate":"Content root path: {ContentRoot}","message":"Content root path: \"/app\"","fields":{"ContentRoot":"/app","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T09:10:04.3939542+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN791DA0BBEB:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791DA0BBEB"}}
{"@timestamp":"2024-10-10T09:10:04.4324309+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN791DA0BBEB:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791DA0BBEB"}}
{"@timestamp":"2024-10-10T09:10:04.4476989+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 204 null null 55.3972ms","fields":{"ElapsedMilliseconds":55.3972,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.0","Method":"OPTIONS","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN791DA0BBEB:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791DA0BBEB"}}
{"@timestamp":"2024-10-10T09:10:04.4557175+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN791DA0BBEC:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791DA0BBEC"}}
{"@timestamp":"2024-10-10T09:10:04.4627080+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN791DA0BBEC:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791DA0BBEC"}}
{"@timestamp":"2024-10-10T09:10:04.6001023+00:00","level":"Information","messageTemplate":"Failed to validate the token.","message":"Failed to validate the token.","exceptions":[{"Depth":0,"ClassName":"Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException","Message":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 09:09:46', Current time (UTC): '10/10/2024 09:10:04'.","Source":"Microsoft.IdentityModel.Tokens","StackTraceString":"   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)","RemoteStackTraceString":null,"RemoteStackIndex":0,"HResult":-2146233088,"HelpURL":null}],"fields":{"EventId":{"Id":1,"Name":"TokenValidationFailed"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN791DA0BBEC:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791DA0BBEC"}}
{"@timestamp":"2024-10-10T09:10:04.6468933+00:00","level":"Information","messageTemplate":"{AuthenticationScheme} was not authenticated. Failure message: {FailureMessage}","message":"\"Bearer\" was not authenticated. Failure message: \"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 09:09:46', Current time (UTC): '10/10/2024 09:10:04'.\"","fields":{"AuthenticationScheme":"Bearer","FailureMessage":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 09:09:46', Current time (UTC): '10/10/2024 09:10:04'.","EventId":{"Id":7,"Name":"AuthenticationSchemeNotAuthenticatedWithFailure"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN791DA0BBEC:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791DA0BBEC"}}
{"@timestamp":"2024-10-10T09:10:04.6507159+00:00","level":"Information","messageTemplate":"Executing endpoint '{EndpointName}'","message":"Executing endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN791DA0BBEC:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791DA0BBEC"}}
{"@timestamp":"2024-10-10T09:10:04.6695036+00:00","level":"Information","messageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","message":"Route matched with \"{action = \\\"Refresh\\\", controller = \\\"Token\\\"}\". Executing controller action with signature \"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()\" on controller \"Modsen.Server.Authentication.Api.Controllers.TokenController\" (\"Modsen.Server.Authentication.Api\").","fields":{"RouteData":"{action = \"Refresh\", controller = \"Token\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()","Controller":"Modsen.Server.Authentication.Api.Controllers.TokenController","AssemblyName":"Modsen.Server.Authentication.Api","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"760596ec-d341-4a55-ae10-75bd5400fd1a","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791DA0BBEC:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791DA0BBEC"}}
{"@timestamp":"2024-10-10T09:10:05.8110540+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"15\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT 1\"","fields":{"elapsed":"15","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"760596ec-d341-4a55-ae10-75bd5400fd1a","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791DA0BBEC:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791DA0BBEC"}}
{"@timestamp":"2024-10-10T09:10:05.8316076+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"10\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0\"","fields":{"elapsed":"10","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"760596ec-d341-4a55-ae10-75bd5400fd1a","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791DA0BBEC:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791DA0BBEC"}}
{"@timestamp":"2024-10-10T09:10:06.1368155+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"42\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"42","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"760596ec-d341-4a55-ae10-75bd5400fd1a","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791DA0BBEC:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791DA0BBEC"}}
{"@timestamp":"2024-10-10T09:10:06.2334215+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"7\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"7","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"760596ec-d341-4a55-ae10-75bd5400fd1a","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791DA0BBEC:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791DA0BBEC"}}
{"@timestamp":"2024-10-10T09:10:06.3542846+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"9\"ms) [Parameters=[\"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;\"","fields":{"elapsed":"9","parameters":"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"760596ec-d341-4a55-ae10-75bd5400fd1a","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791DA0BBEC:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791DA0BBEC"}}
{"@timestamp":"2024-10-10T09:10:06.3675846+00:00","level":"Information","messageTemplate":"User refresh token","message":"User refresh token","fields":{"SourceContext":"Modsen.Server.Authentication.Application.Features.ApplicationUser.CommandHandlers.RefreshTokenHandler","ActionId":"760596ec-d341-4a55-ae10-75bd5400fd1a","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791DA0BBEC:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791DA0BBEC"}}
{"@timestamp":"2024-10-10T09:10:06.3865401+00:00","level":"Information","messageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","message":"Executing \"OkObjectResult\", writing value of type '\"System.String\"'.","fields":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"760596ec-d341-4a55-ae10-75bd5400fd1a","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791DA0BBEC:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791DA0BBEC"}}
{"@timestamp":"2024-10-10T09:10:06.3935256+00:00","level":"Information","messageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","message":"Executed action \"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\" in 1719.9669ms","fields":{"ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","ElapsedMilliseconds":1719.9669,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HN791DA0BBEC:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791DA0BBEC"}}
{"@timestamp":"2024-10-10T09:10:06.3949234+00:00","level":"Information","messageTemplate":"Executed endpoint '{EndpointName}'","message":"Executed endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN791DA0BBEC:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791DA0BBEC"}}
{"@timestamp":"2024-10-10T09:10:06.4036258+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 200 null \"text/plain; charset=utf-8\" 1947.858ms","fields":{"ElapsedMilliseconds":1947.858,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.0","Method":"GET","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN791DA0BBEC:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791DA0BBEC"}}
{"@timestamp":"2024-10-10T09:11:33.7320848+00:00","level":"Warning","messageTemplate":"Using an in-memory repository. Keys will not be persisted to storage.","message":"Using an in-memory repository. Keys will not be persisted to storage.","fields":{"EventId":{"Id":50,"Name":"UsingInMemoryRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.Repositories.EphemeralXmlRepository"}}
{"@timestamp":"2024-10-10T09:11:33.7806392+00:00","level":"Warning","messageTemplate":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","message":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","fields":{"EventId":{"Id":59,"Name":"UsingEphemeralKeyRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"}}
{"@timestamp":"2024-10-10T09:11:33.8768414+00:00","level":"Information","messageTemplate":"Creating key {KeyId:B} with creation date {CreationDate:u}, activation date {ActivationDate:u}, and expiration date {ExpirationDate:u}.","message":"Creating key {8f112c0c-4dbb-416a-9904-81567918616f} with creation date 2024-10-10 09:11:33Z, activation date 2024-10-10 09:11:33Z, and expiration date 2025-01-08 09:11:33Z.","fields":{"KeyId":"8f112c0c-4dbb-416a-9904-81567918616f","CreationDate":"2024-10-10T09:11:33.8741101+00:00","ActivationDate":"2024-10-10T09:11:33.8712067+00:00","ExpirationDate":"2025-01-08T09:11:33.8712067+00:00","EventId":{"Id":58,"Name":"CreatingKey"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{8f112c0c-4dbb-416a-9904-81567918616f}"}],"CreationDate":[{"Format":"u","Rendering":"2024-10-10 09:11:33Z"}],"ActivationDate":[{"Format":"u","Rendering":"2024-10-10 09:11:33Z"}],"ExpirationDate":[{"Format":"u","Rendering":"2025-01-08 09:11:33Z"}]}}
{"@timestamp":"2024-10-10T09:11:33.8932632+00:00","level":"Warning","messageTemplate":"No XML encryptor configured. Key {KeyId:B} may be persisted to storage in unencrypted form.","message":"No XML encryptor configured. Key {8f112c0c-4dbb-416a-9904-81567918616f} may be persisted to storage in unencrypted form.","fields":{"KeyId":"8f112c0c-4dbb-416a-9904-81567918616f","EventId":{"Id":35,"Name":"NoXMLEncryptorConfiguredKeyMayBePersistedToStorageInUnencryptedForm"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{8f112c0c-4dbb-416a-9904-81567918616f}"}]}}
{"@timestamp":"2024-10-10T09:11:34.0097753+00:00","level":"Information","messageTemplate":"Bus started: {HostAddress}","message":"Bus started: loopback://localhost/","fields":{"HostAddress":"loopback://localhost/","SourceContext":"MassTransit"}}
{"@timestamp":"2024-10-10T09:11:34.3213002+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"http://[::]:8080\"","fields":{"address":"http://[::]:8080","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T09:11:34.3223207+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"https://[::]:8081\"","fields":{"address":"https://[::]:8081","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T09:11:34.3237035+00:00","level":"Information","messageTemplate":"Application started. Press Ctrl+C to shut down.","message":"Application started. Press Ctrl+C to shut down.","fields":{"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T09:11:34.3245953+00:00","level":"Information","messageTemplate":"Hosting environment: {EnvName}","message":"Hosting environment: \"Development\"","fields":{"EnvName":"Development","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T09:11:34.3254885+00:00","level":"Information","messageTemplate":"Content root path: {ContentRoot}","message":"Content root path: \"/app\"","fields":{"ContentRoot":"/app","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T09:11:37.4403889+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN791E5NE04M:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791E5NE04M"}}
{"@timestamp":"2024-10-10T09:11:37.4881669+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN791E5NE04M:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791E5NE04M"}}
{"@timestamp":"2024-10-10T09:11:37.5046100+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 204 null null 65.8214ms","fields":{"ElapsedMilliseconds":65.8214,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.0","Method":"OPTIONS","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN791E5NE04M:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791E5NE04M"}}
{"@timestamp":"2024-10-10T09:11:37.5138120+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN791E5NE04N:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791E5NE04N"}}
{"@timestamp":"2024-10-10T09:11:37.5224099+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN791E5NE04N:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791E5NE04N"}}
{"@timestamp":"2024-10-10T09:11:37.7153988+00:00","level":"Information","messageTemplate":"Failed to validate the token.","message":"Failed to validate the token.","exceptions":[{"Depth":0,"ClassName":"Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException","Message":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 09:11:06', Current time (UTC): '10/10/2024 09:11:37'.","Source":"Microsoft.IdentityModel.Tokens","StackTraceString":"   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)","RemoteStackTraceString":null,"RemoteStackIndex":0,"HResult":-2146233088,"HelpURL":null}],"fields":{"EventId":{"Id":1,"Name":"TokenValidationFailed"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN791E5NE04N:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791E5NE04N"}}
{"@timestamp":"2024-10-10T09:11:37.7664009+00:00","level":"Information","messageTemplate":"{AuthenticationScheme} was not authenticated. Failure message: {FailureMessage}","message":"\"Bearer\" was not authenticated. Failure message: \"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 09:11:06', Current time (UTC): '10/10/2024 09:11:37'.\"","fields":{"AuthenticationScheme":"Bearer","FailureMessage":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 09:11:06', Current time (UTC): '10/10/2024 09:11:37'.","EventId":{"Id":7,"Name":"AuthenticationSchemeNotAuthenticatedWithFailure"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN791E5NE04N:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791E5NE04N"}}
{"@timestamp":"2024-10-10T09:11:37.7720480+00:00","level":"Information","messageTemplate":"Executing endpoint '{EndpointName}'","message":"Executing endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN791E5NE04N:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791E5NE04N"}}
{"@timestamp":"2024-10-10T09:11:37.7924562+00:00","level":"Information","messageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","message":"Route matched with \"{action = \\\"Refresh\\\", controller = \\\"Token\\\"}\". Executing controller action with signature \"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()\" on controller \"Modsen.Server.Authentication.Api.Controllers.TokenController\" (\"Modsen.Server.Authentication.Api\").","fields":{"RouteData":"{action = \"Refresh\", controller = \"Token\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()","Controller":"Modsen.Server.Authentication.Api.Controllers.TokenController","AssemblyName":"Modsen.Server.Authentication.Api","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"5d846122-d41d-4024-b099-83c70c123f50","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791E5NE04N:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791E5NE04N"}}
{"@timestamp":"2024-10-10T09:11:39.1116383+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"17\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT 1\"","fields":{"elapsed":"17","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"5d846122-d41d-4024-b099-83c70c123f50","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791E5NE04N:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791E5NE04N"}}
{"@timestamp":"2024-10-10T09:11:39.1353661+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"12\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0\"","fields":{"elapsed":"12","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"5d846122-d41d-4024-b099-83c70c123f50","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791E5NE04N:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791E5NE04N"}}
{"@timestamp":"2024-10-10T09:11:39.6050521+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"45\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"45","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"5d846122-d41d-4024-b099-83c70c123f50","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791E5NE04N:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791E5NE04N"}}
{"@timestamp":"2024-10-10T09:11:39.7290895+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"29\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"29","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"5d846122-d41d-4024-b099-83c70c123f50","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791E5NE04N:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791E5NE04N"}}
{"@timestamp":"2024-10-10T09:11:39.8391427+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"16\"ms) [Parameters=[\"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;\"","fields":{"elapsed":"16","parameters":"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"5d846122-d41d-4024-b099-83c70c123f50","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791E5NE04N:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791E5NE04N"}}
{"@timestamp":"2024-10-10T09:11:39.8521243+00:00","level":"Information","messageTemplate":"User refresh token","message":"User refresh token","fields":{"SourceContext":"Modsen.Server.Authentication.Application.Features.ApplicationUser.CommandHandlers.RefreshTokenHandler","ActionId":"5d846122-d41d-4024-b099-83c70c123f50","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791E5NE04N:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791E5NE04N"}}
{"@timestamp":"2024-10-10T09:11:39.8711055+00:00","level":"Information","messageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","message":"Executing \"OkObjectResult\", writing value of type '\"System.String\"'.","fields":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"5d846122-d41d-4024-b099-83c70c123f50","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791E5NE04N:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791E5NE04N"}}
{"@timestamp":"2024-10-10T09:11:39.8777128+00:00","level":"Information","messageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","message":"Executed action \"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\" in 2081.5504ms","fields":{"ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","ElapsedMilliseconds":2081.5504,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HN791E5NE04N:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791E5NE04N"}}
{"@timestamp":"2024-10-10T09:11:39.8792915+00:00","level":"Information","messageTemplate":"Executed endpoint '{EndpointName}'","message":"Executed endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN791E5NE04N:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791E5NE04N"}}
{"@timestamp":"2024-10-10T09:11:39.8885671+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 200 null \"text/plain; charset=utf-8\" 2374.6276ms","fields":{"ElapsedMilliseconds":2374.6276,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.0","Method":"GET","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN791E5NE04N:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791E5NE04N"}}
{"@timestamp":"2024-10-10T09:11:39.9069377+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN791E5NE04O:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791E5NE04O"}}
{"@timestamp":"2024-10-10T09:11:39.9102614+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN791E5NE04O:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791E5NE04O"}}
{"@timestamp":"2024-10-10T09:11:39.9140348+00:00","level":"Information","messageTemplate":"Failed to validate the token.","message":"Failed to validate the token.","exceptions":[{"Depth":0,"ClassName":"Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException","Message":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 09:11:06', Current time (UTC): '10/10/2024 09:11:39'.","Source":"Microsoft.IdentityModel.Tokens","StackTraceString":"   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)","RemoteStackTraceString":null,"RemoteStackIndex":0,"HResult":-2146233088,"HelpURL":null}],"fields":{"EventId":{"Id":1,"Name":"TokenValidationFailed"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN791E5NE04O:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791E5NE04O"}}
{"@timestamp":"2024-10-10T09:11:39.9159241+00:00","level":"Information","messageTemplate":"{AuthenticationScheme} was not authenticated. Failure message: {FailureMessage}","message":"\"Bearer\" was not authenticated. Failure message: \"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 09:11:06', Current time (UTC): '10/10/2024 09:11:39'.\"","fields":{"AuthenticationScheme":"Bearer","FailureMessage":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 09:11:06', Current time (UTC): '10/10/2024 09:11:39'.","EventId":{"Id":7,"Name":"AuthenticationSchemeNotAuthenticatedWithFailure"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN791E5NE04O:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791E5NE04O"}}
{"@timestamp":"2024-10-10T09:11:39.9170342+00:00","level":"Information","messageTemplate":"Executing endpoint '{EndpointName}'","message":"Executing endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN791E5NE04O:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791E5NE04O"}}
{"@timestamp":"2024-10-10T09:11:39.9183693+00:00","level":"Information","messageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","message":"Route matched with \"{action = \\\"Refresh\\\", controller = \\\"Token\\\"}\". Executing controller action with signature \"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()\" on controller \"Modsen.Server.Authentication.Api.Controllers.TokenController\" (\"Modsen.Server.Authentication.Api\").","fields":{"RouteData":"{action = \"Refresh\", controller = \"Token\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()","Controller":"Modsen.Server.Authentication.Api.Controllers.TokenController","AssemblyName":"Modsen.Server.Authentication.Api","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"5d846122-d41d-4024-b099-83c70c123f50","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791E5NE04O:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791E5NE04O"}}
{"@timestamp":"2024-10-10T09:11:39.9413169+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"1\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT 1\"","fields":{"elapsed":"1","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"5d846122-d41d-4024-b099-83c70c123f50","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791E5NE04O:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791E5NE04O"}}
{"@timestamp":"2024-10-10T09:11:39.9440663+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"1\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0\"","fields":{"elapsed":"1","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"5d846122-d41d-4024-b099-83c70c123f50","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791E5NE04O:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791E5NE04O"}}
{"@timestamp":"2024-10-10T09:11:40.0162071+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"43\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"43","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"5d846122-d41d-4024-b099-83c70c123f50","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791E5NE04O:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791E5NE04O"}}
{"@timestamp":"2024-10-10T09:11:40.1045810+00:00","level":"Error","messageTemplate":"User has invalid refresh token","message":"User has invalid refresh token","fields":{"SourceContext":"Modsen.Server.Authentication.Application.Features.ApplicationUser.CommandHandlers.RefreshTokenHandler","ActionId":"5d846122-d41d-4024-b099-83c70c123f50","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791E5NE04O:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791E5NE04O"}}
{"@timestamp":"2024-10-10T09:11:40.2124981+00:00","level":"Information","messageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","message":"Executed action \"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\" in 292.575ms","fields":{"ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","ElapsedMilliseconds":292.575,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HN791E5NE04O:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791E5NE04O"}}
{"@timestamp":"2024-10-10T09:11:40.2140408+00:00","level":"Information","messageTemplate":"Executed endpoint '{EndpointName}'","message":"Executed endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN791E5NE04O:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791E5NE04O"}}
{"@timestamp":"2024-10-10T09:11:40.3702872+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 400 null \"application/json\" 463.3585ms","fields":{"ElapsedMilliseconds":463.3585,"StatusCode":400,"ContentType":"application/json","ContentLength":null,"Protocol":"HTTP/1.0","Method":"GET","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN791E5NE04O:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791E5NE04O"}}
{"@timestamp":"2024-10-10T09:12:36.4159589+00:00","level":"Warning","messageTemplate":"Using an in-memory repository. Keys will not be persisted to storage.","message":"Using an in-memory repository. Keys will not be persisted to storage.","fields":{"EventId":{"Id":50,"Name":"UsingInMemoryRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.Repositories.EphemeralXmlRepository"}}
{"@timestamp":"2024-10-10T09:12:36.4592281+00:00","level":"Warning","messageTemplate":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","message":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","fields":{"EventId":{"Id":59,"Name":"UsingEphemeralKeyRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"}}
{"@timestamp":"2024-10-10T09:12:36.5579357+00:00","level":"Information","messageTemplate":"Creating key {KeyId:B} with creation date {CreationDate:u}, activation date {ActivationDate:u}, and expiration date {ExpirationDate:u}.","message":"Creating key {212644a2-731a-4ff2-9824-4c54ac9cf930} with creation date 2024-10-10 09:12:36Z, activation date 2024-10-10 09:12:36Z, and expiration date 2025-01-08 09:12:36Z.","fields":{"KeyId":"212644a2-731a-4ff2-9824-4c54ac9cf930","CreationDate":"2024-10-10T09:12:36.5552517+00:00","ActivationDate":"2024-10-10T09:12:36.5526796+00:00","ExpirationDate":"2025-01-08T09:12:36.5526796+00:00","EventId":{"Id":58,"Name":"CreatingKey"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{212644a2-731a-4ff2-9824-4c54ac9cf930}"}],"CreationDate":[{"Format":"u","Rendering":"2024-10-10 09:12:36Z"}],"ActivationDate":[{"Format":"u","Rendering":"2024-10-10 09:12:36Z"}],"ExpirationDate":[{"Format":"u","Rendering":"2025-01-08 09:12:36Z"}]}}
{"@timestamp":"2024-10-10T09:12:36.5742240+00:00","level":"Warning","messageTemplate":"No XML encryptor configured. Key {KeyId:B} may be persisted to storage in unencrypted form.","message":"No XML encryptor configured. Key {212644a2-731a-4ff2-9824-4c54ac9cf930} may be persisted to storage in unencrypted form.","fields":{"KeyId":"212644a2-731a-4ff2-9824-4c54ac9cf930","EventId":{"Id":35,"Name":"NoXMLEncryptorConfiguredKeyMayBePersistedToStorageInUnencryptedForm"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{212644a2-731a-4ff2-9824-4c54ac9cf930}"}]}}
{"@timestamp":"2024-10-10T09:12:36.7129055+00:00","level":"Information","messageTemplate":"Bus started: {HostAddress}","message":"Bus started: loopback://localhost/","fields":{"HostAddress":"loopback://localhost/","SourceContext":"MassTransit"}}
{"@timestamp":"2024-10-10T09:12:37.0449290+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"http://[::]:8080\"","fields":{"address":"http://[::]:8080","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T09:12:37.0460889+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"https://[::]:8081\"","fields":{"address":"https://[::]:8081","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T09:12:37.0474064+00:00","level":"Information","messageTemplate":"Application started. Press Ctrl+C to shut down.","message":"Application started. Press Ctrl+C to shut down.","fields":{"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T09:12:37.0485103+00:00","level":"Information","messageTemplate":"Hosting environment: {EnvName}","message":"Hosting environment: \"Development\"","fields":{"EnvName":"Development","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T09:12:37.0501794+00:00","level":"Information","messageTemplate":"Content root path: {ContentRoot}","message":"Content root path: \"/app\"","fields":{"ContentRoot":"/app","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-10T09:12:39.6671486+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN791EO8SH5Q:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH5Q"}}
{"@timestamp":"2024-10-10T09:12:39.7147902+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN791EO8SH5Q:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH5Q"}}
{"@timestamp":"2024-10-10T09:12:39.7343451+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 204 null null 69.8001ms","fields":{"ElapsedMilliseconds":69.8001,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.0","Method":"OPTIONS","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN791EO8SH5Q:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH5Q"}}
{"@timestamp":"2024-10-10T09:12:39.7402744+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN791EO8SH5R:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH5R"}}
{"@timestamp":"2024-10-10T09:12:39.7500856+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN791EO8SH5R:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH5R"}}
{"@timestamp":"2024-10-10T09:12:39.9258440+00:00","level":"Information","messageTemplate":"Failed to validate the token.","message":"Failed to validate the token.","exceptions":[{"Depth":0,"ClassName":"Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException","Message":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 09:12:39', Current time (UTC): '10/10/2024 09:12:39'.","Source":"Microsoft.IdentityModel.Tokens","StackTraceString":"   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)","RemoteStackTraceString":null,"RemoteStackIndex":0,"HResult":-2146233088,"HelpURL":null}],"fields":{"EventId":{"Id":1,"Name":"TokenValidationFailed"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN791EO8SH5R:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH5R"}}
{"@timestamp":"2024-10-10T09:12:39.9791337+00:00","level":"Information","messageTemplate":"{AuthenticationScheme} was not authenticated. Failure message: {FailureMessage}","message":"\"Bearer\" was not authenticated. Failure message: \"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 09:12:39', Current time (UTC): '10/10/2024 09:12:39'.\"","fields":{"AuthenticationScheme":"Bearer","FailureMessage":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 09:12:39', Current time (UTC): '10/10/2024 09:12:39'.","EventId":{"Id":7,"Name":"AuthenticationSchemeNotAuthenticatedWithFailure"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN791EO8SH5R:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH5R"}}
{"@timestamp":"2024-10-10T09:12:39.9837360+00:00","level":"Information","messageTemplate":"Executing endpoint '{EndpointName}'","message":"Executing endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN791EO8SH5R:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH5R"}}
{"@timestamp":"2024-10-10T09:12:40.0068872+00:00","level":"Information","messageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","message":"Route matched with \"{action = \\\"Refresh\\\", controller = \\\"Token\\\"}\". Executing controller action with signature \"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()\" on controller \"Modsen.Server.Authentication.Api.Controllers.TokenController\" (\"Modsen.Server.Authentication.Api\").","fields":{"RouteData":"{action = \"Refresh\", controller = \"Token\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()","Controller":"Modsen.Server.Authentication.Api.Controllers.TokenController","AssemblyName":"Modsen.Server.Authentication.Api","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"d41e6a77-9613-45d9-a5a1-61d3dd210a95","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791EO8SH5R:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH5R"}}
{"@timestamp":"2024-10-10T09:12:41.1969109+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"19\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT 1\"","fields":{"elapsed":"19","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"d41e6a77-9613-45d9-a5a1-61d3dd210a95","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791EO8SH5R:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH5R"}}
{"@timestamp":"2024-10-10T09:12:41.2211398+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"11\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0\"","fields":{"elapsed":"11","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"d41e6a77-9613-45d9-a5a1-61d3dd210a95","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791EO8SH5R:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH5R"}}
{"@timestamp":"2024-10-10T09:12:41.6489948+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"55\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"55","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"d41e6a77-9613-45d9-a5a1-61d3dd210a95","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791EO8SH5R:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH5R"}}
{"@timestamp":"2024-10-10T09:12:41.8481683+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"9\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"9","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"d41e6a77-9613-45d9-a5a1-61d3dd210a95","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791EO8SH5R:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH5R"}}
{"@timestamp":"2024-10-10T09:12:42.2137467+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"37\"ms) [Parameters=[\"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;\"","fields":{"elapsed":"37","parameters":"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"d41e6a77-9613-45d9-a5a1-61d3dd210a95","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791EO8SH5R:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH5R"}}
{"@timestamp":"2024-10-10T09:12:42.2520242+00:00","level":"Information","messageTemplate":"User refresh token","message":"User refresh token","fields":{"SourceContext":"Modsen.Server.Authentication.Application.Features.ApplicationUser.CommandHandlers.RefreshTokenHandler","ActionId":"d41e6a77-9613-45d9-a5a1-61d3dd210a95","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791EO8SH5R:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH5R"}}
{"@timestamp":"2024-10-10T09:12:42.2937931+00:00","level":"Information","messageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","message":"Executing \"OkObjectResult\", writing value of type '\"System.String\"'.","fields":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"d41e6a77-9613-45d9-a5a1-61d3dd210a95","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791EO8SH5R:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH5R"}}
{"@timestamp":"2024-10-10T09:12:42.3052745+00:00","level":"Information","messageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","message":"Executed action \"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\" in 2291.0993ms","fields":{"ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","ElapsedMilliseconds":2291.0993,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HN791EO8SH5R:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH5R"}}
{"@timestamp":"2024-10-10T09:12:42.3112984+00:00","level":"Information","messageTemplate":"Executed endpoint '{EndpointName}'","message":"Executed endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN791EO8SH5R:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH5R"}}
{"@timestamp":"2024-10-10T09:12:42.3291095+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 200 null \"text/plain; charset=utf-8\" 2588.6397ms","fields":{"ElapsedMilliseconds":2588.6397,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.0","Method":"GET","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN791EO8SH5R:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH5R"}}
{"@timestamp":"2024-10-10T09:12:45.2770219+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN791EO8SH5S:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH5S"}}
{"@timestamp":"2024-10-10T09:12:45.2830281+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN791EO8SH5S:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH5S"}}
{"@timestamp":"2024-10-10T09:12:45.2852164+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 204 null null 8.2844ms","fields":{"ElapsedMilliseconds":8.2844,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.0","Method":"OPTIONS","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN791EO8SH5S:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH5S"}}
{"@timestamp":"2024-10-10T09:12:45.3157569+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN791EO8SH5T:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH5T"}}
{"@timestamp":"2024-10-10T09:12:45.3179432+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN791EO8SH5T:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH5T"}}
{"@timestamp":"2024-10-10T09:12:45.3214657+00:00","level":"Information","messageTemplate":"Failed to validate the token.","message":"Failed to validate the token.","exceptions":[{"Depth":0,"ClassName":"Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException","Message":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 09:12:39', Current time (UTC): '10/10/2024 09:12:45'.","Source":"Microsoft.IdentityModel.Tokens","StackTraceString":"   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)","RemoteStackTraceString":null,"RemoteStackIndex":0,"HResult":-2146233088,"HelpURL":null}],"fields":{"EventId":{"Id":1,"Name":"TokenValidationFailed"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN791EO8SH5T:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH5T"}}
{"@timestamp":"2024-10-10T09:12:45.3238914+00:00","level":"Information","messageTemplate":"{AuthenticationScheme} was not authenticated. Failure message: {FailureMessage}","message":"\"Bearer\" was not authenticated. Failure message: \"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 09:12:39', Current time (UTC): '10/10/2024 09:12:45'.\"","fields":{"AuthenticationScheme":"Bearer","FailureMessage":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/10/2024 09:12:39', Current time (UTC): '10/10/2024 09:12:45'.","EventId":{"Id":7,"Name":"AuthenticationSchemeNotAuthenticatedWithFailure"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN791EO8SH5T:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH5T"}}
{"@timestamp":"2024-10-10T09:12:45.3255047+00:00","level":"Information","messageTemplate":"Executing endpoint '{EndpointName}'","message":"Executing endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN791EO8SH5T:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH5T"}}
{"@timestamp":"2024-10-10T09:12:45.3276558+00:00","level":"Information","messageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","message":"Route matched with \"{action = \\\"Refresh\\\", controller = \\\"Token\\\"}\". Executing controller action with signature \"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()\" on controller \"Modsen.Server.Authentication.Api.Controllers.TokenController\" (\"Modsen.Server.Authentication.Api\").","fields":{"RouteData":"{action = \"Refresh\", controller = \"Token\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()","Controller":"Modsen.Server.Authentication.Api.Controllers.TokenController","AssemblyName":"Modsen.Server.Authentication.Api","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"d41e6a77-9613-45d9-a5a1-61d3dd210a95","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791EO8SH5T:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH5T"}}
{"@timestamp":"2024-10-10T09:12:45.3503065+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"1\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT 1\"","fields":{"elapsed":"1","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"d41e6a77-9613-45d9-a5a1-61d3dd210a95","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791EO8SH5T:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH5T"}}
{"@timestamp":"2024-10-10T09:12:45.3531012+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"1\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0\"","fields":{"elapsed":"1","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"d41e6a77-9613-45d9-a5a1-61d3dd210a95","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791EO8SH5T:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH5T"}}
{"@timestamp":"2024-10-10T09:12:45.4486064+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"67\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"67","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"d41e6a77-9613-45d9-a5a1-61d3dd210a95","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791EO8SH5T:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH5T"}}
{"@timestamp":"2024-10-10T09:12:45.5352795+00:00","level":"Error","messageTemplate":"User has invalid refresh token","message":"User has invalid refresh token","fields":{"SourceContext":"Modsen.Server.Authentication.Application.Features.ApplicationUser.CommandHandlers.RefreshTokenHandler","ActionId":"d41e6a77-9613-45d9-a5a1-61d3dd210a95","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791EO8SH5T:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH5T"}}
{"@timestamp":"2024-10-10T09:12:45.6317116+00:00","level":"Information","messageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","message":"Executed action \"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\" in 301.8669ms","fields":{"ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","ElapsedMilliseconds":301.8669,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HN791EO8SH5T:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH5T"}}
{"@timestamp":"2024-10-10T09:12:45.6338213+00:00","level":"Information","messageTemplate":"Executed endpoint '{EndpointName}'","message":"Executed endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN791EO8SH5T:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH5T"}}
{"@timestamp":"2024-10-10T09:12:45.7802120+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 400 null \"application/json\" 464.452ms","fields":{"ElapsedMilliseconds":464.452,"StatusCode":400,"ContentType":"application/json","ContentLength":null,"Protocol":"HTTP/1.0","Method":"GET","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN791EO8SH5T:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH5T"}}
{"@timestamp":"2024-10-10T09:13:04.2476910+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/authentication/login\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/authentication/login","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN791EO8SH5U:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN791EO8SH5U"}}
{"@timestamp":"2024-10-10T09:13:04.2496950+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN791EO8SH5U:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN791EO8SH5U"}}
{"@timestamp":"2024-10-10T09:13:04.2510879+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/authentication/login\"\"\" - 204 null null 3.4736ms","fields":{"ElapsedMilliseconds":3.4736,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.0","Method":"OPTIONS","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/authentication/login","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN791EO8SH5U:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN791EO8SH5U"}}
{"@timestamp":"2024-10-10T09:13:04.2597657+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"POST\" \"https\"://\"authentication\"\"\"\"/api/authentication/login\"\"\" - \"application/json\" 46","fields":{"Protocol":"HTTP/1.0","Method":"POST","ContentType":"application/json","ContentLength":46,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/authentication/login","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN791EO8SH5V:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN791EO8SH5V"}}
{"@timestamp":"2024-10-10T09:13:04.2618281+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN791EO8SH5V:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN791EO8SH5V"}}
{"@timestamp":"2024-10-10T09:13:04.2648853+00:00","level":"Information","messageTemplate":"Failed to validate the token.","message":"Failed to validate the token.","exceptions":[{"Depth":0,"ClassName":"Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException","Message":"IDX14100: JWT is not well formed, there are no dots (.).\nThe token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.","Source":"Microsoft.IdentityModel.JsonWebTokens","StackTraceString":"   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)","RemoteStackTraceString":null,"RemoteStackIndex":0,"HResult":-2147024809,"HelpURL":null}],"fields":{"EventId":{"Id":1,"Name":"TokenValidationFailed"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN791EO8SH5V:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN791EO8SH5V"}}
{"@timestamp":"2024-10-10T09:13:04.2664117+00:00","level":"Information","messageTemplate":"{AuthenticationScheme} was not authenticated. Failure message: {FailureMessage}","message":"\"Bearer\" was not authenticated. Failure message: \"IDX14100: JWT is not well formed, there are no dots (.).\nThe token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.\"","fields":{"AuthenticationScheme":"Bearer","FailureMessage":"IDX14100: JWT is not well formed, there are no dots (.).\nThe token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.","EventId":{"Id":7,"Name":"AuthenticationSchemeNotAuthenticatedWithFailure"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HN791EO8SH5V:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN791EO8SH5V"}}
{"@timestamp":"2024-10-10T09:13:04.2677690+00:00","level":"Information","messageTemplate":"Executing endpoint '{EndpointName}'","message":"Executing endpoint '\"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN791EO8SH5V:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN791EO8SH5V"}}
{"@timestamp":"2024-10-10T09:13:04.2801063+00:00","level":"Information","messageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","message":"Route matched with \"{action = \\\"Login\\\", controller = \\\"Authentication\\\"}\". Executing controller action with signature \"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Modsen.Server.Authentication.Application.Models.Authentication.LoginModel)\" on controller \"Modsen.Server.Authentication.Api.Controllers.AuthenticationController\" (\"Modsen.Server.Authentication.Api\").","fields":{"RouteData":"{action = \"Login\", controller = \"Authentication\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Modsen.Server.Authentication.Application.Models.Authentication.LoginModel)","Controller":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController","AssemblyName":"Modsen.Server.Authentication.Api","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"cab62e94-72a4-411d-a2e0-c0f3e19e550e","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN791EO8SH5V:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN791EO8SH5V"}}
{"@timestamp":"2024-10-10T09:13:04.3621969+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"1\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT 1\"","fields":{"elapsed":"1","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"cab62e94-72a4-411d-a2e0-c0f3e19e550e","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN791EO8SH5V:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN791EO8SH5V"}}
{"@timestamp":"2024-10-10T09:13:04.3645067+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"1\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0\"","fields":{"elapsed":"1","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"cab62e94-72a4-411d-a2e0-c0f3e19e550e","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN791EO8SH5V:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN791EO8SH5V"}}
{"@timestamp":"2024-10-10T09:13:04.3733978+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"3\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"3","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"cab62e94-72a4-411d-a2e0-c0f3e19e550e","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN791EO8SH5V:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN791EO8SH5V"}}
{"@timestamp":"2024-10-10T09:13:04.5212893+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"3\"ms) [Parameters=[\"@__userId_0='?' (Size = 450)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT [a0].[Name]\nFROM [AspNetUserRoles] AS [a]\nINNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]\nWHERE [a].[UserId] = @__userId_0\"","fields":{"elapsed":"3","parameters":"@__userId_0='?' (Size = 450)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT [a0].[Name]\nFROM [AspNetUserRoles] AS [a]\nINNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]\nWHERE [a].[UserId] = @__userId_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"cab62e94-72a4-411d-a2e0-c0f3e19e550e","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN791EO8SH5V:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN791EO8SH5V"}}
{"@timestamp":"2024-10-10T09:13:04.5310392+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"3\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"3","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"cab62e94-72a4-411d-a2e0-c0f3e19e550e","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN791EO8SH5V:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN791EO8SH5V"}}
{"@timestamp":"2024-10-10T09:13:04.5458484+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"11\"ms) [Parameters=[\"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;\"","fields":{"elapsed":"11","parameters":"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"cab62e94-72a4-411d-a2e0-c0f3e19e550e","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN791EO8SH5V:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN791EO8SH5V"}}
{"@timestamp":"2024-10-10T09:13:04.5483659+00:00","level":"Information","messageTemplate":"User login","message":"User login","fields":{"SourceContext":"Modsen.Server.Authentication.Application.Features.ApplicationUser.Commands.LoginApplicationUser","ActionId":"cab62e94-72a4-411d-a2e0-c0f3e19e550e","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN791EO8SH5V:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN791EO8SH5V"}}
{"@timestamp":"2024-10-10T09:13:04.5513273+00:00","level":"Information","messageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","message":"Executing \"OkObjectResult\", writing value of type '\"System.String\"'.","fields":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"cab62e94-72a4-411d-a2e0-c0f3e19e550e","ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","RequestId":"0HN791EO8SH5V:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN791EO8SH5V"}}
{"@timestamp":"2024-10-10T09:13:04.5523304+00:00","level":"Information","messageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","message":"Executed action \"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)\" in 271.3184ms","fields":{"ActionName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","ElapsedMilliseconds":271.3184,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HN791EO8SH5V:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN791EO8SH5V"}}
{"@timestamp":"2024-10-10T09:13:04.5532170+00:00","level":"Information","messageTemplate":"Executed endpoint '{EndpointName}'","message":"Executed endpoint '\"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.AuthenticationController.Login (Modsen.Server.Authentication.Api)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN791EO8SH5V:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN791EO8SH5V"}}
{"@timestamp":"2024-10-10T09:13:04.5540851+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"POST\" \"https\"://\"authentication\"\"\"\"/api/authentication/login\"\"\" - 200 null \"text/plain; charset=utf-8\" 294.3311ms","fields":{"ElapsedMilliseconds":294.3311,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.0","Method":"POST","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/authentication/login","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN791EO8SH5V:00000001","RequestPath":"/api/authentication/login","ConnectionId":"0HN791EO8SH5V"}}
{"@timestamp":"2024-10-10T09:13:15.8224436+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN791EO8SH60:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH60"}}
{"@timestamp":"2024-10-10T09:13:15.8267054+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN791EO8SH60:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH60"}}
{"@timestamp":"2024-10-10T09:13:15.8289110+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"OPTIONS\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 204 null null 6.4709ms","fields":{"ElapsedMilliseconds":6.4709,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.0","Method":"OPTIONS","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN791EO8SH60:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH60"}}
{"@timestamp":"2024-10-10T09:13:15.8470988+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN791EO8SH61:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH61"}}
{"@timestamp":"2024-10-10T09:13:15.8484520+00:00","level":"Information","messageTemplate":"CORS policy execution successful.","message":"CORS policy execution successful.","fields":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HN791EO8SH61:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH61"}}
{"@timestamp":"2024-10-10T09:13:15.8602737+00:00","level":"Information","messageTemplate":"Executing endpoint '{EndpointName}'","message":"Executing endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN791EO8SH61:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH61"}}
{"@timestamp":"2024-10-10T09:13:15.8617200+00:00","level":"Information","messageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","message":"Route matched with \"{action = \\\"Refresh\\\", controller = \\\"Token\\\"}\". Executing controller action with signature \"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()\" on controller \"Modsen.Server.Authentication.Api.Controllers.TokenController\" (\"Modsen.Server.Authentication.Api\").","fields":{"RouteData":"{action = \"Refresh\", controller = \"Token\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh()","Controller":"Modsen.Server.Authentication.Api.Controllers.TokenController","AssemblyName":"Modsen.Server.Authentication.Api","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"d41e6a77-9613-45d9-a5a1-61d3dd210a95","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791EO8SH61:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH61"}}
{"@timestamp":"2024-10-10T09:13:15.8695474+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"1\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT 1\"","fields":{"elapsed":"1","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"d41e6a77-9613-45d9-a5a1-61d3dd210a95","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791EO8SH61:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH61"}}
{"@timestamp":"2024-10-10T09:13:15.8726443+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"2\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0\"","fields":{"elapsed":"2","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"d41e6a77-9613-45d9-a5a1-61d3dd210a95","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791EO8SH61:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH61"}}
{"@timestamp":"2024-10-10T09:13:15.8851201+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"3\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"3","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"d41e6a77-9613-45d9-a5a1-61d3dd210a95","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791EO8SH61:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH61"}}
{"@timestamp":"2024-10-10T09:13:15.8959064+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"3\"ms) [Parameters=[\"@__normalizedUserName_0='?' (Size = 256)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0\"","fields":{"elapsed":"3","parameters":"@__normalizedUserName_0='?' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[UserStatus]\nFROM [AspNetUsers] AS [a]\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"d41e6a77-9613-45d9-a5a1-61d3dd210a95","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791EO8SH61:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH61"}}
{"@timestamp":"2024-10-10T09:13:15.9356650+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"16\"ms) [Parameters=[\"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;\"","fields":{"elapsed":"16","parameters":"@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256), @p16='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SET IMPLICIT_TRANSACTIONS OFF;\nSET NOCOUNT ON;\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiryTime] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15, [UserStatus] = @p16\nOUTPUT 1\nWHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"d41e6a77-9613-45d9-a5a1-61d3dd210a95","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791EO8SH61:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH61"}}
{"@timestamp":"2024-10-10T09:13:15.9379162+00:00","level":"Information","messageTemplate":"User refresh token","message":"User refresh token","fields":{"SourceContext":"Modsen.Server.Authentication.Application.Features.ApplicationUser.CommandHandlers.RefreshTokenHandler","ActionId":"d41e6a77-9613-45d9-a5a1-61d3dd210a95","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791EO8SH61:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH61"}}
{"@timestamp":"2024-10-10T09:13:15.9401235+00:00","level":"Information","messageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","message":"Executing \"OkObjectResult\", writing value of type '\"System.String\"'.","fields":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"d41e6a77-9613-45d9-a5a1-61d3dd210a95","ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","RequestId":"0HN791EO8SH61:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH61"}}
{"@timestamp":"2024-10-10T09:13:15.9414097+00:00","level":"Information","messageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","message":"Executed action \"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\" in 77.8869ms","fields":{"ActionName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","ElapsedMilliseconds":77.8869,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HN791EO8SH61:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH61"}}
{"@timestamp":"2024-10-10T09:13:15.9426661+00:00","level":"Information","messageTemplate":"Executed endpoint '{EndpointName}'","message":"Executed endpoint '\"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)\"'","fields":{"EndpointName":"Modsen.Server.Authentication.Api.Controllers.TokenController.Refresh (Modsen.Server.Authentication.Api)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN791EO8SH61:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH61"}}
{"@timestamp":"2024-10-10T09:13:15.9438946+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"GET\" \"https\"://\"authentication\"\"\"\"/api/tokens\"\"\" - 200 null \"text/plain; charset=utf-8\" 96.7765ms","fields":{"ElapsedMilliseconds":96.7765,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.0","Method":"GET","Scheme":"https","Host":"authentication","PathBase":"","Path":"/api/tokens","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN791EO8SH61:00000001","RequestPath":"/api/tokens","ConnectionId":"0HN791EO8SH61"}}
