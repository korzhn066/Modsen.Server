{"@timestamp":"2024-10-09T15:53:34.8761482+00:00","level":"Information","messageTemplate":"Configured endpoint {Endpoint}, Consumer: {ConsumerType}","message":"Configured endpoint \"UserConsumerGroup\", Consumer: \"Modsen.Server.CarsElections.Application.Services.UserCreatedConsumer\"","fields":{"Endpoint":"UserConsumerGroup","ConsumerType":"Modsen.Server.CarsElections.Application.Services.UserCreatedConsumer","SourceContext":"MassTransit"}}
{"@timestamp":"2024-10-09T15:53:35.1693778+00:00","level":"Warning","messageTemplate":"Using an in-memory repository. Keys will not be persisted to storage.","message":"Using an in-memory repository. Keys will not be persisted to storage.","fields":{"EventId":{"Id":50,"Name":"UsingInMemoryRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.Repositories.EphemeralXmlRepository"}}
{"@timestamp":"2024-10-09T15:53:35.1895462+00:00","level":"Warning","messageTemplate":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","message":"Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.","fields":{"EventId":{"Id":59,"Name":"UsingEphemeralKeyRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"}}
{"@timestamp":"2024-10-09T15:53:35.3072162+00:00","level":"Information","messageTemplate":"Creating key {KeyId:B} with creation date {CreationDate:u}, activation date {ActivationDate:u}, and expiration date {ExpirationDate:u}.","message":"Creating key {bced8dfc-0bd1-4ac8-bd8b-cbe63d232740} with creation date 2024-10-09 15:53:35Z, activation date 2024-10-09 15:53:35Z, and expiration date 2025-01-07 15:53:35Z.","fields":{"KeyId":"bced8dfc-0bd1-4ac8-bd8b-cbe63d232740","CreationDate":"2024-10-09T15:53:35.3022315+00:00","ActivationDate":"2024-10-09T15:53:35.2949342+00:00","ExpirationDate":"2025-01-07T15:53:35.2949342+00:00","EventId":{"Id":58,"Name":"CreatingKey"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{bced8dfc-0bd1-4ac8-bd8b-cbe63d232740}"}],"CreationDate":[{"Format":"u","Rendering":"2024-10-09 15:53:35Z"}],"ActivationDate":[{"Format":"u","Rendering":"2024-10-09 15:53:35Z"}],"ExpirationDate":[{"Format":"u","Rendering":"2025-01-07 15:53:35Z"}]}}
{"@timestamp":"2024-10-09T15:53:35.3265700+00:00","level":"Warning","messageTemplate":"No XML encryptor configured. Key {KeyId:B} may be persisted to storage in unencrypted form.","message":"No XML encryptor configured. Key {bced8dfc-0bd1-4ac8-bd8b-cbe63d232740} may be persisted to storage in unencrypted form.","fields":{"KeyId":"bced8dfc-0bd1-4ac8-bd8b-cbe63d232740","EventId":{"Id":35,"Name":"NoXMLEncryptorConfiguredKeyMayBePersistedToStorageInUnencryptedForm"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"},"renderings":{"KeyId":[{"Format":"B","Rendering":"{bced8dfc-0bd1-4ac8-bd8b-cbe63d232740}"}]}}
{"@timestamp":"2024-10-09T15:53:35.8244628+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"http://[::]:8080\"","fields":{"address":"http://[::]:8080","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-09T15:53:35.8254572+00:00","level":"Information","messageTemplate":"Now listening on: {address}","message":"Now listening on: \"https://[::]:8081\"","fields":{"address":"https://[::]:8081","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-09T15:53:35.8278180+00:00","level":"Information","messageTemplate":"Application started. Press Ctrl+C to shut down.","message":"Application started. Press Ctrl+C to shut down.","fields":{"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-09T15:53:35.8293292+00:00","level":"Information","messageTemplate":"Hosting environment: {EnvName}","message":"Hosting environment: \"Development\"","fields":{"EnvName":"Development","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-09T15:53:35.8312964+00:00","level":"Information","messageTemplate":"Content root path: {ContentRoot}","message":"Content root path: \"/app\"","fields":{"ContentRoot":"/app","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"@timestamp":"2024-10-09T15:53:36.7618439+00:00","level":"Information","messageTemplate":"Bus started: {HostAddress}","message":"Bus started: loopback://localhost/","fields":{"HostAddress":"loopback://localhost/","SourceContext":"MassTransit"}}
{"@timestamp":"2024-10-09T15:53:42.0677079+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"GET\" \"https\"://\"cars_elections\"\"\"\"/api/cars/winning\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"cars_elections","PathBase":"","Path":"/api/cars/winning","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN78FA678G6Q:00000001","RequestPath":"/api/cars/winning","ConnectionId":"0HN78FA678G6Q"}}
{"@timestamp":"2024-10-09T15:53:42.3459839+00:00","level":"Information","messageTemplate":"Executing endpoint '{EndpointName}'","message":"Executing endpoint '\"Modsen.Server.CarsElections.Api.Controllers.CarsController.GetWiningCar (Modsen.Server.CarsElections.Api)\"'","fields":{"EndpointName":"Modsen.Server.CarsElections.Api.Controllers.CarsController.GetWiningCar (Modsen.Server.CarsElections.Api)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN78FA678G6Q:00000001","RequestPath":"/api/cars/winning","ConnectionId":"0HN78FA678G6Q"}}
{"@timestamp":"2024-10-09T15:53:42.3727967+00:00","level":"Information","messageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","message":"Route matched with \"{action = \\\"GetWiningCar\\\", controller = \\\"Cars\\\"}\". Executing controller action with signature \"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWiningCar(System.Threading.CancellationToken)\" on controller \"Modsen.Server.CarsElections.Api.Controllers.CarsController\" (\"Modsen.Server.CarsElections.Api\").","fields":{"RouteData":"{action = \"GetWiningCar\", controller = \"Cars\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWiningCar(System.Threading.CancellationToken)","Controller":"Modsen.Server.CarsElections.Api.Controllers.CarsController","AssemblyName":"Modsen.Server.CarsElections.Api","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"35a3242d-f108-4a4b-9403-ffdf4dd7bdd1","ActionName":"Modsen.Server.CarsElections.Api.Controllers.CarsController.GetWiningCar (Modsen.Server.CarsElections.Api)","RequestId":"0HN78FA678G6Q:00000001","RequestPath":"/api/cars/winning","ConnectionId":"0HN78FA678G6Q"}}
{"@timestamp":"2024-10-09T15:53:45.2581793+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"543\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='60']\"\n\"\"CREATE DATABASE [elections];\"","fields":{"elapsed":"543","parameters":"","commandType":"Text","commandTimeout":60,"newLine":"\n","commandText":"CREATE DATABASE [elections];","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"35a3242d-f108-4a4b-9403-ffdf4dd7bdd1","ActionName":"Modsen.Server.CarsElections.Api.Controllers.CarsController.GetWiningCar (Modsen.Server.CarsElections.Api)","RequestId":"0HN78FA678G6Q:00000001","RequestPath":"/api/cars/winning","ConnectionId":"0HN78FA678G6Q"}}
{"@timestamp":"2024-10-09T15:53:45.5455757+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"281\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='60']\"\n\"\"IF SERVERPROPERTY('EngineEdition') <> 5\nBEGIN\n    ALTER DATABASE [elections] SET READ_COMMITTED_SNAPSHOT ON;\nEND;\"","fields":{"elapsed":"281","parameters":"","commandType":"Text","commandTimeout":60,"newLine":"\n","commandText":"IF SERVERPROPERTY('EngineEdition') <> 5\nBEGIN\n    ALTER DATABASE [elections] SET READ_COMMITTED_SNAPSHOT ON;\nEND;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"35a3242d-f108-4a4b-9403-ffdf4dd7bdd1","ActionName":"Modsen.Server.CarsElections.Api.Controllers.CarsController.GetWiningCar (Modsen.Server.CarsElections.Api)","RequestId":"0HN78FA678G6Q:00000001","RequestPath":"/api/cars/winning","ConnectionId":"0HN78FA678G6Q"}}
{"@timestamp":"2024-10-09T15:53:45.5875263+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"10\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT 1\"","fields":{"elapsed":"10","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"35a3242d-f108-4a4b-9403-ffdf4dd7bdd1","ActionName":"Modsen.Server.CarsElections.Api.Controllers.CarsController.GetWiningCar (Modsen.Server.CarsElections.Api)","RequestId":"0HN78FA678G6Q:00000001","RequestPath":"/api/cars/winning","ConnectionId":"0HN78FA678G6Q"}}
{"@timestamp":"2024-10-09T15:53:45.7626035+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"167\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0\"","fields":{"elapsed":"167","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"35a3242d-f108-4a4b-9403-ffdf4dd7bdd1","ActionName":"Modsen.Server.CarsElections.Api.Controllers.CarsController.GetWiningCar (Modsen.Server.CarsElections.Api)","RequestId":"0HN78FA678G6Q:00000001","RequestPath":"/api/cars/winning","ConnectionId":"0HN78FA678G6Q"}}
{"@timestamp":"2024-10-09T15:53:46.0243057+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"16\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"CREATE TABLE [Cars] (\n    [Id] nvarchar(450) NOT NULL,\n    [CarType] int NOT NULL,\n    CONSTRAINT [PK_Cars] PRIMARY KEY ([Id])\n);\"","fields":{"elapsed":"16","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"CREATE TABLE [Cars] (\n    [Id] nvarchar(450) NOT NULL,\n    [CarType] int NOT NULL,\n    CONSTRAINT [PK_Cars] PRIMARY KEY ([Id])\n);","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"35a3242d-f108-4a4b-9403-ffdf4dd7bdd1","ActionName":"Modsen.Server.CarsElections.Api.Controllers.CarsController.GetWiningCar (Modsen.Server.CarsElections.Api)","RequestId":"0HN78FA678G6Q:00000001","RequestPath":"/api/cars/winning","ConnectionId":"0HN78FA678G6Q"}}
{"@timestamp":"2024-10-09T15:53:46.0324248+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"4\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"CREATE TABLE [Users] (\n    [Id] nvarchar(450) NOT NULL,\n    [UserName] nvarchar(max) NOT NULL,\n    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])\n);\"","fields":{"elapsed":"4","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"CREATE TABLE [Users] (\n    [Id] nvarchar(450) NOT NULL,\n    [UserName] nvarchar(max) NOT NULL,\n    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])\n);","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"35a3242d-f108-4a4b-9403-ffdf4dd7bdd1","ActionName":"Modsen.Server.CarsElections.Api.Controllers.CarsController.GetWiningCar (Modsen.Server.CarsElections.Api)","RequestId":"0HN78FA678G6Q:00000001","RequestPath":"/api/cars/winning","ConnectionId":"0HN78FA678G6Q"}}
{"@timestamp":"2024-10-09T15:53:46.0389438+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"5\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"CREATE TABLE [Comments] (\n    [Id] int NOT NULL IDENTITY,\n    [Message] nvarchar(max) NOT NULL,\n    [Type] int NOT NULL,\n    [DateTime] datetime2 NOT NULL,\n    [LikeCount] int NOT NULL,\n    [DislikeCount] int NOT NULL,\n    [CarId] nvarchar(450) NOT NULL,\n    CONSTRAINT [PK_Comments] PRIMARY KEY ([Id]),\n    CONSTRAINT [FK_Comments_Cars_CarId] FOREIGN KEY ([CarId]) REFERENCES [Cars] ([Id]) ON DELETE CASCADE\n);\"","fields":{"elapsed":"5","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"CREATE TABLE [Comments] (\n    [Id] int NOT NULL IDENTITY,\n    [Message] nvarchar(max) NOT NULL,\n    [Type] int NOT NULL,\n    [DateTime] datetime2 NOT NULL,\n    [LikeCount] int NOT NULL,\n    [DislikeCount] int NOT NULL,\n    [CarId] nvarchar(450) NOT NULL,\n    CONSTRAINT [PK_Comments] PRIMARY KEY ([Id]),\n    CONSTRAINT [FK_Comments_Cars_CarId] FOREIGN KEY ([CarId]) REFERENCES [Cars] ([Id]) ON DELETE CASCADE\n);","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"35a3242d-f108-4a4b-9403-ffdf4dd7bdd1","ActionName":"Modsen.Server.CarsElections.Api.Controllers.CarsController.GetWiningCar (Modsen.Server.CarsElections.Api)","RequestId":"0HN78FA678G6Q:00000001","RequestPath":"/api/cars/winning","ConnectionId":"0HN78FA678G6Q"}}
{"@timestamp":"2024-10-09T15:53:46.0471167+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"6\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"CREATE TABLE [Likes] (\n    [CommentId] int NOT NULL,\n    [UserId] nvarchar(450) NOT NULL,\n    [Type] int NOT NULL,\n    CONSTRAINT [PK_Likes] PRIMARY KEY ([UserId], [CommentId]),\n    CONSTRAINT [FK_Likes_Comments_CommentId] FOREIGN KEY ([CommentId]) REFERENCES [Comments] ([Id]) ON DELETE CASCADE,\n    CONSTRAINT [FK_Likes_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE\n);\"","fields":{"elapsed":"6","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"CREATE TABLE [Likes] (\n    [CommentId] int NOT NULL,\n    [UserId] nvarchar(450) NOT NULL,\n    [Type] int NOT NULL,\n    CONSTRAINT [PK_Likes] PRIMARY KEY ([UserId], [CommentId]),\n    CONSTRAINT [FK_Likes_Comments_CommentId] FOREIGN KEY ([CommentId]) REFERENCES [Comments] ([Id]) ON DELETE CASCADE,\n    CONSTRAINT [FK_Likes_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE\n);","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"35a3242d-f108-4a4b-9403-ffdf4dd7bdd1","ActionName":"Modsen.Server.CarsElections.Api.Controllers.CarsController.GetWiningCar (Modsen.Server.CarsElections.Api)","RequestId":"0HN78FA678G6Q:00000001","RequestPath":"/api/cars/winning","ConnectionId":"0HN78FA678G6Q"}}
{"@timestamp":"2024-10-09T15:53:46.1636443+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"113\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CarType') AND [object_id] = OBJECT_ID(N'[Cars]'))\n    SET IDENTITY_INSERT [Cars] ON;\nINSERT INTO [Cars] ([Id], [CarType])\nVALUES (N'1', 0),\n(N'2', 0);\nIF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CarType') AND [object_id] = OBJECT_ID(N'[Cars]'))\n    SET IDENTITY_INSERT [Cars] OFF;\"","fields":{"elapsed":"113","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CarType') AND [object_id] = OBJECT_ID(N'[Cars]'))\n    SET IDENTITY_INSERT [Cars] ON;\nINSERT INTO [Cars] ([Id], [CarType])\nVALUES (N'1', 0),\n(N'2', 0);\nIF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CarType') AND [object_id] = OBJECT_ID(N'[Cars]'))\n    SET IDENTITY_INSERT [Cars] OFF;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"35a3242d-f108-4a4b-9403-ffdf4dd7bdd1","ActionName":"Modsen.Server.CarsElections.Api.Controllers.CarsController.GetWiningCar (Modsen.Server.CarsElections.Api)","RequestId":"0HN78FA678G6Q:00000001","RequestPath":"/api/cars/winning","ConnectionId":"0HN78FA678G6Q"}}
{"@timestamp":"2024-10-09T15:53:46.2004099+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"35\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'UserName') AND [object_id] = OBJECT_ID(N'[Users]'))\n    SET IDENTITY_INSERT [Users] ON;\nINSERT INTO [Users] ([Id], [UserName])\nVALUES (N'1', N'Test'),\n(N'2', N'Test1'),\n(N'3', N'Test2');\nIF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'UserName') AND [object_id] = OBJECT_ID(N'[Users]'))\n    SET IDENTITY_INSERT [Users] OFF;\"","fields":{"elapsed":"35","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'UserName') AND [object_id] = OBJECT_ID(N'[Users]'))\n    SET IDENTITY_INSERT [Users] ON;\nINSERT INTO [Users] ([Id], [UserName])\nVALUES (N'1', N'Test'),\n(N'2', N'Test1'),\n(N'3', N'Test2');\nIF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'UserName') AND [object_id] = OBJECT_ID(N'[Users]'))\n    SET IDENTITY_INSERT [Users] OFF;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"35a3242d-f108-4a4b-9403-ffdf4dd7bdd1","ActionName":"Modsen.Server.CarsElections.Api.Controllers.CarsController.GetWiningCar (Modsen.Server.CarsElections.Api)","RequestId":"0HN78FA678G6Q:00000001","RequestPath":"/api/cars/winning","ConnectionId":"0HN78FA678G6Q"}}
{"@timestamp":"2024-10-09T15:53:46.2263036+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"22\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CarId', N'DateTime', N'DislikeCount', N'LikeCount', N'Message', N'Type') AND [object_id] = OBJECT_ID(N'[Comments]'))\n    SET IDENTITY_INSERT [Comments] ON;\nINSERT INTO [Comments] ([Id], [CarId], [DateTime], [DislikeCount], [LikeCount], [Message], [Type])\nVALUES (1, N'1', '2024-10-09T15:53:44.5916721+00:00', 2, 1, N'Some message', -1);\nIF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CarId', N'DateTime', N'DislikeCount', N'LikeCount', N'Message', N'Type') AND [object_id] = OBJECT_ID(N'[Comments]'))\n    SET IDENTITY_INSERT [Comments] OFF;\"","fields":{"elapsed":"22","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CarId', N'DateTime', N'DislikeCount', N'LikeCount', N'Message', N'Type') AND [object_id] = OBJECT_ID(N'[Comments]'))\n    SET IDENTITY_INSERT [Comments] ON;\nINSERT INTO [Comments] ([Id], [CarId], [DateTime], [DislikeCount], [LikeCount], [Message], [Type])\nVALUES (1, N'1', '2024-10-09T15:53:44.5916721+00:00', 2, 1, N'Some message', -1);\nIF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CarId', N'DateTime', N'DislikeCount', N'LikeCount', N'Message', N'Type') AND [object_id] = OBJECT_ID(N'[Comments]'))\n    SET IDENTITY_INSERT [Comments] OFF;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"35a3242d-f108-4a4b-9403-ffdf4dd7bdd1","ActionName":"Modsen.Server.CarsElections.Api.Controllers.CarsController.GetWiningCar (Modsen.Server.CarsElections.Api)","RequestId":"0HN78FA678G6Q:00000001","RequestPath":"/api/cars/winning","ConnectionId":"0HN78FA678G6Q"}}
{"@timestamp":"2024-10-09T15:53:46.2530777+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"25\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'CommentId', N'UserId', N'Type') AND [object_id] = OBJECT_ID(N'[Likes]'))\n    SET IDENTITY_INSERT [Likes] ON;\nINSERT INTO [Likes] ([CommentId], [UserId], [Type])\nVALUES (1, N'1', 2),\n(1, N'2', 1),\n(1, N'3', 1);\nIF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'CommentId', N'UserId', N'Type') AND [object_id] = OBJECT_ID(N'[Likes]'))\n    SET IDENTITY_INSERT [Likes] OFF;\"","fields":{"elapsed":"25","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'CommentId', N'UserId', N'Type') AND [object_id] = OBJECT_ID(N'[Likes]'))\n    SET IDENTITY_INSERT [Likes] ON;\nINSERT INTO [Likes] ([CommentId], [UserId], [Type])\nVALUES (1, N'1', 2),\n(1, N'2', 1),\n(1, N'3', 1);\nIF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'CommentId', N'UserId', N'Type') AND [object_id] = OBJECT_ID(N'[Likes]'))\n    SET IDENTITY_INSERT [Likes] OFF;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"35a3242d-f108-4a4b-9403-ffdf4dd7bdd1","ActionName":"Modsen.Server.CarsElections.Api.Controllers.CarsController.GetWiningCar (Modsen.Server.CarsElections.Api)","RequestId":"0HN78FA678G6Q:00000001","RequestPath":"/api/cars/winning","ConnectionId":"0HN78FA678G6Q"}}
{"@timestamp":"2024-10-09T15:53:46.2788589+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"23\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"CREATE INDEX [IX_Comments_CarId] ON [Comments] ([CarId]);\"","fields":{"elapsed":"23","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"CREATE INDEX [IX_Comments_CarId] ON [Comments] ([CarId]);","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"35a3242d-f108-4a4b-9403-ffdf4dd7bdd1","ActionName":"Modsen.Server.CarsElections.Api.Controllers.CarsController.GetWiningCar (Modsen.Server.CarsElections.Api)","RequestId":"0HN78FA678G6Q:00000001","RequestPath":"/api/cars/winning","ConnectionId":"0HN78FA678G6Q"}}
{"@timestamp":"2024-10-09T15:53:46.2932005+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"12\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"CREATE INDEX [IX_Likes_CommentId] ON [Likes] ([CommentId]);\"","fields":{"elapsed":"12","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"CREATE INDEX [IX_Likes_CommentId] ON [Likes] ([CommentId]);","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"35a3242d-f108-4a4b-9403-ffdf4dd7bdd1","ActionName":"Modsen.Server.CarsElections.Api.Controllers.CarsController.GetWiningCar (Modsen.Server.CarsElections.Api)","RequestId":"0HN78FA678G6Q:00000001","RequestPath":"/api/cars/winning","ConnectionId":"0HN78FA678G6Q"}}
{"@timestamp":"2024-10-09T15:53:47.3525740+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"95\"ms) [Parameters=[\"@__carType_0='?' (DbType = Int32)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [c].[Id], [c].[CarType]\nFROM [Cars] AS [c]\nWHERE [c].[CarType] = @__carType_0\nORDER BY (\n    SELECT COALESCE(SUM([c0].[DislikeCount] * -1 * [c0].[Type]), 0)\n    FROM [Comments] AS [c0]\n    WHERE [c].[Id] = [c0].[CarId]) + (\n    SELECT COALESCE(SUM([c1].[LikeCount] * [c1].[Type]), 0)\n    FROM [Comments] AS [c1]\n    WHERE [c].[Id] = [c1].[CarId]) DESC\"","fields":{"elapsed":"95","parameters":"@__carType_0='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [c].[Id], [c].[CarType]\nFROM [Cars] AS [c]\nWHERE [c].[CarType] = @__carType_0\nORDER BY (\n    SELECT COALESCE(SUM([c0].[DislikeCount] * -1 * [c0].[Type]), 0)\n    FROM [Comments] AS [c0]\n    WHERE [c].[Id] = [c0].[CarId]) + (\n    SELECT COALESCE(SUM([c1].[LikeCount] * [c1].[Type]), 0)\n    FROM [Comments] AS [c1]\n    WHERE [c].[Id] = [c1].[CarId]) DESC","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"35a3242d-f108-4a4b-9403-ffdf4dd7bdd1","ActionName":"Modsen.Server.CarsElections.Api.Controllers.CarsController.GetWiningCar (Modsen.Server.CarsElections.Api)","RequestId":"0HN78FA678G6Q:00000001","RequestPath":"/api/cars/winning","ConnectionId":"0HN78FA678G6Q"}}
{"@timestamp":"2024-10-09T15:53:47.3749919+00:00","level":"Error","messageTemplate":"Winning car not found","message":"Winning car not found","fields":{"SourceContext":"Modsen.Server.CarsElections.Application.Features.Car.QueryHandlers.GetCurrentWinningCarHandler","ActionId":"35a3242d-f108-4a4b-9403-ffdf4dd7bdd1","ActionName":"Modsen.Server.CarsElections.Api.Controllers.CarsController.GetWiningCar (Modsen.Server.CarsElections.Api)","RequestId":"0HN78FA678G6Q:00000001","RequestPath":"/api/cars/winning","ConnectionId":"0HN78FA678G6Q"}}
{"@timestamp":"2024-10-09T15:53:47.5188483+00:00","level":"Information","messageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","message":"Executed action \"Modsen.Server.CarsElections.Api.Controllers.CarsController.GetWiningCar (Modsen.Server.CarsElections.Api)\" in 5139.4491ms","fields":{"ActionName":"Modsen.Server.CarsElections.Api.Controllers.CarsController.GetWiningCar (Modsen.Server.CarsElections.Api)","ElapsedMilliseconds":5139.4491,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HN78FA678G6Q:00000001","RequestPath":"/api/cars/winning","ConnectionId":"0HN78FA678G6Q"}}
{"@timestamp":"2024-10-09T15:53:47.5230894+00:00","level":"Information","messageTemplate":"Executed endpoint '{EndpointName}'","message":"Executed endpoint '\"Modsen.Server.CarsElections.Api.Controllers.CarsController.GetWiningCar (Modsen.Server.CarsElections.Api)\"'","fields":{"EndpointName":"Modsen.Server.CarsElections.Api.Controllers.CarsController.GetWiningCar (Modsen.Server.CarsElections.Api)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN78FA678G6Q:00000001","RequestPath":"/api/cars/winning","ConnectionId":"0HN78FA678G6Q"}}
{"@timestamp":"2024-10-09T15:53:47.5304393+00:00","level":"Error","messageTemplate":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","message":"HTTP \"GET\" \"/api/cars/winning\" responded 500 in 5385.0146 ms","exceptions":[{"Depth":0,"ClassName":"Modsen.Server.Shared.Exceptions.NotFoundException","Message":"CarNotFound","Source":"Modsen.Server.CarsElections.Application","StackTraceString":"   at Modsen.Server.CarsElections.Application.Features.Car.QueryHandlers.GetCurrentWinningCarHandler.Handle(GetCurrentWinningCar request, CancellationToken cancellationToken) in E:\\Modsen.Server\\Server\\Modsen.Server.CarsElections\\Modsen.Server.CarsElections.Application\\Features\\Car\\QueryHandlers\\GetCurrentWinningCarHandler.cs:line 44\n   at Modsen.Server.CarsElections.Api.Controllers.CarsController.GetWiningCar(CancellationToken cancellationToken) in E:\\Modsen.Server\\Server\\Modsen.Server.CarsElections\\Modsen.Server.CarsElections.Api\\Controllers\\CarsController.cs:line 22\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)\n   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)\n   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)\n   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)","RemoteStackTraceString":null,"RemoteStackIndex":0,"HResult":-2146233088,"HelpURL":null}],"fields":{"RequestMethod":"GET","RequestPath":"/api/cars/winning","StatusCode":500,"Elapsed":5385.0146,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HN78FA678G6Q:00000001","ConnectionId":"0HN78FA678G6Q"},"renderings":{"Elapsed":[{"Format":"0.0000","Rendering":"5385.0146"}]}}
{"@timestamp":"2024-10-09T15:53:48.0371966+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"GET\" \"https\"://\"cars_elections\"\"\"\"/api/cars/winning\"\"\" - 404 null \"application/json\" 5970.4657ms","fields":{"ElapsedMilliseconds":5970.4657,"StatusCode":404,"ContentType":"application/json","ContentLength":null,"Protocol":"HTTP/1.0","Method":"GET","Scheme":"https","Host":"cars_elections","PathBase":"","Path":"/api/cars/winning","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN78FA678G6Q:00000001","RequestPath":"/api/cars/winning","ConnectionId":"0HN78FA678G6Q"}}
{"@timestamp":"2024-10-09T15:53:48.3427042+00:00","level":"Information","messageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","message":"Request starting \"HTTP/1.0\" \"GET\" \"https\"://\"cars_elections\"\"\"\"/api/cars/winning\"\"\" - null null","fields":{"Protocol":"HTTP/1.0","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"https","Host":"cars_elections","PathBase":"","Path":"/api/cars/winning","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN78FA678G6R:00000001","RequestPath":"/api/cars/winning","ConnectionId":"0HN78FA678G6R"}}
{"@timestamp":"2024-10-09T15:53:48.3530940+00:00","level":"Information","messageTemplate":"Executing endpoint '{EndpointName}'","message":"Executing endpoint '\"Modsen.Server.CarsElections.Api.Controllers.CarsController.GetWiningCar (Modsen.Server.CarsElections.Api)\"'","fields":{"EndpointName":"Modsen.Server.CarsElections.Api.Controllers.CarsController.GetWiningCar (Modsen.Server.CarsElections.Api)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN78FA678G6R:00000001","RequestPath":"/api/cars/winning","ConnectionId":"0HN78FA678G6R"}}
{"@timestamp":"2024-10-09T15:53:48.3552650+00:00","level":"Information","messageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","message":"Route matched with \"{action = \\\"GetWiningCar\\\", controller = \\\"Cars\\\"}\". Executing controller action with signature \"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWiningCar(System.Threading.CancellationToken)\" on controller \"Modsen.Server.CarsElections.Api.Controllers.CarsController\" (\"Modsen.Server.CarsElections.Api\").","fields":{"RouteData":"{action = \"GetWiningCar\", controller = \"Cars\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWiningCar(System.Threading.CancellationToken)","Controller":"Modsen.Server.CarsElections.Api.Controllers.CarsController","AssemblyName":"Modsen.Server.CarsElections.Api","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"35a3242d-f108-4a4b-9403-ffdf4dd7bdd1","ActionName":"Modsen.Server.CarsElections.Api.Controllers.CarsController.GetWiningCar (Modsen.Server.CarsElections.Api)","RequestId":"0HN78FA678G6R:00000001","RequestPath":"/api/cars/winning","ConnectionId":"0HN78FA678G6R"}}
{"@timestamp":"2024-10-09T15:53:48.3991434+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"2\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT 1\"","fields":{"elapsed":"2","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"35a3242d-f108-4a4b-9403-ffdf4dd7bdd1","ActionName":"Modsen.Server.CarsElections.Api.Controllers.CarsController.GetWiningCar (Modsen.Server.CarsElections.Api)","RequestId":"0HN78FA678G6R:00000001","RequestPath":"/api/cars/winning","ConnectionId":"0HN78FA678G6R"}}
{"@timestamp":"2024-10-09T15:53:48.4033733+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"2\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\n\"\"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0\"","fields":{"elapsed":"2","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"\r\nIF EXISTS\r\n    (SELECT *\r\n     FROM [sys].[objects] o\r\n     WHERE [o].[type] = 'U'\r\n     AND [o].[is_ms_shipped] = 0\r\n     AND NOT EXISTS (SELECT *\r\n         FROM [sys].[extended_properties] AS [ep]\r\n         WHERE [ep].[major_id] = [o].[object_id]\r\n             AND [ep].[minor_id] = 0\r\n             AND [ep].[class] = 1\r\n             AND [ep].[name] = N'microsoft_database_tools_support'\r\n    )\r\n)\r\nSELECT 1 ELSE SELECT 0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"35a3242d-f108-4a4b-9403-ffdf4dd7bdd1","ActionName":"Modsen.Server.CarsElections.Api.Controllers.CarsController.GetWiningCar (Modsen.Server.CarsElections.Api)","RequestId":"0HN78FA678G6R:00000001","RequestPath":"/api/cars/winning","ConnectionId":"0HN78FA678G6R"}}
{"@timestamp":"2024-10-09T15:53:48.5201749+00:00","level":"Information","messageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","message":"Executed DbCommand (\"6\"ms) [Parameters=[\"@__carType_0='?' (DbType = Int32)\"], CommandType='Text', CommandTimeout='30']\"\n\"\"SELECT TOP(1) [c].[Id], [c].[CarType]\nFROM [Cars] AS [c]\nWHERE [c].[CarType] = @__carType_0\nORDER BY (\n    SELECT COALESCE(SUM([c0].[DislikeCount] * -1 * [c0].[Type]), 0)\n    FROM [Comments] AS [c0]\n    WHERE [c].[Id] = [c0].[CarId]) + (\n    SELECT COALESCE(SUM([c1].[LikeCount] * [c1].[Type]), 0)\n    FROM [Comments] AS [c1]\n    WHERE [c].[Id] = [c1].[CarId]) DESC\"","fields":{"elapsed":"6","parameters":"@__carType_0='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT TOP(1) [c].[Id], [c].[CarType]\nFROM [Cars] AS [c]\nWHERE [c].[CarType] = @__carType_0\nORDER BY (\n    SELECT COALESCE(SUM([c0].[DislikeCount] * -1 * [c0].[Type]), 0)\n    FROM [Comments] AS [c0]\n    WHERE [c].[Id] = [c0].[CarId]) + (\n    SELECT COALESCE(SUM([c1].[LikeCount] * [c1].[Type]), 0)\n    FROM [Comments] AS [c1]\n    WHERE [c].[Id] = [c1].[CarId]) DESC","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"35a3242d-f108-4a4b-9403-ffdf4dd7bdd1","ActionName":"Modsen.Server.CarsElections.Api.Controllers.CarsController.GetWiningCar (Modsen.Server.CarsElections.Api)","RequestId":"0HN78FA678G6R:00000001","RequestPath":"/api/cars/winning","ConnectionId":"0HN78FA678G6R"}}
{"@timestamp":"2024-10-09T15:53:48.5296380+00:00","level":"Error","messageTemplate":"Winning car not found","message":"Winning car not found","fields":{"SourceContext":"Modsen.Server.CarsElections.Application.Features.Car.QueryHandlers.GetCurrentWinningCarHandler","ActionId":"35a3242d-f108-4a4b-9403-ffdf4dd7bdd1","ActionName":"Modsen.Server.CarsElections.Api.Controllers.CarsController.GetWiningCar (Modsen.Server.CarsElections.Api)","RequestId":"0HN78FA678G6R:00000001","RequestPath":"/api/cars/winning","ConnectionId":"0HN78FA678G6R"}}
{"@timestamp":"2024-10-09T15:53:48.6162587+00:00","level":"Information","messageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","message":"Executed action \"Modsen.Server.CarsElections.Api.Controllers.CarsController.GetWiningCar (Modsen.Server.CarsElections.Api)\" in 258.04ms","fields":{"ActionName":"Modsen.Server.CarsElections.Api.Controllers.CarsController.GetWiningCar (Modsen.Server.CarsElections.Api)","ElapsedMilliseconds":258.04,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HN78FA678G6R:00000001","RequestPath":"/api/cars/winning","ConnectionId":"0HN78FA678G6R"}}
{"@timestamp":"2024-10-09T15:53:48.6181709+00:00","level":"Information","messageTemplate":"Executed endpoint '{EndpointName}'","message":"Executed endpoint '\"Modsen.Server.CarsElections.Api.Controllers.CarsController.GetWiningCar (Modsen.Server.CarsElections.Api)\"'","fields":{"EndpointName":"Modsen.Server.CarsElections.Api.Controllers.CarsController.GetWiningCar (Modsen.Server.CarsElections.Api)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HN78FA678G6R:00000001","RequestPath":"/api/cars/winning","ConnectionId":"0HN78FA678G6R"}}
{"@timestamp":"2024-10-09T15:53:48.6207210+00:00","level":"Error","messageTemplate":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","message":"HTTP \"GET\" \"/api/cars/winning\" responded 500 in 270.9907 ms","exceptions":[{"Depth":0,"ClassName":"Modsen.Server.Shared.Exceptions.NotFoundException","Message":"CarNotFound","Source":"Modsen.Server.CarsElections.Application","StackTraceString":"   at Modsen.Server.CarsElections.Application.Features.Car.QueryHandlers.GetCurrentWinningCarHandler.Handle(GetCurrentWinningCar request, CancellationToken cancellationToken) in E:\\Modsen.Server\\Server\\Modsen.Server.CarsElections\\Modsen.Server.CarsElections.Application\\Features\\Car\\QueryHandlers\\GetCurrentWinningCarHandler.cs:line 44\n   at Modsen.Server.CarsElections.Api.Controllers.CarsController.GetWiningCar(CancellationToken cancellationToken) in E:\\Modsen.Server\\Server\\Modsen.Server.CarsElections\\Modsen.Server.CarsElections.Api\\Controllers\\CarsController.cs:line 22\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)\n   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)\n   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)\n   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)","RemoteStackTraceString":null,"RemoteStackIndex":0,"HResult":-2146233088,"HelpURL":null}],"fields":{"RequestMethod":"GET","RequestPath":"/api/cars/winning","StatusCode":500,"Elapsed":270.9907,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HN78FA678G6R:00000001","ConnectionId":"0HN78FA678G6R"},"renderings":{"Elapsed":[{"Format":"0.0000","Rendering":"270.9907"}]}}
{"@timestamp":"2024-10-09T15:53:48.7106050+00:00","level":"Information","messageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","message":"Request finished \"HTTP/1.0\" \"GET\" \"https\"://\"cars_elections\"\"\"\"/api/cars/winning\"\"\" - 404 null \"application/json\" 367.9639ms","fields":{"ElapsedMilliseconds":367.9639,"StatusCode":404,"ContentType":"application/json","ContentLength":null,"Protocol":"HTTP/1.0","Method":"GET","Scheme":"https","Host":"cars_elections","PathBase":"","Path":"/api/cars/winning","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HN78FA678G6R:00000001","RequestPath":"/api/cars/winning","ConnectionId":"0HN78FA678G6R"}}
